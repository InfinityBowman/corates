(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();const Jl=!0,Hl=(t,e)=>t===e,Re=Symbol("solid-proxy"),mi=typeof Proxy=="function",Os=Symbol("solid-track"),zl=Symbol("solid-dev-component"),Dn={equals:Hl};let pi=Si;const ze=1,Ln=2,Gl={},is={};var j=null;let ls=null,Ql=null,H=null,ce=null,Je=null,Hn=0;const Kl={afterUpdate:null,afterCreateOwner:null,afterCreateSignal:null,afterRegisterGraph:null};function At(t,e){const n=H,s=j,r=t.length===0,i=e===void 0?s:e,l=r?{owned:null,cleanups:null,context:null,owner:null}:{owned:null,cleanups:null,context:i?i.context:null,owner:i},o=r?()=>t(()=>{throw new Error("Dispose method must be an explicit argument to createRoot function")}):()=>t(()=>fe(()=>Gt(l)));j=l,H=null;try{return Ie(o,!0)}finally{H=n,j=s}}function P(t,e){e=e?Object.assign({},Dn,e):Dn;const n={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0};e.name&&(n.name=e.name),e.internal?n.internal=!0:yi(n);const s=r=>(typeof r=="function"&&(r=r(n.value)),er(n,r));return[_i.bind(n),s]}function Xl(t,e,n){const s=cn(t,e,!0,ze,n);wt(s)}function U(t,e,n){const s=cn(t,e,!1,ze,n);wt(s)}function de(t,e,n){pi=lo;const s=cn(t,e,!1,ze,n);s.user=!0,Je?Je.push(s):wt(s)}function J(t,e,n){n=n?Object.assign({},Dn,n):Dn;const s=cn(t,e,!0,0,n);return s.observers=null,s.observerSlots=null,s.comparator=n.equals||void 0,wt(s),_i.bind(s)}function Zl(t){return t&&typeof t=="object"&&"then"in t}function eo(t,e,n){let s,r,i;s=!0,r=t,i={};let l=null,o=is,a=!1,c="initialValue"in i,u=typeof s=="function"&&J(s);const d=new Set,[f,h]=(i.storage||P)(i.initialValue),[g,p]=P(void 0),[y,O]=P(void 0,{equals:!1}),[C,E]=P(c?"ready":"unresolved");function v(_,b,S,D){return l===_&&(l=null,D!==void 0&&(c=!0),(_===o||b===o)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(D,{value:b})),o=is,L(b,S)),b}function L(_,b){Ie(()=>{b===void 0&&h(()=>_),E(b!==void 0?"errored":c?"ready":"unresolved"),p(b);for(const S of d.keys())S.decrement();d.clear()},!1)}function k(){const _=so,b=f(),S=g();if(S!==void 0&&!l)throw S;return H&&H.user,b}function N(_=!0){if(_!==!1&&a)return;a=!1;const b=u?u():s;if(b==null||b===!1){v(l,fe(f));return}let S;const D=o!==is?o:fe(()=>{try{return r(b,{value:f(),refetching:_})}catch(T){S=T}});if(S!==void 0){v(l,void 0,Sn(S),b);return}else if(!Zl(D))return v(l,D,void 0,b),D;return l=D,"v"in D?(D.s===1?v(l,D.v,void 0,b):v(l,void 0,Sn(D.v),b),D):(a=!0,queueMicrotask(()=>a=!1),Ie(()=>{E(c?"refreshing":"pending"),O()},!1),D.then(T=>v(D,T,void 0,b),T=>v(D,void 0,Sn(T),b)))}Object.defineProperties(k,{state:{get:()=>C()},error:{get:()=>g()},loading:{get(){const _=C();return _==="pending"||_==="refreshing"}},latest:{get(){if(!c)return k();const _=g();if(_&&!l)throw _;return f()}}});let x=j;return u?Xl(()=>(x=j,N(!1))):N(!1),[k,{refetch:_=>Ks(x,()=>N(_)),mutate:h}]}function wi(t){return Ie(t,!1)}function fe(t){if(H===null)return t();const e=H;H=null;try{return t()}finally{H=e}}function Gs(t,e,n){const s=Array.isArray(t);let r,i=n&&n.defer;return l=>{let o;if(s){o=Array(t.length);for(let c=0;c<t.length;c++)o[c]=t[c]()}else o=t();if(i)return i=!1,l;const a=fe(()=>e(o,r,l));return r=o,a}}function Qs(t){de(()=>fe(t))}function _e(t){return j===null?console.warn("cleanups created outside a `createRoot` or `render` will never be run"):j.cleanups===null?j.cleanups=[t]:j.cleanups.push(t),t}function Rs(){return H}function bi(){return j}function Ks(t,e){const n=j,s=H;j=t,H=null;try{return Ie(e,!0)}catch(r){tr(r)}finally{j=n,H=s}}function to(t){const e=H,n=j;return Promise.resolve().then(()=>{H=e,j=n;let s;return Ie(t,!1),H=j=null,s?s.done:void 0})}const[cm,um]=P(!1);function no(t,e){const n=cn(()=>fe(()=>(Object.assign(t,{[zl]:!0}),t(e))),void 0,!0,0);return n.props=e,n.observers=null,n.observerSlots=null,n.name=t.name,n.component=t,wt(n),n.tValue!==void 0?n.tValue:n.value}function yi(t){j&&(j.sourceMap?j.sourceMap.push(t):j.sourceMap=[t],t.graph=j)}function vi(t,e){const n=Symbol("context");return{id:n,Provider:oo(n,e),defaultValue:t}}function Xs(t){let e;return j&&j.context&&(e=j.context[t.id])!==void 0?e:t.defaultValue}function Zs(t){const e=J(t),n=J(()=>Ts(e()),void 0,{name:"children"});return n.toArray=()=>{const s=n();return Array.isArray(s)?s:s!=null?[s]:[]},n}let so;function _i(){if(this.sources&&this.state)if(this.state===ze)wt(this);else{const t=ce;ce=null,Ie(()=>Pn(this),!1),ce=t}if(H){const t=this.observers?this.observers.length:0;H.sources?(H.sources.push(this),H.sourceSlots.push(t)):(H.sources=[this],H.sourceSlots=[t]),this.observers?(this.observers.push(H),this.observerSlots.push(H.sources.length-1)):(this.observers=[H],this.observerSlots=[H.sources.length-1])}return this.value}function er(t,e,n){let s=t.value;return(!t.comparator||!t.comparator(s,e))&&(t.value=e,t.observers&&t.observers.length&&Ie(()=>{for(let r=0;r<t.observers.length;r+=1){const i=t.observers[r],l=ls&&ls.running;l&&ls.disposed.has(i),(l?!i.tState:!i.state)&&(i.pure?ce.push(i):Je.push(i),i.observers&&xi(i)),l||(i.state=ze)}if(ce.length>1e6)throw ce=[],Jl?new Error("Potential Infinite Loop Detected."):new Error},!1)),e}function wt(t){if(!t.fn)return;Gt(t);const e=Hn;ro(t,t.value,e)}function ro(t,e,n){let s;const r=j,i=H;H=j=t;try{s=t.fn(e)}catch(l){return t.pure&&(t.state=ze,t.owned&&t.owned.forEach(Gt),t.owned=null),t.updatedAt=n+1,tr(l)}finally{H=i,j=r}(!t.updatedAt||t.updatedAt<=n)&&(t.updatedAt!=null&&"observers"in t?er(t,s):t.value=s,t.updatedAt=n)}function cn(t,e,n,s=ze,r){const i={fn:t,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:j,context:j?j.context:null,pure:n};return j===null?console.warn("computations created outside a `createRoot` or `render` will never be disposed"):j!==Gl&&(j.owned?j.owned.push(i):j.owned=[i]),r&&r.name&&(i.name=r.name),i}function Nn(t){if(t.state===0)return;if(t.state===Ln)return Pn(t);if(t.suspense&&fe(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<Hn);)t.state&&e.push(t);for(let n=e.length-1;n>=0;n--)if(t=e[n],t.state===ze)wt(t);else if(t.state===Ln){const s=ce;ce=null,Ie(()=>Pn(t,e[0]),!1),ce=s}}function Ie(t,e){if(ce)return t();let n=!1;e||(ce=[]),Je?n=!0:Je=[],Hn++;try{const s=t();return io(n),s}catch(s){n||(Je=null),ce=null,tr(s)}}function io(t){if(ce&&(Si(ce),ce=null),t)return;const e=Je;Je=null,e.length&&Ie(()=>pi(e),!1)}function Si(t){for(let e=0;e<t.length;e++)Nn(t[e])}function lo(t){let e,n=0;for(e=0;e<t.length;e++){const s=t[e];s.user?t[n++]=s:Nn(s)}for(e=0;e<n;e++)Nn(t[e])}function Pn(t,e){t.state=0;for(let n=0;n<t.sources.length;n+=1){const s=t.sources[n];if(s.sources){const r=s.state;r===ze?s!==e&&(!s.updatedAt||s.updatedAt<Hn)&&Nn(s):r===Ln&&Pn(s,e)}}}function xi(t){for(let e=0;e<t.observers.length;e+=1){const n=t.observers[e];n.state||(n.state=Ln,n.pure?ce.push(n):Je.push(n),n.observers&&xi(n))}}function Gt(t){let e;if(t.sources)for(;t.sources.length;){const n=t.sources.pop(),s=t.sourceSlots.pop(),r=n.observers;if(r&&r.length){const i=r.pop(),l=n.observerSlots.pop();s<r.length&&(i.sourceSlots[l]=s,r[s]=i,n.observerSlots[s]=l)}}if(t.tOwned){for(e=t.tOwned.length-1;e>=0;e--)Gt(t.tOwned[e]);delete t.tOwned}if(t.owned){for(e=t.owned.length-1;e>=0;e--)Gt(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0,delete t.sourceMap}function Sn(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function tr(t,e=j){throw Sn(t)}function Ts(t){if(typeof t=="function"&&!t.length)return Ts(t());if(Array.isArray(t)){const e=[];for(let n=0;n<t.length;n++){const s=Ts(t[n]);Array.isArray(s)?e.push.apply(e,s):e.push(s)}return e}return t}function oo(t,e){return function(s){let r;return U(()=>r=fe(()=>(j.context={...j.context,[t]:s.value},Zs(()=>s.children))),void 0,e),r}}const ao=Symbol("fallback");function kr(t){for(let e=0;e<t.length;e++)t[e]()}function co(t,e,n={}){let s=[],r=[],i=[],l=0,o=e.length>1?[]:null;return _e(()=>kr(i)),()=>{let a=t()||[],c=a.length,u,d;return a[Os],fe(()=>{let h,g,p,y,O,C,E,v,L;if(c===0)l!==0&&(kr(i),i=[],s=[],r=[],l=0,o&&(o=[])),n.fallback&&(s=[ao],r[0]=At(k=>(i[0]=k,n.fallback())),l=1);else if(l===0){for(r=new Array(c),d=0;d<c;d++)s[d]=a[d],r[d]=At(f);l=c}else{for(p=new Array(c),y=new Array(c),o&&(O=new Array(c)),C=0,E=Math.min(l,c);C<E&&s[C]===a[C];C++);for(E=l-1,v=c-1;E>=C&&v>=C&&s[E]===a[v];E--,v--)p[v]=r[E],y[v]=i[E],o&&(O[v]=o[E]);for(h=new Map,g=new Array(v+1),d=v;d>=C;d--)L=a[d],u=h.get(L),g[d]=u===void 0?-1:u,h.set(L,d);for(u=C;u<=E;u++)L=s[u],d=h.get(L),d!==void 0&&d!==-1?(p[d]=r[u],y[d]=i[u],o&&(O[d]=o[u]),d=g[d],h.set(L,d)):i[u]();for(d=C;d<c;d++)d in p?(r[d]=p[d],i[d]=y[d],o&&(o[d]=O[d],o[d](d))):r[d]=At(f);r=r.slice(0,l=c),s=a.slice(0)}return r});function f(h){if(i[d]=h,o){const[g,p]=P(d,{name:"index"});return o[d]=p,e(a[d],g)}return e(a[d])}}}function m(t,e){return no(t,e||{})}function gn(){return!0}const Ds={get(t,e,n){return e===Re?n:t.get(e)},has(t,e){return e===Re?!0:t.has(e)},set:gn,deleteProperty:gn,getOwnPropertyDescriptor(t,e){return{configurable:!0,enumerable:!0,get(){return t.get(e)},set:gn,deleteProperty:gn}},ownKeys(t){return t.keys()}};function os(t){return(t=typeof t=="function"?t():t)?t:{}}function uo(){for(let t=0,e=this.length;t<e;++t){const n=this[t]();if(n!==void 0)return n}}function z(...t){let e=!1;for(let l=0;l<t.length;l++){const o=t[l];e=e||!!o&&Re in o,t[l]=typeof o=="function"?(e=!0,J(o)):o}if(mi&&e)return new Proxy({get(l){for(let o=t.length-1;o>=0;o--){const a=os(t[o])[l];if(a!==void 0)return a}},has(l){for(let o=t.length-1;o>=0;o--)if(l in os(t[o]))return!0;return!1},keys(){const l=[];for(let o=0;o<t.length;o++)l.push(...Object.keys(os(t[o])));return[...new Set(l)]}},Ds);const n={},s=Object.create(null);for(let l=t.length-1;l>=0;l--){const o=t[l];if(!o)continue;const a=Object.getOwnPropertyNames(o);for(let c=a.length-1;c>=0;c--){const u=a[c];if(u==="__proto__"||u==="constructor")continue;const d=Object.getOwnPropertyDescriptor(o,u);if(!s[u])s[u]=d.get?{enumerable:!0,configurable:!0,get:uo.bind(n[u]=[d.get.bind(o)])}:d.value!==void 0?d:void 0;else{const f=n[u];f&&(d.get?f.push(d.get.bind(o)):d.value!==void 0&&f.push(()=>d.value))}}}const r={},i=Object.keys(s);for(let l=i.length-1;l>=0;l--){const o=i[l],a=s[o];a&&a.get?Object.defineProperty(r,o,a):r[o]=a?a.value:void 0}return r}function ki(t,...e){const n=e.length;if(mi&&Re in t){const r=n>1?e.flat():e[0],i=e.map(l=>new Proxy({get(o){return l.includes(o)?t[o]:void 0},has(o){return l.includes(o)&&o in t},keys(){return l.filter(o=>o in t)}},Ds));return i.push(new Proxy({get(l){return r.includes(l)?void 0:t[l]},has(l){return r.includes(l)?!1:l in t},keys(){return Object.keys(t).filter(l=>!r.includes(l))}},Ds)),i}const s=[];for(let r=0;r<=n;r++)s[r]={};for(const r of Object.getOwnPropertyNames(t)){let i=n;for(let a=0;a<e.length;a++)if(e[a].includes(r)){i=a;break}const l=Object.getOwnPropertyDescriptor(t,r);!l.get&&!l.set&&l.enumerable&&l.writable&&l.configurable?s[i][r]=l.value:Object.defineProperty(s[i],r,l)}return s}let fo=0;function ho(){return`cl-${fo++}`}const go=t=>`Attempting to access a stale value from <${t}> that could possibly be undefined. This may occur because you are reading the accessor returned from the component at a time where it has already been unmounted. We recommend cleaning up any stale timers or async, or reading from the initial condition.`;function Me(t){const e="fallback"in t&&{fallback:()=>t.fallback};return J(co(()=>t.each,t.children,e||void 0),void 0,{name:"value"})}function F(t){const e=t.keyed,n=J(()=>t.when,void 0,{name:"condition value"}),s=e?n:J(n,void 0,{equals:(r,i)=>!r==!i,name:"condition"});return J(()=>{const r=s();if(r){const i=t.children;return typeof i=="function"&&i.length>0?fe(()=>i(e?r:()=>{if(!fe(s))throw go("Show");return n()})):i}return t.fallback},void 0,{name:"value"})}const mo={hooks:Kl,writeSignal:er,registerGraph:yi};globalThis&&(globalThis.Solid$$?console.warn("You appear to have multiple instances of Solid. This can lead to unexpected behavior."):globalThis.Solid$$=!0);const po=["allowfullscreen","async","alpha","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","adauctionheaders","browsingtopics","credentialless","defaultchecked","defaultmuted","defaultselected","defer","disablepictureinpicture","disableremoteplayback","preservespitch","shadowrootclonable","shadowrootcustomelementregistry","shadowrootdelegatesfocus","shadowrootserializable","sharedstoragewritable"],wo=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline","adAuctionHeaders","allowFullscreen","browsingTopics","defaultChecked","defaultMuted","defaultSelected","disablePictureInPicture","disableRemotePlayback","preservesPitch","shadowRootClonable","shadowRootCustomElementRegistry","shadowRootDelegatesFocus","shadowRootSerializable","sharedStorageWritable",...po]),bo=new Set(["innerHTML","textContent","innerText","children"]),yo=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),vo=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1},adauctionheaders:{$:"adAuctionHeaders",IFRAME:1},allowfullscreen:{$:"allowFullscreen",IFRAME:1},browsingtopics:{$:"browsingTopics",IMG:1},defaultchecked:{$:"defaultChecked",INPUT:1},defaultmuted:{$:"defaultMuted",AUDIO:1,VIDEO:1},defaultselected:{$:"defaultSelected",OPTION:1},disablepictureinpicture:{$:"disablePictureInPicture",VIDEO:1},disableremoteplayback:{$:"disableRemotePlayback",AUDIO:1,VIDEO:1},preservespitch:{$:"preservesPitch",AUDIO:1,VIDEO:1},shadowrootclonable:{$:"shadowRootClonable",TEMPLATE:1},shadowrootdelegatesfocus:{$:"shadowRootDelegatesFocus",TEMPLATE:1},shadowrootserializable:{$:"shadowRootSerializable",TEMPLATE:1},sharedstoragewritable:{$:"sharedStorageWritable",IFRAME:1,IMG:1}});function _o(t,e){const n=vo[t];return typeof n=="object"?n[e]?n.$:void 0:n}const So=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),xo={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},ae=t=>J(()=>t());function ko(t,e,n){let s=n.length,r=e.length,i=s,l=0,o=0,a=e[r-1].nextSibling,c=null;for(;l<r||o<i;){if(e[l]===n[o]){l++,o++;continue}for(;e[r-1]===n[i-1];)r--,i--;if(r===l){const u=i<s?o?n[o-1].nextSibling:n[i-o]:a;for(;o<i;)t.insertBefore(n[o++],u)}else if(i===o)for(;l<r;)(!c||!c.has(e[l]))&&e[l].remove(),l++;else if(e[l]===n[i-1]&&n[o]===e[r-1]){const u=e[--r].nextSibling;t.insertBefore(n[o++],e[l++].nextSibling),t.insertBefore(n[--i],u),e[r]=n[i]}else{if(!c){c=new Map;let d=o;for(;d<i;)c.set(n[d],d++)}const u=c.get(e[l]);if(u!=null)if(o<u&&u<i){let d=l,f=1,h;for(;++d<r&&d<i&&!((h=c.get(e[d]))==null||h!==u+f);)f++;if(f>u-o){const g=e[l];for(;o<u;)t.insertBefore(n[o++],g)}else t.replaceChild(n[o++],e[l++])}else l++;else e[l++].remove()}}}const Cr="_$DX_DELEGATE";function Co(t,e,n,s={}){if(!e)throw new Error("The `element` passed to `render(..., element)` doesn't exist. Make sure `element` exists in the document.");let r;return At(i=>{r=i,e===document?t():w(e,t(),e.firstChild?null:void 0,n)},s.owner),()=>{r(),e.textContent=""}}function A(t,e,n,s){let r;const i=()=>{const o=document.createElement("template");return o.innerHTML=t,o.content.firstChild},l=()=>(r||(r=i())).cloneNode(!0);return l.cloneNode=l,l}function ge(t,e=window.document){const n=e[Cr]||(e[Cr]=new Set);for(let s=0,r=t.length;s<r;s++){const i=t[s];n.has(i)||(n.add(i),e.addEventListener(i,Lo))}}function st(t,e,n){n==null?t.removeAttribute(e):t.setAttribute(e,n)}function $o(t,e,n,s){s==null?t.removeAttributeNS(e,n):t.setAttributeNS(e,n,s)}function Eo(t,e,n){n?t.setAttribute(e,""):t.removeAttribute(e)}function ht(t,e){e==null?t.removeAttribute("class"):t.className=e}function Ao(t,e,n,s){if(s)Array.isArray(n)?(t[`$$${e}`]=n[0],t[`$$${e}Data`]=n[1]):t[`$$${e}`]=n;else if(Array.isArray(n)){const r=n[0];t.addEventListener(e,n[0]=i=>r.call(t,n[1],i))}else t.addEventListener(e,n,typeof n!="function"&&n)}function Oo(t,e,n={}){const s=Object.keys(e||{}),r=Object.keys(n);let i,l;for(i=0,l=r.length;i<l;i++){const o=r[i];!o||o==="undefined"||e[o]||(Er(t,o,!1),delete n[o])}for(i=0,l=s.length;i<l;i++){const o=s[i],a=!!e[o];!o||o==="undefined"||n[o]===a||!a||(Er(t,o,!0),n[o]=a)}return n}function Ro(t,e,n){if(!e)return n?st(t,"style"):e;const s=t.style;if(typeof e=="string")return s.cssText=e;typeof n=="string"&&(s.cssText=n=void 0),n||(n={}),e||(e={});let r,i;for(i in n)e[i]==null&&s.removeProperty(i),delete n[i];for(i in e)r=e[i],r!==n[i]&&(s.setProperty(i,r),n[i]=r);return n}function $r(t,e,n){n!=null?t.style.setProperty(e,n):t.style.removeProperty(e)}function Ze(t,e={},n,s){const r={};return s||U(()=>r.children=Qt(t,e.children,r.children)),U(()=>typeof e.ref=="function"&&nr(e.ref,t)),U(()=>To(t,e,n,!0,r,!0)),r}function nr(t,e,n){return fe(()=>t(e,n))}function w(t,e,n,s){if(n!==void 0&&!s&&(s=[]),typeof e!="function")return Qt(t,e,s,n);U(r=>Qt(t,e(),r,n),s)}function To(t,e,n,s,r={},i=!1){e||(e={});for(const l in r)if(!(l in e)){if(l==="children")continue;r[l]=Ar(t,l,null,r[l],n,i,e)}for(const l in e){if(l==="children")continue;const o=e[l];r[l]=Ar(t,l,o,r[l],n,i,e)}}function Do(t){return t.toLowerCase().replace(/-([a-z])/g,(e,n)=>n.toUpperCase())}function Er(t,e,n){const s=e.trim().split(/\s+/);for(let r=0,i=s.length;r<i;r++)t.classList.toggle(s[r],n)}function Ar(t,e,n,s,r,i,l){let o,a,c,u,d;if(e==="style")return Ro(t,n,s);if(e==="classList")return Oo(t,n,s);if(n===s)return s;if(e==="ref")i||n(t);else if(e.slice(0,3)==="on:"){const f=e.slice(3);s&&t.removeEventListener(f,s,typeof s!="function"&&s),n&&t.addEventListener(f,n,typeof n!="function"&&n)}else if(e.slice(0,10)==="oncapture:"){const f=e.slice(10);s&&t.removeEventListener(f,s,!0),n&&t.addEventListener(f,n,!0)}else if(e.slice(0,2)==="on"){const f=e.slice(2).toLowerCase(),h=So.has(f);if(!h&&s){const g=Array.isArray(s)?s[0]:s;t.removeEventListener(f,g)}(h||n)&&(Ao(t,f,n,h),h&&ge([f]))}else if(e.slice(0,5)==="attr:")st(t,e.slice(5),n);else if(e.slice(0,5)==="bool:")Eo(t,e.slice(5),n);else if((d=e.slice(0,5)==="prop:")||(c=bo.has(e))||!r&&((u=_o(e,t.tagName))||(a=wo.has(e)))||(o=t.nodeName.includes("-")||"is"in l))d&&(e=e.slice(5),a=!0),e==="class"||e==="className"?ht(t,n):o&&!a&&!c?t[Do(e)]=n:t[u||e]=n;else{const f=r&&e.indexOf(":")>-1&&xo[e.split(":")[0]];f?$o(t,f,e,n):st(t,yo[e]||e,n)}return n}function Lo(t){let e=t.target;const n=`$$${t.type}`,s=t.target,r=t.currentTarget,i=a=>Object.defineProperty(t,"target",{configurable:!0,value:a}),l=()=>{const a=e[n];if(a&&!e.disabled){const c=e[`${n}Data`];if(c!==void 0?a.call(e,c,t):a.call(e,t),t.cancelBubble)return}return e.host&&typeof e.host!="string"&&!e.host._$host&&e.contains(t.target)&&i(e.host),!0},o=()=>{for(;l()&&(e=e._$host||e.parentNode||e.host););};if(Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return e||document}}),t.composedPath){const a=t.composedPath();i(a[0]);for(let c=0;c<a.length-2&&(e=a[c],!!l());c++){if(e._$host){e=e._$host,o();break}if(e.parentNode===r)break}}else o();i(s)}function Qt(t,e,n,s,r){for(;typeof n=="function";)n=n();if(e===n)return n;const i=typeof e,l=s!==void 0;if(t=l&&n[0]&&n[0].parentNode||t,i==="string"||i==="number"){if(i==="number"&&(e=e.toString(),e===n))return n;if(l){let o=n[0];o&&o.nodeType===3?o.data!==e&&(o.data=e):o=document.createTextNode(e),n=vt(t,n,s,o)}else n!==""&&typeof n=="string"?n=t.firstChild.data=e:n=t.textContent=e}else if(e==null||i==="boolean")n=vt(t,n,s);else{if(i==="function")return U(()=>{let o=e();for(;typeof o=="function";)o=o();n=Qt(t,o,n,s)}),()=>n;if(Array.isArray(e)){const o=[],a=n&&Array.isArray(n);if(Ls(o,e,n,r))return U(()=>n=Qt(t,o,n,s,!0)),()=>n;if(o.length===0){if(n=vt(t,n,s),l)return n}else a?n.length===0?Or(t,o,s):ko(t,n,o):(n&&vt(t),Or(t,o));n=o}else if(e.nodeType){if(Array.isArray(n)){if(l)return n=vt(t,n,s,e);vt(t,n,null,e)}else n==null||n===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);n=e}else console.warn("Unrecognized value. Skipped inserting",e)}return n}function Ls(t,e,n,s){let r=!1;for(let i=0,l=e.length;i<l;i++){let o=e[i],a=n&&n[t.length],c;if(!(o==null||o===!0||o===!1))if((c=typeof o)=="object"&&o.nodeType)t.push(o);else if(Array.isArray(o))r=Ls(t,o,a)||r;else if(c==="function")if(s){for(;typeof o=="function";)o=o();r=Ls(t,Array.isArray(o)?o:[o],Array.isArray(a)?a:[a])||r}else t.push(o),r=!0;else{const u=String(o);a&&a.nodeType===3&&a.data===u?t.push(a):t.push(document.createTextNode(u))}}return r}function Or(t,e,n=null){for(let s=0,r=e.length;s<r;s++)t.insertBefore(e[s],n)}function vt(t,e,n,s){if(n===void 0)return t.textContent="";const r=s||document.createTextNode("");if(e.length){let i=!1;for(let l=e.length-1;l>=0;l--){const o=e[l];if(r!==o){const a=o.parentNode===t;!i&&!l?a?t.replaceChild(r,o):t.insertBefore(r,n):a&&o.remove()}else i=!0}}else t.insertBefore(r,n);return[r]}const Ci=!1;function $i(){let t=new Set;function e(r){return t.add(r),()=>t.delete(r)}let n=!1;function s(r,i){if(n)return!(n=!1);const l={to:r,options:i,defaultPrevented:!1,preventDefault:()=>l.defaultPrevented=!0};for(const o of t)o.listener({...l,from:o.location,retry:a=>{a&&(n=!0),o.navigate(r,{...i,resolve:!1})}});return!l.defaultPrevented}return{subscribe:e,confirm:s}}let Ns;function sr(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),Ns=window.history.state._depth}sr();function No(t){return{...t,_depth:window.history.state&&window.history.state._depth}}function Po(t,e){let n=!1;return()=>{const s=Ns;sr();const r=s==null?null:Ns-s;if(n){n=!1;return}r&&e(r)?(n=!0,window.history.go(-r)):t()}}const Mo=/^(?:[a-z0-9]+:)?\/\//i,Uo=/^\/+|(\/)\/+$/g,Ei="http://sr";function dt(t,e=!1){const n=t.replace(Uo,"$1");return n?e||/^[?#]/.test(n)?n:"/"+n:""}function xn(t,e,n){if(Mo.test(e))return;const s=dt(t),r=n&&dt(n);let i="";return!r||e.startsWith("/")?i=s:r.toLowerCase().indexOf(s.toLowerCase())!==0?i=s+r:i=r,(i||"/")+dt(e,!i)}function Io(t,e){if(t==null)throw new Error(e);return t}function jo(t,e){return dt(t).replace(/\/*(\*.*)?$/g,"")+dt(e)}function Ai(t){const e={};return t.searchParams.forEach((n,s)=>{s in e?Array.isArray(e[s])?e[s].push(n):e[s]=[e[s],n]:e[s]=n}),e}function qo(t,e,n){const[s,r]=t.split("/*",2),i=s.split("/").filter(Boolean),l=i.length;return o=>{const a=o.split("/").filter(Boolean),c=a.length-l;if(c<0||c>0&&r===void 0&&!e)return null;const u={path:l?"":"/",params:{}},d=f=>n===void 0?void 0:n[f];for(let f=0;f<l;f++){const h=i[f],g=h[0]===":",p=g?a[f]:a[f].toLowerCase(),y=g?h.slice(1):h.toLowerCase();if(g&&as(p,d(y)))u.params[y]=p;else if(g||!as(p,y))return null;u.path+=`/${p}`}if(r){const f=c?a.slice(-c).join("/"):"";if(as(f,d(r)))u.params[r]=f;else return null}return u}}function as(t,e){const n=s=>s===t;return e===void 0?!0:typeof e=="string"?n(e):typeof e=="function"?e(t):Array.isArray(e)?e.some(n):e instanceof RegExp?e.test(t):!1}function Fo(t){const[e,n]=t.pattern.split("/*",2),s=e.split("/").filter(Boolean);return s.reduce((r,i)=>r+(i.startsWith(":")?2:3),s.length-(n===void 0?0:1))}function Oi(t){const e=new Map,n=bi();return new Proxy({},{get(s,r){return e.has(r)||Ks(n,()=>e.set(r,J(()=>t()[r]))),e.get(r)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(t())},has(s,r){return r in t()}})}function Bo(t,e){const n=new URLSearchParams(t);Object.entries(e).forEach(([r,i])=>{i==null||i===""||i instanceof Array&&!i.length?n.delete(r):i instanceof Array?(n.delete(r),i.forEach(l=>{n.append(r,String(l))})):n.set(r,String(i))});const s=n.toString();return s?`?${s}`:""}function Ri(t){let e=/(\/?\:[^\/]+)\?/.exec(t);if(!e)return[t];let n=t.slice(0,e.index),s=t.slice(e.index+e[0].length);const r=[n,n+=e[1]];for(;e=/^(\/\:[^\/]+)\?/.exec(s);)r.push(n+=e[1]),s=s.slice(e[0].length);return Ri(s).reduce((i,l)=>[...i,...r.map(o=>o+l)],[])}const Vo=100,Ti=vi(),rr=vi(),un=()=>Io(Xs(Ti),"<A> and 'use' router primitives can be only used inside a Route."),Yo=()=>Xs(rr)||un().base,Wo=t=>{const e=Yo();return J(()=>e.resolvePath(t()))},Jo=t=>{const e=un();return J(()=>{const n=t();return n!==void 0?e.renderPath(n):n})},Ce=()=>un().navigatorFactory(),ir=()=>un().location,lr=()=>un().params,Ho=()=>{const t=ir(),e=Ce(),n=(s,r)=>{const i=fe(()=>Bo(t.search,s)+t.hash);e(i,{scroll:!1,resolve:!1,...r})};return[t.query,n]};function zo(t,e=""){const{component:n,preload:s,load:r,children:i,info:l}=t,o=!i||Array.isArray(i)&&!i.length,a={key:t,component:n,preload:s||r,info:l};return Di(t.path).reduce((c,u)=>{for(const d of Ri(u)){const f=jo(e,d);let h=o?f:f.split("/*",1)[0];h=h.split("/").map(g=>g.startsWith(":")||g.startsWith("*")?g:encodeURIComponent(g)).join("/"),c.push({...a,originalPath:u,pattern:h,matcher:qo(h,!o,t.matchFilters)})}return c},[])}function Go(t,e=0){return{routes:t,score:Fo(t[t.length-1])*1e4-e,matcher(n){const s=[];for(let r=t.length-1;r>=0;r--){const i=t[r],l=i.matcher(n);if(!l)return null;s.unshift({...l,route:i})}return s}}}function Di(t){return Array.isArray(t)?t:[t]}function Li(t,e="",n=[],s=[]){const r=Di(t);for(let i=0,l=r.length;i<l;i++){const o=r[i];if(o&&typeof o=="object"){o.hasOwnProperty("path")||(o.path="");const a=zo(o,e);for(const c of a){n.push(c);const u=Array.isArray(o.children)&&o.children.length===0;if(o.children&&!u)Li(o.children,c.pattern,n,s);else{const d=Go([...n],s.length);s.push(d)}n.pop()}}}return n.length?s:s.sort((i,l)=>l.score-i.score)}function cs(t,e){for(let n=0,s=t.length;n<s;n++){const r=t[n].matcher(e);if(r)return r}return[]}function Qo(t,e,n){const s=new URL(Ei),r=J(u=>{const d=t();try{return new URL(d,s)}catch{return console.error(`Invalid path ${d}`),u}},s,{equals:(u,d)=>u.href===d.href}),i=J(()=>r().pathname),l=J(()=>r().search,!0),o=J(()=>r().hash),a=()=>"",c=Gs(l,()=>Ai(r()));return{get pathname(){return i()},get search(){return l()},get hash(){return o()},get state(){return e()},get key(){return a()},query:n?n(c):Oi(c)}}let ut;function Ko(){return ut}function Xo(t,e,n,s={}){const{signal:[r,i],utils:l={}}=t,o=l.parsePath||($=>$),a=l.renderPath||($=>$),c=l.beforeLeave||$i(),u=xn("",s.base||"");if(u===void 0)throw new Error(`${u} is not a valid base path`);u&&!r().value&&i({value:u,replace:!0,scroll:!1});const[d,f]=P(!1);let h;const g=($,R)=>{R.value===p()&&R.state===O()||(h===void 0&&f(!0),ut=$,h=R,to(()=>{h===R&&(y(h.value),C(h.state),L[1](M=>M.filter(q=>q.pending)))}).finally(()=>{h===R&&wi(()=>{ut=void 0,$==="navigate"&&D(h),f(!1),h=void 0})}))},[p,y]=P(r().value),[O,C]=P(r().state),E=Qo(p,O,l.queryWrapper),v=[],L=P([]),k=J(()=>typeof s.transformUrl=="function"?cs(e(),s.transformUrl(E.pathname)):cs(e(),E.pathname)),N=()=>{const $=k(),R={};for(let M=0;M<$.length;M++)Object.assign(R,$[M].params);return R},x=l.paramsWrapper?l.paramsWrapper(N,e):Oi(N),_={pattern:u,path:()=>u,outlet:()=>null,resolvePath($){return xn(u,$)}};return U(Gs(r,$=>g("native",$),{defer:!0})),{base:_,location:E,params:x,isRouting:d,renderPath:a,parsePath:o,navigatorFactory:S,matches:k,beforeLeave:c,preloadRoute:T,singleFlight:s.singleFlight===void 0?!0:s.singleFlight,submissions:L};function b($,R,M){fe(()=>{if(typeof R=="number"){R&&(l.go?l.go(R):console.warn("Router integration does not support relative routing"));return}const q=!R||R[0]==="?",{replace:I,resolve:W,scroll:G,state:Q}={replace:!1,resolve:!q,scroll:!0,...M},le=W?$.resolvePath(R):xn(q&&E.pathname||"",R);if(le===void 0)throw new Error(`Path '${R}' is not a routable path`);if(v.length>=Vo)throw new Error("Too many redirects");const ct=p();(le!==ct||Q!==O())&&(Ci||c.confirm(le,M)&&(v.push({value:ct,replace:I,scroll:G,state:O()}),g("navigate",{value:le,state:Q})))})}function S($){return $=$||Xs(rr)||_,(R,M)=>b($,R,M)}function D($){const R=v[0];R&&(i({...$,replace:R.replace,scroll:R.scroll}),v.length=0)}function T($,R){const M=cs(e(),$.pathname),q=ut;ut="preload";for(let I in M){const{route:W,params:G}=M[I];W.component&&W.component.preload&&W.component.preload();const{preload:Q}=W;R&&Q&&Ks(n(),()=>Q({params:G,location:{pathname:$.pathname,search:$.search,hash:$.hash,query:Ai($),state:null,key:""},intent:"preload"}))}ut=q}}function Zo(t,e,n,s){const{base:r,location:i,params:l}=t,{pattern:o,component:a,preload:c}=s().route,u=J(()=>s().path);a&&a.preload&&a.preload();const d=c?c({params:l,location:i,intent:ut||"initial"}):void 0;return{parent:e,pattern:o,path:u,outlet:()=>a?m(a,{params:l,location:i,data:d,get children(){return n()}}):n(),resolvePath(h){return xn(r.path(),h,u())}}}const ea=t=>e=>{const{base:n}=e,s=Zs(()=>e.children),r=J(()=>Li(s(),e.base||""));let i;const l=Xo(t,r,()=>i,{base:n,singleFlight:e.singleFlight,transformUrl:e.transformUrl});return t.create&&t.create(l),m(Ti.Provider,{value:l,get children(){return m(ta,{routerState:l,get root(){return e.root},get preload(){return e.rootPreload||e.rootLoad},get children(){return[ae(()=>(i=bi())&&null),m(na,{routerState:l,get branches(){return r()}})]}})}})};function ta(t){const e=t.routerState.location,n=t.routerState.params,s=J(()=>t.preload&&fe(()=>{t.preload({params:n,location:e,intent:Ko()||"initial"})}));return m(F,{get when(){return t.root},keyed:!0,get fallback(){return t.children},children:r=>m(r,{params:n,location:e,get data(){return s()},get children(){return t.children}})})}function na(t){const e=[];let n;const s=J(Gs(t.routerState.matches,(r,i,l)=>{let o=i&&r.length===i.length;const a=[];for(let c=0,u=r.length;c<u;c++){const d=i&&i[c],f=r[c];l&&d&&f.route.key===d.route.key?a[c]=l[c]:(o=!1,e[c]&&e[c](),At(h=>{e[c]=h,a[c]=Zo(t.routerState,a[c-1]||t.routerState.base,Rr(()=>s()[c+1]),()=>{const g=t.routerState.matches();return g[c]??g[0]})}))}return e.splice(r.length).forEach(c=>c()),l&&o?l:(n=a[0],a)}));return Rr(()=>s()&&n)()}const Rr=t=>()=>m(F,{get when(){return t()},keyed:!0,children:e=>m(rr.Provider,{value:e,get children(){return e.outlet()}})}),Be=t=>{const e=Zs(()=>t.children);return z(t,{get children(){return e()}})};function sa([t,e],n,s){return[t,s?r=>e(s(r)):e]}function ra(t){let e=!1;const n=r=>typeof r=="string"?{value:r}:r,s=sa(P(n(t.get()),{equals:(r,i)=>r.value===i.value&&r.state===i.state}),void 0,r=>(!e&&t.set(r),r));return t.init&&_e(t.init((r=t.get())=>{e=!0,s[1](n(r)),e=!1})),ea({signal:s,create:t.create,utils:t.utils})}function ia(t,e,n){return t.addEventListener(e,n),()=>t.removeEventListener(e,n)}function la(t,e){const n=t&&document.getElementById(t);n?n.scrollIntoView():e&&window.scrollTo(0,0)}const oa=new Map;function aa(t=!0,e=!1,n="/_server",s){return r=>{const i=r.base.path(),l=r.navigatorFactory(r.base);let o,a;function c(p){return p.namespaceURI==="http://www.w3.org/2000/svg"}function u(p){if(p.defaultPrevented||p.button!==0||p.metaKey||p.altKey||p.ctrlKey||p.shiftKey)return;const y=p.composedPath().find(k=>k instanceof Node&&k.nodeName.toUpperCase()==="A");if(!y||e&&!y.hasAttribute("link"))return;const O=c(y),C=O?y.href.baseVal:y.href;if((O?y.target.baseVal:y.target)||!C&&!y.hasAttribute("state"))return;const v=(y.getAttribute("rel")||"").split(/\s+/);if(y.hasAttribute("download")||v&&v.includes("external"))return;const L=O?new URL(C,document.baseURI):new URL(C);if(!(L.origin!==window.location.origin||i&&L.pathname&&!L.pathname.toLowerCase().startsWith(i.toLowerCase())))return[y,L]}function d(p){const y=u(p);if(!y)return;const[O,C]=y,E=r.parsePath(C.pathname+C.search+C.hash),v=O.getAttribute("state");p.preventDefault(),l(E,{resolve:!1,replace:O.hasAttribute("replace"),scroll:!O.hasAttribute("noscroll"),state:v?JSON.parse(v):void 0})}function f(p){const y=u(p);if(!y)return;const[O,C]=y;s&&(C.pathname=s(C.pathname)),r.preloadRoute(C,O.getAttribute("preload")!=="false")}function h(p){clearTimeout(o);const y=u(p);if(!y)return a=null;const[O,C]=y;a!==O&&(s&&(C.pathname=s(C.pathname)),o=setTimeout(()=>{r.preloadRoute(C,O.getAttribute("preload")!=="false"),a=O},20))}function g(p){if(p.defaultPrevented)return;let y=p.submitter&&p.submitter.hasAttribute("formaction")?p.submitter.getAttribute("formaction"):p.target.getAttribute("action");if(!y)return;if(!y.startsWith("https://action/")){const C=new URL(y,Ei);if(y=r.parsePath(C.pathname+C.search),!y.startsWith(n))return}if(p.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const O=oa.get(y);if(O){p.preventDefault();const C=new FormData(p.target,p.submitter);O.call({r,f:p.target},p.target.enctype==="multipart/form-data"?C:new URLSearchParams(C))}}ge(["click","submit"]),document.addEventListener("click",d),t&&(document.addEventListener("mousemove",h,{passive:!0}),document.addEventListener("focusin",f,{passive:!0}),document.addEventListener("touchstart",f,{passive:!0})),document.addEventListener("submit",g),_e(()=>{document.removeEventListener("click",d),t&&(document.removeEventListener("mousemove",h),document.removeEventListener("focusin",f),document.removeEventListener("touchstart",f)),document.removeEventListener("submit",g)})}}function ca(t){const e=()=>{const s=window.location.pathname.replace(/^\/+/,"/")+window.location.search,r=window.history.state&&window.history.state._depth&&Object.keys(window.history.state).length===1?void 0:window.history.state;return{value:s+window.location.hash,state:r}},n=$i();return ra({get:e,set({value:s,replace:r,scroll:i,state:l}){r?window.history.replaceState(No(l),"",s):window.history.pushState(l,"",s),la(decodeURIComponent(window.location.hash.slice(1)),i),sr()},init:s=>ia(window,"popstate",Po(s,r=>{if(r)return!n.confirm(r);{const i=e();return!n.confirm(i.value,{state:i.state})}})),create:aa(t.preload,t.explicitLinks,t.actionBase,t.transformUrl),utils:{go:s=>window.history.go(s),beforeLeave:n}})(t)}var ua=A("<a>");function Ve(t){t=z({inactiveClass:"inactive",activeClass:"active"},t);const[,e]=ki(t,["href","state","class","activeClass","inactiveClass","end"]),n=Wo(()=>t.href),s=Jo(n),r=ir(),i=J(()=>{const l=n();if(l===void 0)return[!1,!1];const o=dt(l.split(/[?#]/,1)[0]).toLowerCase(),a=decodeURI(dt(r.pathname).toLowerCase());return[t.end?o===a:a.startsWith(o+"/")||a===o,o===a]});return(()=>{var l=ua();return Ze(l,z(e,{get href(){return s()||t.href},get state(){return JSON.stringify(t.state)},get classList(){return{...t.class&&{[t.class]:!0},[t.inactiveClass]:!i()[0],[t.activeClass]:i()[0],...e.classList}},link:"",get"aria-current"(){return i()[1]?"page":void 0}}),!1,!1),l})()}function da(t){const e=Ce(),n=ir(),{href:s,state:r}=t,i=typeof s=="function"?s({navigate:e,location:n}):s;return e(i,{replace:!0,state:r}),null}const Ps=Symbol("store-raw"),Ot=Symbol("store-node"),We=Symbol("store-has"),Ni=Symbol("store-self");function Pi(t){let e=t[Re];if(!e&&(Object.defineProperty(t,Re,{value:e=new Proxy(t,ga)}),!Array.isArray(t))){const n=Object.keys(t),s=Object.getOwnPropertyDescriptors(t);for(let r=0,i=n.length;r<i;r++){const l=n[r];s[l].get&&Object.defineProperty(t,l,{enumerable:s[l].enumerable,get:s[l].get.bind(e)})}}return e}function rt(t){let e;return t!=null&&typeof t=="object"&&(t[Re]||!(e=Object.getPrototypeOf(t))||e===Object.prototype||Array.isArray(t))}function Nt(t,e=new Set){let n,s,r,i;if(n=t!=null&&t[Ps])return n;if(!rt(t)||e.has(t))return t;if(Array.isArray(t)){Object.isFrozen(t)?t=t.slice(0):e.add(t);for(let l=0,o=t.length;l<o;l++)r=t[l],(s=Nt(r,e))!==r&&(t[l]=s)}else{Object.isFrozen(t)?t=Object.assign({},t):e.add(t);const l=Object.keys(t),o=Object.getOwnPropertyDescriptors(t);for(let a=0,c=l.length;a<c;a++)i=l[a],!o[i].get&&(r=t[i],(s=Nt(r,e))!==r&&(t[i]=s))}return t}function Mn(t,e){let n=t[e];return n||Object.defineProperty(t,e,{value:n=Object.create(null)}),n}function Kt(t,e,n){if(t[e])return t[e];const[s,r]=P(n,{equals:!1,internal:!0});return s.$=r,t[e]=s}function fa(t,e){const n=Reflect.getOwnPropertyDescriptor(t,e);return!n||n.get||!n.configurable||e===Re||e===Ot||(delete n.value,delete n.writable,n.get=()=>t[Re][e]),n}function Mi(t){Rs()&&Kt(Mn(t,Ot),Ni)()}function ha(t){return Mi(t),Reflect.ownKeys(t)}const ga={get(t,e,n){if(e===Ps)return t;if(e===Re)return n;if(e===Os)return Mi(t),n;const s=Mn(t,Ot),r=s[e];let i=r?r():t[e];if(e===Ot||e===We||e==="__proto__")return i;if(!r){const l=Object.getOwnPropertyDescriptor(t,e);Rs()&&(typeof i!="function"||t.hasOwnProperty(e))&&!(l&&l.get)&&(i=Kt(s,e,i)())}return rt(i)?Pi(i):i},has(t,e){return e===Ps||e===Re||e===Os||e===Ot||e===We||e==="__proto__"?!0:(Rs()&&Kt(Mn(t,We),e)(),e in t)},set(){return console.warn("Cannot mutate a Store directly"),!0},deleteProperty(){return console.warn("Cannot mutate a Store directly"),!0},ownKeys:ha,getOwnPropertyDescriptor:fa};function Se(t,e,n,s=!1){if(!s&&t[e]===n)return;const r=t[e],i=t.length;n===void 0?(delete t[e],t[We]&&t[We][e]&&r!==void 0&&t[We][e].$()):(t[e]=n,t[We]&&t[We][e]&&r===void 0&&t[We][e].$());let l=Mn(t,Ot),o;if((o=Kt(l,e,r))&&o.$(()=>n),Array.isArray(t)&&t.length!==i){for(let a=t.length;a<i;a++)(o=l[a])&&o.$();(o=Kt(l,"length",i))&&o.$(t.length)}(o=l[Ni])&&o.$()}function Ui(t,e){const n=Object.keys(e);for(let s=0;s<n.length;s+=1){const r=n[s];Se(t,r,e[r])}}function ma(t,e){if(typeof e=="function"&&(e=e(t)),e=Nt(e),Array.isArray(e)){if(t===e)return;let n=0,s=e.length;for(;n<s;n++){const r=e[n];t[n]!==r&&Se(t,n,r)}Se(t,"length",s)}else Ui(t,e)}function Wt(t,e,n=[]){let s,r=t;if(e.length>1){s=e.shift();const l=typeof s,o=Array.isArray(t);if(Array.isArray(s)){for(let a=0;a<s.length;a++)Wt(t,[s[a]].concat(e),n);return}else if(o&&l==="function"){for(let a=0;a<t.length;a++)s(t[a],a)&&Wt(t,[a].concat(e),n);return}else if(o&&l==="object"){const{from:a=0,to:c=t.length-1,by:u=1}=s;for(let d=a;d<=c;d+=u)Wt(t,[d].concat(e),n);return}else if(e.length>1){Wt(t[s],e,[s].concat(n));return}r=t[s],n=[s].concat(n)}let i=e[0];typeof i=="function"&&(i=i(r,n),i===r)||s===void 0&&i==null||(i=Nt(i),s===void 0||rt(r)&&rt(i)&&!Array.isArray(i)?Ui(r,i):Se(t,s,i))}function pa(...[t,e]){const n=Nt(t||{}),s=Array.isArray(n);if(typeof n!="object"&&typeof n!="function")throw new Error(`Unexpected type ${typeof n} received when initializing 'createStore'. Expected an object.`);const r=Pi(n);mo.registerGraph({value:n,name:e&&e.name});function i(...l){wi(()=>{s&&l.length===1?ma(n,l[0]):Wt(n,l)})}return[r,i]}const Ms=Symbol("store-root");function Ct(t,e,n,s,r){const i=e[n];if(t===i)return;const l=Array.isArray(t);if(n!==Ms&&(!rt(t)||!rt(i)||l!==Array.isArray(i)||r&&t[r]!==i[r])){Se(e,n,t);return}if(l){if(t.length&&i.length&&(!s||r&&t[0]&&t[0][r]!=null)){let c,u,d,f,h,g,p,y;for(d=0,f=Math.min(i.length,t.length);d<f&&(i[d]===t[d]||r&&i[d]&&t[d]&&i[d][r]&&i[d][r]===t[d][r]);d++)Ct(t[d],i,d,s,r);const O=new Array(t.length),C=new Map;for(f=i.length-1,h=t.length-1;f>=d&&h>=d&&(i[f]===t[h]||r&&i[f]&&t[h]&&i[f][r]&&i[f][r]===t[h][r]);f--,h--)O[h]=i[f];if(d>h||d>f){for(u=d;u<=h;u++)Se(i,u,t[u]);for(;u<t.length;u++)Se(i,u,O[u]),Ct(t[u],i,u,s,r);i.length>t.length&&Se(i,"length",t.length);return}for(p=new Array(h+1),u=h;u>=d;u--)g=t[u],y=r&&g?g[r]:g,c=C.get(y),p[u]=c===void 0?-1:c,C.set(y,u);for(c=d;c<=f;c++)g=i[c],y=r&&g?g[r]:g,u=C.get(y),u!==void 0&&u!==-1&&(O[u]=i[c],u=p[u],C.set(y,u));for(u=d;u<t.length;u++)u in O?(Se(i,u,O[u]),Ct(t[u],i,u,s,r)):Se(i,u,t[u])}else for(let c=0,u=t.length;c<u;c++)Ct(t[c],i,c,s,r);i.length>t.length&&Se(i,"length",t.length);return}const o=Object.keys(t);for(let c=0,u=o.length;c<u;c++)Ct(t[o[c]],i,o[c],s,r);const a=Object.keys(i);for(let c=0,u=a.length;c<u;c++)t[a[c]]===void 0&&Se(i,a[c],void 0)}function wa(t,e={}){const{merge:n,key:s="id"}=e,r=Nt(t);return i=>{if(!rt(i)||!rt(r))return r;const l=Ct(r,{[Ms]:i},Ms,n,s);return l===void 0?i:l}}var ba=A('<div class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm"><h3 class="text-lg font-semibold text-gray-900 mb-4">Create New Project</h3><div class=space-y-4><div><label class="block text-sm font-semibold text-gray-700 mb-2">Project Name</label><input type=text placeholder="e.g., Sleep Study Meta-Analysis"class="w-full border border-gray-300 rounded-lg px-3 py-2 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"></div><div><label class="block text-sm font-semibold text-gray-700 mb-2">Description (Optional)</label><textarea placeholder="Brief description of your research project..."rows=3 class="w-full border border-gray-300 rounded-lg px-3 py-2 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"></textarea></div></div><div class="flex gap-3 mt-6"><button class="inline-flex items-center px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-all duration-200 shadow-md"></button><button class="px-4 py-2 bg-white text-gray-700 font-medium rounded-lg border border-gray-300 hover:border-blue-300 hover:text-blue-600 transition-colors">Cancel'),ya=A('<div class=space-y-6><div class="flex justify-between items-center"><div><h1 class="text-2xl font-bold text-gray-900">My Projects</h1><p class="text-gray-500 mt-1">Manage your research projects and AMSTAR2 checklists</p></div><button class="inline-flex items-center px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transform hover:scale-[1.02] transition-all duration-200 shadow-md hover:shadow-lg gap-2"><span class=text-lg>+</span>New Project</button></div><div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3">'),va=A('<div class="col-span-full text-center py-8"><div class=text-gray-500>Loading projects...'),_a=A('<div class="col-span-full text-center py-12 bg-white rounded-lg border-2 border-dashed border-gray-300"><div class="text-gray-500 mb-4">No projects yet</div><button class="text-blue-600 hover:text-blue-700 font-medium">Create your first project'),Sa=A('<p class="text-gray-500 text-sm line-clamp-3">'),xa=A('<div class="bg-white border border-gray-200 rounded-lg shadow-sm p-6 hover:shadow-md hover:border-gray-300 transition-all duration-200 group"><div class=mb-4><h3 class="text-lg font-semibold text-gray-900 mb-2"></h3></div><div class="flex items-center justify-between text-xs text-gray-500 mb-4"><span class="inline-flex items-center px-2 py-1 rounded-full font-medium bg-blue-100 text-blue-800 capitalize"></span><span></span></div><button class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg transition-colors font-medium">Open Project');function ka({apiBase:t,userId:e}){const n=Ce(),[s,r]=P(!1),[i,l]=P(""),[o,a]=P(""),[c,u]=P(!1),[d,{mutate:f,refetch:h}]=eo(async()=>{try{const y=await fetch(`${t}/api/users/${e}/projects`,{credentials:"include",headers:{"Content-Type":"application/json"}});if(!y.ok)throw new Error("Failed to fetch projects");return await y.json()}catch(y){return console.error("Error fetching projects:",y),[]}}),g=async()=>{if(i().trim()){u(!0);try{const y=await fetch(`${t}/api/projects`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i().trim(),description:o().trim()})});if(!y.ok)throw new Error("Failed to create project");const O=await y.json();f(C=>[...C||[],O]),l(""),a(""),r(!1)}catch(y){console.error("Error creating project:",y),alert("Failed to create project. Please try again.")}finally{u(!1)}}},p=y=>{n(`/projects/${y}`)};return(()=>{var y=ya(),O=y.firstChild,C=O.firstChild,E=C.nextSibling,v=O.nextSibling;return E.$$click=()=>r(!s()),w(y,m(F,{get when(){return s()},get children(){var L=ba(),k=L.firstChild,N=k.nextSibling,x=N.firstChild,_=x.firstChild,b=_.nextSibling,S=x.nextSibling,D=S.firstChild,T=D.nextSibling,$=N.nextSibling,R=$.firstChild,M=R.nextSibling;return b.$$input=q=>l(q.target.value),T.$$input=q=>a(q.target.value),R.$$click=g,w(R,()=>c()?"Creating...":"Create Project"),M.$$click=()=>r(!1),U(()=>R.disabled=c()||!i().trim()),U(()=>b.value=i()),U(()=>T.value=o()),L}}),v),w(v,m(F,{get when(){return!d.loading},get fallback(){return va()},get children(){return m(F,{get when(){return ae(()=>!!d())()&&d().length>0},get fallback(){return(()=>{var L=_a(),k=L.firstChild,N=k.nextSibling;return N.$$click=()=>r(!0),L})()},get children(){return m(Me,{get each(){return d()},children:L=>(()=>{var k=xa(),N=k.firstChild,x=N.firstChild,_=N.nextSibling,b=_.firstChild,S=b.nextSibling,D=_.nextSibling;return w(x,()=>L.name),w(N,m(F,{get when(){return L.description},get children(){var T=Sa();return w(T,()=>L.description),T}}),null),w(b,()=>L.role),w(S,()=>new Date(L.createdAt*1e3).toLocaleDateString()),D.$$click=()=>p(L.id),k})()})}})}})),y})()}ge(["click","input"]);function Ca(t){return t.charAt(0).toUpperCase()+t.slice(1)}var $a={},Tr={};const kn=Object.create(null),Bt=t=>$a||globalThis.Deno?.env.toObject()||globalThis.__env__||(t?kn:globalThis),xe=new Proxy(kn,{get(t,e){return Bt()[e]??kn[e]},has(t,e){return e in Bt()||e in kn},set(t,e,n){const s=Bt(!0);return s[e]=n,!0},deleteProperty(t,e){if(!e)return!1;const n=Bt(!0);return delete n[e],!0},ownKeys(){const t=Bt(!0);return Object.keys(t)}});function X(t,e){return typeof process<"u"&&Tr?Tr[t]??e:typeof Deno<"u"?Deno.env.get(t)??e:typeof Bun<"u"?Bun.env[t]??e:e}const Vt=1,ne=4,Le=8,ye=24,Dr={eterm:ne,cons25:ne,console:ne,cygwin:ne,dtterm:ne,gnome:ne,hurd:ne,jfbterm:ne,konsole:ne,kterm:ne,mlterm:ne,mosh:ye,putty:ne,st:ne,"rxvt-unicode-24bit":ye,terminator:ye,"xterm-kitty":ye},Ea=new Map(Object.entries({APPVEYOR:Le,BUILDKITE:Le,CIRCLECI:ye,DRONE:Le,GITEA_ACTIONS:ye,GITHUB_ACTIONS:ye,GITLAB_CI:Le,TRAVIS:Le})),Aa=[/ansi/,/color/,/linux/,/direct/,/^con[0-9]*x[0-9]/,/^rxvt/,/^screen/,/^xterm/,/^vt100/,/^vt220/];function Oa(){if(X("FORCE_COLOR")!==void 0)switch(X("FORCE_COLOR")){case"":case"1":case"true":return ne;case"2":return Le;case"3":return ye;default:return Vt}if(X("NODE_DISABLE_COLORS")!==void 0&&X("NODE_DISABLE_COLORS")!==""||X("NO_COLOR")!==void 0&&X("NO_COLOR")!==""||X("TERM")==="dumb")return Vt;if(X("TMUX"))return ye;if("TF_BUILD"in xe&&"AGENT_NAME"in xe)return ne;if("CI"in xe){for(const{0:t,1:e}of Ea)if(t in xe)return e;return X("CI_NAME")==="codeship"?Le:Vt}if("TEAMCITY_VERSION"in xe)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.exec(X("TEAMCITY_VERSION"))!==null?ne:Vt;switch(X("TERM_PROGRAM")){case"iTerm.app":return!X("TERM_PROGRAM_VERSION")||/^[0-2]\./.exec(X("TERM_PROGRAM_VERSION"))!==null?Le:ye;case"HyperTerm":case"MacTerm":return ye;case"Apple_Terminal":return Le}if(X("COLORTERM")==="truecolor"||X("COLORTERM")==="24bit")return ye;if(X("TERM")){if(/truecolor/.exec(X("TERM"))!==null)return ye;if(/^xterm-256/.exec(X("TERM"))!==null)return Le;const t=X("TERM").toLowerCase();if(Dr[t])return Dr[t];if(Aa.some(e=>e.exec(t)!==null))return ne}return X("COLORTERM")?ne:Vt}const Ne={reset:"\x1B[0m",bright:"\x1B[1m",dim:"\x1B[2m",fg:{red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m"}},Us=["info","success","warn","error","debug"];function Ra(t,e){return Us.indexOf(e)<=Us.indexOf(t)}const Ta={info:Ne.fg.blue,success:Ne.fg.green,warn:Ne.fg.yellow,error:Ne.fg.red,debug:Ne.fg.magenta},Da=(t,e,n)=>{const s=new Date().toISOString();return n?`${Ne.dim}${s}${Ne.reset} ${Ta[t]}${t.toUpperCase()}${Ne.reset} ${Ne.bright}[Better Auth]:${Ne.reset} ${e}`:`${s} ${t.toUpperCase()} [Better Auth]: ${e}`},La=t=>{const e="error",n=Oa()!==1,s=(r,i,l=[])=>{if(!Ra(e,r))return;const o=Da(r,i,n);{r==="error"?console.error(o,...l):r==="warn"?console.warn(o,...l):console.log(o,...l);return}};return{...Object.fromEntries(Us.map(r=>[r,(...[i,...l])=>s(r,i,l)])),get level(){return e}}};La();var Cn=class extends Error{constructor(t,e){super(t),this.name="BetterAuthError",this.message=t,this.cause=e,this.stack=""}};function Na(t){try{return(new URL(t).pathname.replace(/\/+$/,"")||"/")!=="/"}catch{throw new Cn(`Invalid base URL: ${t}. Please provide a valid base URL.`)}}function Pa(t){try{const e=new URL(t);if(e.protocol!=="http:"&&e.protocol!=="https:")throw new Cn(`Invalid base URL: ${t}. URL must include 'http://' or 'https://'`)}catch(e){throw e instanceof Cn?e:new Cn(`Invalid base URL: ${t}. Please provide a valid base URL.`,String(e))}}function us(t,e="/api/auth"){if(Pa(t),Na(t))return t;const n=t.replace(/\/+$/,"");return!e||e==="/"?n:(e=e.startsWith("/")?e:`/${e}`,`${n}${e}`)}function Ma(t,e,n,s){if(t)return us(t,e);{const r=xe.BETTER_AUTH_URL||xe.NEXT_PUBLIC_BETTER_AUTH_URL||xe.PUBLIC_BETTER_AUTH_URL||xe.NUXT_PUBLIC_BETTER_AUTH_URL||xe.NUXT_PUBLIC_AUTH_URL||(xe.BASE_URL!=="/"?xe.BASE_URL:void 0);if(r)return us(r,e)}if(typeof window<"u"&&window.location)return us(window.location.origin,e)}const Ua={proto:/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,constructor:/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,protoShort:/"__proto__"\s*:/,constructorShort:/"constructor"\s*:/},Ia=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/,Lr={true:!0,false:!1,null:null,undefined:void 0,nan:NaN,infinity:Number.POSITIVE_INFINITY,"-infinity":Number.NEGATIVE_INFINITY},ja=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,7}))?(?:Z|([+-])(\d{2}):(\d{2}))$/;function qa(t){return t instanceof Date&&!isNaN(t.getTime())}function Fa(t){const e=ja.exec(t);if(!e)return null;const[,n,s,r,i,l,o,a,c,u,d]=e;let f=new Date(Date.UTC(parseInt(n,10),parseInt(s,10)-1,parseInt(r,10),parseInt(i,10),parseInt(l,10),parseInt(o,10),a?parseInt(a.padEnd(3,"0"),10):0));if(c){const h=(parseInt(u,10)*60+parseInt(d,10))*(c==="+"?-1:1);f.setUTCMinutes(f.getUTCMinutes()+h)}return qa(f)?f:null}function Ba(t,e={}){const{strict:n=!1,warnings:s=!1,reviver:r,parseDates:i=!0}=e;if(typeof t!="string")return t;const l=t.trim();if(l.length>0&&l[0]==='"'&&l.endsWith('"')&&!l.slice(1,-1).includes('"'))return l.slice(1,-1);const o=l.toLowerCase();if(o.length<=9&&o in Lr)return Lr[o];if(!Ia.test(l)){if(n)throw new SyntaxError("[better-json] Invalid JSON");return t}if(Object.entries(Ua).some(([a,c])=>{const u=c.test(l);return u&&s&&console.warn(`[better-json] Detected potential prototype pollution attempt using ${a} pattern`),u})&&n)throw new Error("[better-json] Potential prototype pollution attempt detected");try{return JSON.parse(l,(c,u)=>{if(c==="__proto__"||c==="constructor"&&u&&typeof u=="object"&&"prototype"in u){s&&console.warn(`[better-json] Dropping "${c}" key to prevent prototype pollution`);return}if(i&&typeof u=="string"){const d=Fa(u);if(d)return d}return r?r(c,u):u})}catch(a){if(n)throw a;return t}}function Va(t,e={strict:!0}){return Ba(t,e)}let Is=Symbol("clean"),$e=[],Ke=0;const mn=4,Ii=t=>{let e=[],n={get(){return n.lc||n.listen(()=>{})(),n.value},lc:0,listen(s){return n.lc=e.push(s),()=>{for(let i=Ke+mn;i<$e.length;)$e[i]===s?$e.splice(i,mn):i+=mn;let r=e.indexOf(s);~r&&(e.splice(r,1),--n.lc||n.off())}},notify(s,r){let i=!$e.length;for(let l of e)$e.push(l,n.value,s,r);if(i){for(Ke=0;Ke<$e.length;Ke+=mn)$e[Ke]($e[Ke+1],$e[Ke+2],$e[Ke+3]);$e.length=0}},off(){},set(s){let r=n.value;r!==s&&(n.value=s,n.notify(r))},subscribe(s){let r=n.listen(s);return s(n.value),r},value:t};return n[Is]=()=>{e=[],n.lc=0,n.off()},n},Ya=5,_t=6,pn=10;let Wa=(t,e,n,s)=>(t.events=t.events||{},t.events[n+pn]||(t.events[n+pn]=s(r=>{t.events[n].reduceRight((i,l)=>(l(i),i),{shared:{},...r})})),t.events[n]=t.events[n]||[],t.events[n].push(e),()=>{let r=t.events[n],i=r.indexOf(e);r.splice(i,1),r.length||(delete t.events[n],t.events[n+pn](),delete t.events[n+pn])}),Ja=1e3,ji=(t,e)=>Wa(t,s=>{let r=e(s);r&&t.events[_t].push(r)},Ya,s=>{let r=t.listen;t.listen=(...l)=>(!t.lc&&!t.active&&(t.active=!0,s()),r(...l));let i=t.off;t.events[_t]=[],t.off=()=>{i(),setTimeout(()=>{if(t.active&&!t.lc){t.active=!1;for(let l of t.events[_t])l();t.events[_t]=[]}},Ja)};{let l=t[Is];t[Is]=()=>{for(let o of t.events[_t])o();t.events[_t]=[],t.active=!1,l()}}return()=>{t.listen=r,t.off=i}});var Ha=Object.defineProperty,za=Object.defineProperties,Ga=Object.getOwnPropertyDescriptors,Nr=Object.getOwnPropertySymbols,Qa=Object.prototype.hasOwnProperty,Ka=Object.prototype.propertyIsEnumerable,Pr=(t,e,n)=>e in t?Ha(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ee=(t,e)=>{for(var n in e||(e={}))Qa.call(e,n)&&Pr(t,n,e[n]);if(Nr)for(var n of Nr(e))Ka.call(e,n)&&Pr(t,n,e[n]);return t},De=(t,e)=>za(t,Ga(e)),Xa=class extends Error{constructor(t,e,n){super(e||t.toString(),{cause:n}),this.status=t,this.statusText=e,this.error=n}},Za=async(t,e)=>{var n,s,r,i,l,o;let a=e||{};const c={onRequest:[e?.onRequest],onResponse:[e?.onResponse],onSuccess:[e?.onSuccess],onError:[e?.onError],onRetry:[e?.onRetry]};if(!e||!e?.plugins)return{url:t,options:a,hooks:c};for(const u of e?.plugins||[]){if(u.init){const d=await((n=u.init)==null?void 0:n.call(u,t.toString(),e));a=d.options||a,t=d.url}c.onRequest.push((s=u.hooks)==null?void 0:s.onRequest),c.onResponse.push((r=u.hooks)==null?void 0:r.onResponse),c.onSuccess.push((i=u.hooks)==null?void 0:i.onSuccess),c.onError.push((l=u.hooks)==null?void 0:l.onError),c.onRetry.push((o=u.hooks)==null?void 0:o.onRetry)}return{url:t,options:a,hooks:c}},Mr=class{constructor(t){this.options=t}shouldAttemptRetry(t,e){return this.options.shouldRetry?Promise.resolve(t<this.options.attempts&&this.options.shouldRetry(e)):Promise.resolve(t<this.options.attempts)}getDelay(){return this.options.delay}},ec=class{constructor(t){this.options=t}shouldAttemptRetry(t,e){return this.options.shouldRetry?Promise.resolve(t<this.options.attempts&&this.options.shouldRetry(e)):Promise.resolve(t<this.options.attempts)}getDelay(t){return Math.min(this.options.maxDelay,this.options.baseDelay*2**t)}};function tc(t){if(typeof t=="number")return new Mr({type:"linear",attempts:t,delay:1e3});switch(t.type){case"linear":return new Mr(t);case"exponential":return new ec(t);default:throw new Error("Invalid retry strategy")}}var nc=async t=>{const e={},n=async s=>typeof s=="function"?await s():s;if(t?.auth){if(t.auth.type==="Bearer"){const s=await n(t.auth.token);if(!s)return e;e.authorization=`Bearer ${s}`}else if(t.auth.type==="Basic"){const s=n(t.auth.username),r=n(t.auth.password);if(!s||!r)return e;e.authorization=`Basic ${btoa(`${s}:${r}`)}`}else if(t.auth.type==="Custom"){const s=n(t.auth.value);if(!s)return e;e.authorization=`${n(t.auth.prefix)} ${s}`}}return e},sc=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function rc(t){const e=t.headers.get("content-type"),n=new Set(["image/svg","application/xml","application/xhtml","application/html"]);if(!e)return"json";const s=e.split(";").shift()||"";return sc.test(s)?"json":n.has(s)||s.startsWith("text/")?"text":"blob"}function ic(t){try{return JSON.parse(t),!0}catch{return!1}}function qi(t){if(t===void 0)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}function Ur(t){try{return JSON.parse(t)}catch{return t}}function Ir(t){return typeof t=="function"}function lc(t){if(t?.customFetchImpl)return t.customFetchImpl;if(typeof globalThis<"u"&&Ir(globalThis.fetch))return globalThis.fetch;if(typeof window<"u"&&Ir(window.fetch))return window.fetch;throw new Error("No fetch implementation found")}async function oc(t){const e=new Headers(t?.headers),n=await nc(t);for(const[s,r]of Object.entries(n||{}))e.set(s,r);if(!e.has("content-type")){const s=ac(t?.body);s&&e.set("content-type",s)}return e}function ac(t){return qi(t)?"application/json":null}function cc(t){if(!t?.body)return null;const e=new Headers(t?.headers);if(qi(t.body)&&!e.has("content-type")){for(const[n,s]of Object.entries(t?.body))s instanceof Date&&(t.body[n]=s.toISOString());return JSON.stringify(t.body)}return t.body}function uc(t,e){var n;if(e?.method)return e.method.toUpperCase();if(t.startsWith("@")){const s=(n=t.split("@")[1])==null?void 0:n.split("/")[0];return Bi.includes(s)?s.toUpperCase():e?.body?"POST":"GET"}return e?.body?"POST":"GET"}function dc(t,e){let n;return!t?.signal&&t?.timeout&&(n=setTimeout(()=>e?.abort(),t?.timeout)),{abortTimeout:n,clearTimeout:()=>{n&&clearTimeout(n)}}}var fc=class Fi extends Error{constructor(e,n){super(n||JSON.stringify(e,null,2)),this.issues=e,Object.setPrototypeOf(this,Fi.prototype)}};async function $n(t,e){let n=await t["~standard"].validate(e);if(n.issues)throw new fc(n.issues);return n.value}var Bi=["get","post","put","patch","delete"],hc=t=>({id:"apply-schema",name:"Apply Schema",version:"1.0.0",async init(e,n){var s,r,i,l;const o=((r=(s=t.plugins)==null?void 0:s.find(a=>{var c;return(c=a.schema)!=null&&c.config?e.startsWith(a.schema.config.baseURL||"")||e.startsWith(a.schema.config.prefix||""):!1}))==null?void 0:r.schema)||t.schema;if(o){let a=e;(i=o.config)!=null&&i.prefix&&a.startsWith(o.config.prefix)&&(a=a.replace(o.config.prefix,""),o.config.baseURL&&(e=e.replace(o.config.prefix,o.config.baseURL))),(l=o.config)!=null&&l.baseURL&&a.startsWith(o.config.baseURL)&&(a=a.replace(o.config.baseURL,""));const c=o.schema[a];if(c){let u=De(Ee({},n),{method:c.method,output:c.output});return n?.disableValidation||(u=De(Ee({},u),{body:c.input?await $n(c.input,n?.body):n?.body,params:c.params?await $n(c.params,n?.params):n?.params,query:c.query?await $n(c.query,n?.query):n?.query})),{url:e,options:u}}}return{url:e,options:n}}}),gc=t=>{async function e(n,s){const r=De(Ee(Ee({},t),s),{plugins:[...t?.plugins||[],hc(t||{})]});if(t?.catchAllError)try{return await js(n,r)}catch(i){return{data:null,error:{status:500,statusText:"Fetch Error",message:"Fetch related error. Captured by catchAllError option. See error property for more details.",error:i}}}return await js(n,r)}return e};function mc(t,e){let{baseURL:n,params:s,query:r}=e||{query:{},params:{},baseURL:""},i=t.startsWith("http")?t.split("/").slice(0,3).join("/"):n||"";if(t.startsWith("@")){const d=t.toString().split("@")[1].split("/")[0];Bi.includes(d)&&(t=t.replace(`@${d}/`,"/"))}i.endsWith("/")||(i+="/");let[l,o]=t.replace(i,"").split("?");const a=new URLSearchParams(o);for(const[d,f]of Object.entries(r||{}))f!=null&&a.set(d,String(f));if(s)if(Array.isArray(s)){const d=l.split("/").filter(f=>f.startsWith(":"));for(const[f,h]of d.entries()){const g=s[f];l=l.replace(h,g)}}else for(const[d,f]of Object.entries(s))l=l.replace(`:${d}`,String(f));l=l.split("/").map(encodeURIComponent).join("/"),l.startsWith("/")&&(l=l.slice(1));let c=a.toString();return c=c.length>0?`?${c}`.replace(/\+/g,"%20"):"",i.startsWith("http")?new URL(`${l}${c}`,i):`${i}${l}${c}`}var js=async(t,e)=>{var n,s,r,i,l,o,a,c;const{hooks:u,url:d,options:f}=await Za(t,e),h=lc(f),g=new AbortController,p=(n=f.signal)!=null?n:g.signal,y=mc(d,f),O=cc(f),C=await oc(f),E=uc(d,f);let v=De(Ee({},f),{url:y,headers:C,body:O,method:E,signal:p});for(const T of u.onRequest)if(T){const $=await T(v);$ instanceof Object&&(v=$)}("pipeTo"in v&&typeof v.pipeTo=="function"||typeof((s=e?.body)==null?void 0:s.pipe)=="function")&&("duplex"in v||(v.duplex="half"));const{clearTimeout:L}=dc(f,g);let k=await h(v.url,v);L();const N={response:k,request:v};for(const T of u.onResponse)if(T){const $=await T(De(Ee({},N),{response:(r=e?.hookOptions)!=null&&r.cloneResponse?k.clone():k}));$ instanceof Response?k=$:$ instanceof Object&&(k=$.response)}if(k.ok){if(!(v.method!=="HEAD"))return{data:"",error:null};const $=rc(k),R={data:"",response:k,request:v};if($==="json"||$==="text"){const M=await k.text(),I=await((i=v.jsonParser)!=null?i:Ur)(M);R.data=I}else R.data=await k[$]();v?.output&&v.output&&!v.disableValidation&&(R.data=await $n(v.output,R.data));for(const M of u.onSuccess)M&&await M(De(Ee({},R),{response:(l=e?.hookOptions)!=null&&l.cloneResponse?k.clone():k}));return e?.throw?R.data:{data:R.data,error:null}}const x=(o=e?.jsonParser)!=null?o:Ur,_=await k.text(),b=ic(_),S=b?await x(_):null,D={response:k,responseText:_,request:v,error:De(Ee({},S),{status:k.status,statusText:k.statusText})};for(const T of u.onError)T&&await T(De(Ee({},D),{response:(a=e?.hookOptions)!=null&&a.cloneResponse?k.clone():k}));if(e?.retry){const T=tc(e.retry),$=(c=e.retryAttempt)!=null?c:0;if(await T.shouldAttemptRetry($,k)){for(const M of u.onRetry)M&&await M(N);const R=T.getDelay($);return await new Promise(M=>setTimeout(M,R)),await js(t,De(Ee({},e),{retryAttempt:$+1}))}}if(e?.throw)throw new Xa(k.status,k.statusText,b?S:_);return{data:null,error:De(Ee({},S),{status:k.status,statusText:k.statusText})}};const ds=Symbol.for("better-auth:broadcast-channel"),pc=()=>Math.floor(Date.now()/1e3);var wc=class{listeners=new Set;name;constructor(t="better-auth.message"){this.name=t}subscribe(t){return this.listeners.add(t),()=>{this.listeners.delete(t)}}post(t){if(!(typeof window>"u"))try{localStorage.setItem(this.name,JSON.stringify({...t,timestamp:pc()}))}catch{}}setup(){if(typeof window>"u"||typeof window.addEventListener>"u")return()=>{};const t=e=>{if(e.key!==this.name)return;const n=JSON.parse(e.newValue??"{}");n?.event!=="session"||!n?.data||this.listeners.forEach(s=>s(n))};return window.addEventListener("storage",t),()=>{window.removeEventListener("storage",t)}}};function fs(t="better-auth.message"){return globalThis[ds]||(globalThis[ds]=new wc(t)),globalThis[ds]}const hs=Symbol.for("better-auth:focus-manager");var bc=class{listeners=new Set;subscribe(t){return this.listeners.add(t),()=>{this.listeners.delete(t)}}setFocused(t){this.listeners.forEach(e=>e(t))}setup(){if(typeof window>"u"||typeof document>"u"||typeof window.addEventListener>"u")return()=>{};const t=()=>this.setFocused(!0),e=()=>{document.visibilityState==="visible"&&this.setFocused(!0)};return window.addEventListener("focus",t,!1),document.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("focus",t,!1),document.removeEventListener("visibilitychange",e,!1)}}};function jr(){return globalThis[hs]||(globalThis[hs]=new bc),globalThis[hs]}const gs=Symbol.for("better-auth:online-manager");var yc=class{listeners=new Set;isOnline=typeof navigator<"u"?navigator.onLine:!0;subscribe(t){return this.listeners.add(t),()=>{this.listeners.delete(t)}}setOnline(t){this.isOnline=t,this.listeners.forEach(e=>e(t))}setup(){if(typeof window>"u"||typeof window.addEventListener>"u")return()=>{};const t=()=>this.setOnline(!0),e=()=>this.setOnline(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",e,!1),()=>{window.removeEventListener("online",t,!1),window.removeEventListener("offline",e,!1)}}};function ms(){return globalThis[gs]||(globalThis[gs]=new yc),globalThis[gs]}const vc=()=>typeof window>"u",_c=(t,e,n,s)=>{const r=Ii({data:null,error:null,isPending:!0,isRefetching:!1,refetch:o=>i(o)}),i=async o=>new Promise(a=>{const c=typeof s=="function"?s({data:r.get().data,error:r.get().error,isPending:r.get().isPending}):s;n(e,{...c,query:{...c?.query,...o?.query},async onSuccess(u){r.set({data:u.data,error:null,isPending:!1,isRefetching:!1,refetch:r.value.refetch}),await c?.onSuccess?.(u)},async onError(u){const{request:d}=u,f=typeof d.retry=="number"?d.retry:d.retry?.attempts,h=d.retryAttempt||0;f&&h<f||(r.set({error:u.error,data:null,isPending:!1,isRefetching:!1,refetch:r.value.refetch}),await c?.onError?.(u))},async onRequest(u){const d=r.get();r.set({isPending:d.data===null,data:d.data,error:null,isRefetching:!0,refetch:r.value.refetch}),await c?.onRequest?.(u)}}).catch(u=>{r.set({error:u,data:null,isPending:!1,isRefetching:!1,refetch:r.value.refetch})}).finally(()=>{a(void 0)})});t=Array.isArray(t)?t:[t];let l=!1;for(const o of t)o.subscribe(async()=>{vc()||(l?await i():ji(r,()=>{const a=setTimeout(async()=>{l||(await i(),l=!0)},0);return()=>{r.off(),o.off(),clearTimeout(a)}}))});return r},St=()=>Math.floor(Date.now()/1e3),Sc=5;function xc(t){const{sessionAtom:e,sessionSignal:n,$fetch:s,options:r={}}=t,i=r.sessionOptions?.refetchInterval??0,l=r.sessionOptions?.refetchOnWindowFocus??!0,o=r.sessionOptions?.refetchWhenOffline??!1,a={lastSync:0,lastSessionRequest:0,cachedSession:void 0},c=()=>o||ms().isOnline,u=C=>{if(!c())return;if(C?.event==="storage"){a.lastSync=St(),n.set(!n.get());return}const E=e.get();if(C?.event==="poll"){a.lastSessionRequest=St(),s("/get-session").then(v=>{e.set({...E,data:v.data,error:v.error||null}),a.lastSync=St(),n.set(!n.get())}).catch(()=>{});return}C?.event==="visibilitychange"&&St()-a.lastSessionRequest<Sc&&E?.data!==null&&E?.data!==void 0||(E?.data===null||E?.data===void 0||C?.event==="visibilitychange")&&(C?.event==="visibilitychange"&&(a.lastSessionRequest=St()),a.lastSync=St(),n.set(!n.get()))},d=C=>{fs().post({event:"session",data:{trigger:C},clientId:Math.random().toString(36).substring(7)})},f=()=>{i&&i>0&&(a.pollInterval=setInterval(()=>{e.get()?.data&&u({event:"poll"})},i*1e3))},h=()=>{a.unsubscribeBroadcast=fs().subscribe(()=>{u({event:"storage"})})},g=()=>{l&&(a.unsubscribeFocus=jr().subscribe(()=>{u({event:"visibilitychange"})}))},p=()=>{a.unsubscribeOnline=ms().subscribe(C=>{C&&u({event:"visibilitychange"})})};return{init:()=>{f(),h(),g(),p(),fs().setup(),jr().setup(),ms().setup()},cleanup:()=>{a.pollInterval&&(clearInterval(a.pollInterval),a.pollInterval=void 0),a.unsubscribeBroadcast&&(a.unsubscribeBroadcast(),a.unsubscribeBroadcast=void 0),a.unsubscribeFocus&&(a.unsubscribeFocus(),a.unsubscribeFocus=void 0),a.unsubscribeOnline&&(a.unsubscribeOnline(),a.unsubscribeOnline=void 0),a.lastSync=0,a.lastSessionRequest=0,a.cachedSession=void 0},triggerRefetch:u,broadcastSessionUpdate:d}}const kc={id:"redirect",name:"Redirect",hooks:{onSuccess(t){if(t.data?.url&&t.data?.redirect&&typeof window<"u"&&window.location&&window.location)try{window.location.href=t.data.url}catch{}}}},Cc={id:"user-agent",name:"UserAgent",hooks:{onRequest(t){t.headers.append("user-agent","better-auth")}}};function $c(t,e){const n=Ii(!1),s=_c(n,"/get-session",t,{method:"GET"});return ji(s,()=>{const r=xc({sessionAtom:s,sessionSignal:n,$fetch:t,options:e});return r.init(),()=>{r.cleanup()}}),{session:s,$sessionSignal:n}}const Ec=(t,e)=>{const n="credentials"in Request.prototype,s=Ma(t?.baseURL,t?.basePath)??"/api/auth",r=t?.plugins?.flatMap(v=>v.fetchPlugins).filter(v=>v!==void 0)||[],i={id:"lifecycle-hooks",name:"lifecycle-hooks",hooks:{onSuccess:t?.fetchOptions?.onSuccess,onError:t?.fetchOptions?.onError,onRequest:t?.fetchOptions?.onRequest,onResponse:t?.fetchOptions?.onResponse}},{onSuccess:l,onError:o,onRequest:a,onResponse:c,...u}=t?.fetchOptions||{},d=gc({baseURL:s,...n?{credentials:"include"}:{},method:"GET",jsonParser(v){return v?Va(v,{strict:!1}):null},customFetchImpl:fetch,...u,plugins:[i,...u.plugins||[],...t?.disableDefaultFetchPlugins?[]:[Cc,kc],...r]}),{$sessionSignal:f,session:h}=$c(d,t),g=t?.plugins||[];let p={},y={$sessionSignal:f,session:h},O={"/sign-out":"POST","/revoke-sessions":"POST","/revoke-other-sessions":"POST","/delete-user":"POST"};const C=[{signal:"$sessionSignal",matcher(v){return v==="/sign-out"||v==="/update-user"||v==="/sign-up/email"||v==="/sign-in/email"||v==="/delete-user"||v==="/verify-email"||v==="/revoke-sessions"||v==="/revoke-session"||v==="/change-email"}}];for(const v of g)v.getAtoms&&Object.assign(y,v.getAtoms?.(d)),v.pathMethods&&Object.assign(O,v.pathMethods),v.atomListeners&&C.push(...v.atomListeners);const E={notify:v=>{y[v].set(!y[v].get())},listen:(v,L)=>{y[v].subscribe(L)},atoms:y};for(const v of g)v.getActions&&Object.assign(p,v.getActions?.(d,E,t));return{get baseURL(){return s},pluginsActions:p,pluginsAtoms:y,pluginPathMethods:O,atomListeners:C,$fetch:d,$store:E}};function Ac(t){return typeof t=="object"&&t!==null&&"get"in t&&typeof t.get=="function"&&"lc"in t&&typeof t.lc=="number"}function Oc(t,e,n){const s=e[t],{fetchOptions:r,query:i,...l}=n||{};return s||(r?.method?r.method:l&&Object.keys(l).length>0?"POST":"GET")}function Rc(t,e,n,s,r){function i(l=[]){return new Proxy(function(){},{get(o,a){if(typeof a!="string"||a==="then"||a==="catch"||a==="finally")return;const c=[...l,a];let u=t;for(const d of c)if(u&&typeof u=="object"&&d in u)u=u[d];else{u=void 0;break}return typeof u=="function"||Ac(u)?u:i(c)},apply:async(o,a,c)=>{const u="/"+l.map(C=>C.replace(/[A-Z]/g,E=>`-${E.toLowerCase()}`)).join("/"),d=c[0]||{},f=c[1]||{},{query:h,fetchOptions:g,...p}=d,y={...f,...g},O=Oc(u,n,d);return await e(u,{...y,body:O==="GET"?void 0:{...p,...y?.body||{}},query:h||y?.query,method:O,async onSuccess(C){if(await y?.onSuccess?.(C),!r||y.disableSignal)return;const E=r.filter(v=>v.matcher(u));if(E.length)for(const v of E){const L=s[v.signal];if(!L)return;const k=L.get();setTimeout(()=>{L.set(!k)},10)}}})}})}return i()}function Tc(t){const e=t.listen(()=>{}),[n,s]=pa({value:t.get()}),r=t.subscribe(i=>{s("value",wa(i))});return _e(()=>r()),e(),()=>n.value}function Dc(t){return`use${Ca(t)}`}function Lc(t){const{pluginPathMethods:e,pluginsActions:n,pluginsAtoms:s,$fetch:r,atomListeners:i}=Ec(t);let l={};for(const[o,a]of Object.entries(s))l[Dc(o)]=()=>Tc(a);return Rc({...n,...l},r,e,s,i)}const Xe=Lc({baseURL:"https://www.corates.org",fetchOptions:{credentials:"include",onError(t){console.error("Auth error:",t),t.error.status===429?console.error("Too many requests. Please try again later."):t.error.status===401&&console.error("Unauthorized")},onSuccess(t){}}}),{signIn:dm,signUp:fm,signOut:hm,useSession:Nc,getSession:gm,updateUser:mm,changePassword:pm,resetPassword:wm,forgetPassword:bm,verifyEmail:ym}=Xe;function Pc(){const[t,e]=P(navigator.onLine);return de(()=>{function n(){e(!0)}function s(){e(!1)}window.addEventListener("online",n),window.addEventListener("offline",s),_e(()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)})}),t}function Mc(){const t=Pc(),e=Nc(),n=()=>!!e().data?.user,s=()=>!!e().data?.user,r=()=>e().data?.user||null,i=()=>e().isPending,[l,o]=P(null);de(()=>{t()&&o(null)}),de(()=>{const k=()=>{document.visibilityState==="visible"&&!i()&&t()&&e().refetch?.()};return document.addEventListener("visibilitychange",k),()=>{document.removeEventListener("visibilitychange",k)}});async function a(k,N,x){try{o(null);const{data:_,error:b}=await Xe.signUp.email({email:k,password:N,name:x});if(b)throw new Error(b.message);return localStorage.setItem("pendingEmail",k),_}catch(_){throw o(_.message),_}}async function c(k,N){try{o(null);const{data:x,error:_}=await Xe.signIn.email({email:k,password:N});if(_)throw new Error(_.message);return localStorage.removeItem("pendingEmail"),x}catch(x){throw o(x.message),x}}async function u(){try{o(null);const{error:k}=await Xe.signOut();if(k)throw new Error(k.message)}catch(k){throw o(k.message),k}}async function d(k){try{o(null);const{data:N,error:x}=await Xe.updateUser(k);if(x)throw new Error(x.message);return N}catch(N){throw o(N.message),N}}async function f(k,N){try{o(null);const{error:x}=await Xe.changePassword({currentPassword:k,newPassword:N});if(x)throw new Error(x.message)}catch(x){throw o(x.message),x}}async function h(k){try{o(null);const{error:N}=await Xe.forgetPassword({email:k});if(N)throw new Error(N.message)}catch(N){throw o(N.message),N}}async function g(k,N={}){try{const x=await fetch(k,{...N,credentials:"include"});if(!x.ok)throw x.status===401?new Error("Authentication required"):new Error(`Request failed with status ${x.status}`);return x}catch(x){throw x.message.includes("Authentication required")&&o("Session expired. Please sign in again."),x}}function p(){return localStorage.getItem("pendingEmail")}function y(){return null}async function O(){console.warn("Email verification is handled automatically by Better Auth")}async function C(k){try{o(null);const{error:N}=await Xe.sendVerificationEmail?.({email:k});if(N)throw new Error(N.message)}catch{try{if(!(await fetch("/api/auth/send-verification-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:k}),credentials:"include"})).ok)throw new Error("Failed to resend verification email")}catch(x){throw o(x.message||"Failed to resend verification email"),x}}}async function E(k){console.warn("Email verification is handled automatically by Better Auth")}async function v(){return r()}async function L(){try{await e().refetch?.()}catch(k){console.warn("Session refresh failed:",k)}}return{isLoggedIn:n,isAuthenticated:s,user:r,authLoading:i,authError:l,signup:a,signin:c,signout:u,updateProfile:d,changePassword:f,resetPassword:h,resendVerificationEmail:C,authFetch:g,getCurrentUser:v,refreshAccessToken:L,sendEmailVerification:O,verifyEmail:E,getPendingEmail:p,getAccessToken:y,session:e}}const Uc=At(Mc);function bt(){return Uc}var Ic=A('<div class=min-h-screen><main class=p-6><div class="max-w-6xl mx-auto">'),jc=A('<div class="text-center py-8"><div class=text-gray-500>Loading user data...');function qc(){const{user:t,authLoading:e,isLoggedIn:n}=bt(),s="https://www.corates.org";return(()=>{var r=Ic(),i=r.firstChild,l=i.firstChild;return w(l,m(F,{get when(){return ae(()=>!!(!e()&&n()))()&&t()},get fallback(){return jc()},get children(){return m(ka,{apiBase:s,get userId(){return t().id}})}})),r})()}var Fc=A("<div>");function et(t){const[e,n]=P(!1),[s,r]=P(!1);let i=null,l=null;const o=()=>t.duration??300,a=()=>t.timingFunction??"ease-in-out",c=()=>t.when;return de(()=>{c()?(clearTimeout(l),r(!0),requestAnimationFrame(()=>{n(!0)})):(n(!1),clearTimeout(l),l=setTimeout(()=>{r(!1)},o()))}),_e(()=>{clearTimeout(l)}),m(F,{get when(){return s()},get fallback(){return t.fallback},get children(){var u=Fc(),d=i;return typeof d=="function"?nr(d,u):i=u,w(u,()=>t.children),U(f=>{var h=e()?1:0,g=`opacity ${o()}ms ${a()}`,p=t.ariaLive||"polite",y=t.role||"alert",O=t.class||"";return h!==f.e&&$r(u,"opacity",f.e=h),g!==f.t&&$r(u,"transition",f.t=g),p!==f.a&&st(u,"aria-live",f.a=p),y!==f.o&&st(u,"role",f.o=y),O!==f.i&&ht(u,f.i=O),f},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),u}})}var Jt=(t,e=[])=>({parts:(...n)=>{if(Bc(e))return Jt(t,n);throw new Error("createAnatomy().parts(...) should only be called once. Did you mean to use .extendWith(...) ?")},extendWith:(...n)=>Jt(t,[...e,...n]),omit:(...n)=>Jt(t,e.filter(s=>!n.includes(s))),rename:n=>Jt(n,e),keys:()=>e,build:()=>[...new Set(e)].reduce((n,s)=>Object.assign(n,{[s]:{selector:[`&[data-scope="${xt(t)}"][data-part="${xt(s)}"]`,`& [data-scope="${xt(t)}"][data-part="${xt(s)}"]`].join(", "),attrs:{"data-scope":xt(t),"data-part":xt(s)}}}),{})}),xt=t=>t.replace(/([A-Z])([A-Z])/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase(),Bc=t=>t.length===0,Vi=t=>typeof t=="object"&&t!==null,te=t=>t?"":void 0,Vc=t=>t?"true":void 0,Yc=9,Wc=t=>Vi(t)&&t.nodeType===Yc,Jc=t=>Vi(t)&&t===t.window;function Hc(t){if(!t)return!1;const e=t.getRootNode();return Yi(e)===t}function zc(t){return Wc(t)?t:Jc(t)?t.document:t?.ownerDocument??document}function Yi(t){let e=t.activeElement;for(;e?.shadowRoot;){const n=e.shadowRoot.activeElement;if(!n||n===e)break;e=n}return e}var Gc=t=>t.button===0;function Qc(t){return t==null?[]:Array.isArray(t)?t:[t]}var qr=t=>t?.constructor.name==="Array",Kc=(t,e)=>{if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!or(t[n],e[n]))return!1;return!0},or=(t,e)=>{if(Object.is(t,e))return!0;if(t==null&&e!=null||t!=null&&e==null)return!1;if(typeof t?.isEqual=="function"&&typeof e?.isEqual=="function")return t.isEqual(e);if(typeof t=="function"&&typeof e=="function")return t.toString()===e.toString();if(qr(t)&&qr(e))return Kc(Array.from(t),Array.from(e));if(typeof t!="object"||typeof e!="object")return!1;const n=Object.keys(e??Object.create(null)),s=n.length;for(let r=0;r<s;r++)if(!Reflect.has(t,n[r]))return!1;for(let r=0;r<s;r++){const i=n[r];if(!or(t[i],e[i]))return!1}return!0},Xc=t=>Array.isArray(t),Wi=t=>t!=null&&typeof t=="object",Zc=t=>Wi(t)&&!Xc(t),eu=t=>typeof t=="number"&&!Number.isNaN(t),ar=t=>typeof t=="string",tt=t=>typeof t=="function",tu=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),nu=t=>Object.prototype.toString.call(t),Ji=Function.prototype.toString,su=Ji.call(Object),ru=t=>{if(!Wi(t)||nu(t)!="[object Object]"||ou(t))return!1;const e=Object.getPrototypeOf(t);if(e===null)return!0;const n=tu(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Ji.call(n)==su},iu=t=>typeof t=="object"&&t!==null&&"$$typeof"in t&&"props"in t,lu=t=>typeof t=="object"&&t!==null&&"__v_isVNode"in t,ou=t=>iu(t)||lu(t),au=(()=>{let t=0;return()=>(t++,t.toString(36))})();function Hi(t){if(!ru(t)||t===void 0)return t;const e=Reflect.ownKeys(t).filter(s=>typeof s=="string"),n={};for(const s of e){const r=t[s];r!==void 0&&(n[s]=Hi(r))}return n}function Fr(...t){const e=t.length===1?t[0]:t[1];(t.length===2?t[0]:!0)&&console.warn(e)}function cu(t,e){if(t==null)throw new Error(e())}var $t=(t=>(t.NotStarted="Not Started",t.Started="Started",t.Stopped="Stopped",t))($t||{}),ps="__init__";function uu(t){const e=()=>t.getRootNode?.()??document,n=()=>zc(e());return{...t,getRootNode:e,getDoc:n,getWin:()=>n().defaultView??window,getActiveElement:()=>Yi(e()),isActiveElement:Hc,getById:l=>e().getElementById(l)}}function du(t){return new Proxy({},{get(e,n){return n==="style"?s=>t({style:s}).style:t}})}var fu=()=>t=>Array.from(new Set(t)),hu=Jt("password-input").parts("root","input","label","control","indicator","visibilityTrigger"),kt=hu.build(),En=t=>t.ids?.input??`p-input-${t.id}-input`,qs=t=>t.getById(En(t));function gu(t,e){const{scope:n,prop:s,context:r}=t,i=r.get("visible"),l=!!s("disabled"),o=!!s("invalid"),a=!!s("readOnly"),c=!!s("required"),u=!(a||l),d=s("translations");return{visible:i,disabled:l,invalid:o,focus(){qs(n)?.focus()},setVisible(f){t.send({type:"VISIBILITY.SET",value:f})},toggleVisible(){t.send({type:"VISIBILITY.SET",value:!i})},getRootProps(){return e.element({...kt.root.attrs,dir:s("dir"),"data-disabled":te(l),"data-invalid":te(o),"data-readonly":te(a)})},getLabelProps(){return e.label({...kt.label.attrs,htmlFor:En(n),"data-disabled":te(l),"data-invalid":te(o),"data-readonly":te(a),"data-required":te(c)})},getInputProps(){return e.input({...kt.input.attrs,id:En(n),autoCapitalize:"off",name:s("name"),required:s("required"),autoComplete:s("autoComplete"),spellCheck:!1,readOnly:a,disabled:l,type:i?"text":"password","data-state":i?"visible":"hidden","aria-invalid":Vc(o),"data-disabled":te(l),"data-invalid":te(o),"data-readonly":te(a),...s("ignorePasswordManagers")?mu:{}})},getVisibilityTriggerProps(){return e.button({...kt.visibilityTrigger.attrs,type:"button",tabIndex:-1,"aria-controls":En(n),"aria-expanded":i,"data-readonly":te(a),disabled:l,"data-disabled":te(l),"data-state":i?"visible":"hidden","aria-label":d?.visibilityTrigger?.(i),onPointerDown(f){Gc(f)&&u&&(f.preventDefault(),t.send({type:"TRIGGER.CLICK"}))}})},getIndicatorProps(){return e.element({...kt.indicator.attrs,"aria-hidden":!0,"data-state":i?"visible":"hidden","data-disabled":te(l),"data-invalid":te(o),"data-readonly":te(a)})},getControlProps(){return e.element({...kt.control.attrs,"data-disabled":te(l),"data-invalid":te(o),"data-readonly":te(a)})}}}var mu={"data-1p-ignore":"","data-lpignore":"true","data-bwignore":"true","data-form-type":"other","data-protonpass-ignore":"true"},pu={props({props:t}){return{id:au(),defaultVisible:!1,autoComplete:"current-password",ignorePasswordManagers:!1,...t,translations:{visibilityTrigger(e){return e?"Hide password":"Show password"},...t.translations}}},context({prop:t,bindable:e}){return{visible:e(()=>({value:t("visible"),defaultValue:t("defaultVisible"),onChange(n){t("onVisibilityChange")?.({visible:n})}}))}},initialState(){return"idle"},effects:["trackFormEvents"],states:{idle:{on:{"VISIBILITY.SET":{actions:["setVisibility"]},"TRIGGER.CLICK":{actions:["toggleVisibility","focusInputEl"]}}}},implementations:{actions:{setVisibility({context:t,event:e}){t.set("visible",e.value)},toggleVisibility({context:t}){t.set("visible",e=>!e)},focusInputEl({scope:t}){qs(t)?.focus()}},effects:{trackFormEvents({scope:t,send:e}){const s=qs(t)?.form;if(!s)return;const r=t.getWin(),i=new r.AbortController;return s.addEventListener("reset",l=>{l.defaultPrevented||e({type:"VISIBILITY.SET",value:!1})},{signal:i.signal}),s.addEventListener("submit",()=>{e({type:"VISIBILITY.SET",value:!1})},{signal:i.signal}),()=>i.abort()}}}};fu()(["defaultVisible","dir","id","onVisibilityChange","visible","ids","getRootNode","disabled","invalid","required","readOnly","translations","ignorePasswordManagers","autoComplete","name"]);function Un(t){const e=t().value??t().defaultValue,n=t().isEqual??Object.is,[s,r]=P(e),i=J(()=>t().value!=null),l={current:s()},o={current:void 0};de(()=>{const u=i()?t().value:s();o.current=u,l.current=u});const a=u=>{const d=o.current,f=tt(u)?u(l.current):u;t().debug&&console.log(`[bindable > ${t().debug}] setValue`,{next:f,prev:d}),i()||r(f),n(f,d)||t().onChange?.(f,d)};function c(){const u=i()?t().value:s;return tt(u)?u():u}return{initial:e,ref:l,get:c,set:a,invoke(u,d){t().onChange?.(u,d)},hash(u){return t().hash?.(u)??String(u)}}}Un.cleanup=t=>{_e(()=>t())};Un.ref=t=>{let e=t;return{get:()=>e,set:n=>{e=n}}};function wu(t){const e={current:t};return{get(n){return e.current[n]},set(n,s){e.current[n]=s}}}function ws(t){return tt(t)?t():t}var bu=(t,e)=>{let n=[],s=!0;de(()=>{if(s){n=t.map(i=>ws(i)),s=!1;return}let r=!1;for(let i=0;i<t.length;i++)if(!or(n[i],ws(t[i]))){r=!0;break}r&&(n=t.map(i=>ws(i)),e())})};function yu(t,e={}){const n=J(()=>{const{id:x,ids:_,getRootNode:b}=bs(e);return uu({id:x,ids:_,getRootNode:b})}),s=(...x)=>{t.debug&&console.log(...x)},r=J(()=>t.props?.({props:Hi(bs(e)),scope:n()})??bs(e)),i=vu(r),l=t.context?.({prop:i,bindable:Un,get scope(){return n()},flush:Br,getContext(){return o},getComputed(){return v},getRefs(){return g},getEvent(){return f()}}),o={get(x){return l?.[x].get()},set(x,_){l?.[x].set(_)},initial(x){return l?.[x].initial},hash(x){const _=l?.[x].get();return l?.[x].hash(_)}},a={current:new Map},c={current:null},u={current:null},d={current:{type:""}},f=()=>z(d.current,{current(){return d.current},previous(){return u.current}}),h=()=>z(L,{matches(...x){const _=L.get();return x.includes(_)},hasTag(x){const _=L.get();return!!t.states[_]?.tags?.includes(x)}}),g=wu(t.refs?.({prop:i,context:o})??{}),p=()=>({state:h(),context:o,event:f(),prop:i,send:N,action:y,guard:O,track:bu,refs:g,computed:v,flush:Br,get scope(){return n()},choose:E}),y=x=>{const _=tt(x)?x(p()):x;if(!_)return;const b=_.map(S=>{const D=t.implementations?.actions?.[S];return D||Fr(`[zag-js] No implementation found for action "${JSON.stringify(S)}"`),D});for(const S of b)S?.(p())},O=x=>tt(x)?x(p()):t.implementations?.guards?.[x](p()),C=x=>{const _=tt(x)?x(p()):x;if(!_)return;const b=_.map(D=>{const T=t.implementations?.effects?.[D];return T||Fr(`[zag-js] No implementation found for effect "${JSON.stringify(D)}"`),T}),S=[];for(const D of b){const T=D?.(p());T&&S.push(T)}return()=>S.forEach(D=>D?.())},E=x=>Qc(x).find(_=>{let b=!_.guard;return ar(_.guard)?b=!!O(_.guard):tt(_.guard)&&(b=_.guard(p())),b}),v=x=>{cu(t.computed,()=>"[zag-js] No computed object found on machine");const _=t.computed[x];return _({context:o,event:d.current,prop:i,refs:g,scope:n(),computed:v})},L=Un(()=>({defaultValue:t.initialState({prop:i}),onChange(x,_){_&&(a.current.get(_)?.(),a.current.delete(_)),_&&y(t.states[_]?.exit),y(c.current?.actions);const b=C(t.states[x]?.effects);if(b&&a.current.set(x,b),_===ps){y(t.entry);const S=C(t.effects);S&&a.current.set(ps,S)}y(t.states[x]?.entry)}}));let k=$t.NotStarted;Qs(()=>{const x=k===$t.Started;k=$t.Started,s(x?"rehydrating...":"initializing..."),L.invoke(L.initial,ps)}),_e(()=>{s("unmounting..."),k=$t.Stopped,a.current.forEach(_=>_?.()),a.current=new Map,c.current=null,y(t.exit)});const N=x=>{queueMicrotask(()=>{if(k!==$t.Started)return;u.current=d.current,d.current=x;let _=fe(()=>L.get());const b=t.states[_].on?.[x.type]??t.on?.[x.type],S=E(b);if(!S)return;c.current=S;const D=S.target??_;s("transition",x.type,S.target||_,`(${S.actions})`);const T=D!==_;T?L.set(D):S.reenter&&!T?L.invoke(_,_):y(S.actions)})};return t.watch?.(p()),{state:h(),send:N,context:o,prop:i,get scope(){return n()},refs:g,computed:v,event:f(),getStatus:()=>k}}function Br(t){t()}function bs(t){return tt(t)?t():t}function vu(t){return function(n){return t()[n]}}var Vr={onFocus:"onFocusIn",onBlur:"onFocusOut",onDoubleClick:"onDblClick",onChange:"onInput",defaultChecked:"checked",defaultValue:"value",htmlFor:"for",className:"class"},_u=t=>t.startsWith("--")?t:Au(t);function Su(t){return t in Vr?Vr[t]:t}var xu=du(t=>{const e={};for(const n in t){const s=t[n];if(!(n==="readOnly"&&s===!1)){if(n==="style"&&Zc(s)){e.style=ku(s);continue}if(n==="children"){ar(s)&&(e.textContent=s);continue}e[Su(n)]=s}}return e});function ku(t){let e={};for(const n in t){const s=t[n];!ar(s)&&!eu(s)||(e[_u(n)]=s)}return e}var Cu=/[A-Z]/g,$u=/^ms-/;function Eu(t){return"-"+t.toLowerCase()}var ys={};function Au(t){if(ys.hasOwnProperty(t))return ys[t];var e=t.replace(Cu,Eu);return ys[t]=$u.test(e)?"-"+e:e}var Ou=A("<svg stroke-width=0>");function zn(t,e){const n=z(t.a,e),[s,r]=ki(n,["src"]),[i,l]=P(""),o=J(()=>e.title?`${t.c}<title>${e.title}</title>`:t.c);return de(()=>l(o())),_e(()=>{l("")}),(()=>{var a=Ou();return Ze(a,z({get stroke(){return t.a?.stroke},get color(){return e.color||"currentColor"},get fill(){return e.color||"currentColor"},get style(){return{...e.style,overflow:"visible"}}},r,{get height(){return e.size||"1em"},get width(){return e.size||"1em"},xmlns:"http://www.w3.org/2000/svg",get innerHTML(){return i()}}),!0,!0),w(a,()=>Ci),a})()}function Ru(t){return zn({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><path d="M1 1 23 23"/>'},t)}function Tu(t){return zn({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><path d="M12 9A3 3 0 1 0 12 15 3 3 0 1 0 12 9z"/>'},t)}var Du=A("<div><label>Password</label><div><input><button><span>");function zi(t){const e=yu(pu,{id:ho(),autoComplete:t.autoComplete||"new-password",value:t.password||"",required:t.required||!1}),n=J(()=>gu(e,xu)),s=t.inputClass||"w-full pl-3 sm:pl-4 pr-3 sm:pr-4 py-2 text-xs sm:text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition big-placeholder",r=t.iconSize||20;return(()=>{var i=Du(),l=i.firstChild,o=l.nextSibling,a=o.firstChild,c=a.nextSibling,u=c.firstChild;return Ze(i,z(()=>n().getRootProps(),{get class(){return t.class}}),!1,!0),Ze(l,z(()=>n().getLabelProps(),{class:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1 sm:mb-2"}),!1,!0),Ze(o,z(()=>n().getControlProps(),{class:"relative"}),!1,!0),Ze(a,z(()=>n().getInputProps(),{class:s,onInput:d=>t.onPasswordChange?.(d.target.value),placeholder:""}),!1,!1),Ze(c,z(()=>n().getVisibilityTriggerProps(),{class:"absolute right-3 sm:right-4 top-1/2 -translate-y-1/2 text-gray-400"}),!1,!0),Ze(u,z(()=>n().getIndicatorProps()),!1,!0),w(u,m(F,{get when(){return n().visible},get fallback(){return m(Ru,{size:r-2})},get children(){return m(Tu,{size:r})}})),i})()}function Xt(t){return zn({a:{viewBox:"0 0 1024 1024"},c:'<path d="M512 1024c-69.1 0-136.2-13.5-199.3-40.2C251.7 958 197 921 150 874c-47-47-84-101.7-109.8-162.7C13.5 648.2 0 581.1 0 512c0-19.9 16.1-36 36-36s36 16.1 36 36c0 59.4 11.6 117 34.6 171.3 22.2 52.4 53.9 99.5 94.3 139.9 40.4 40.4 87.5 72.2 139.9 94.3C395 940.4 452.6 952 512 952c59.4 0 117-11.6 171.3-34.6 52.4-22.2 99.5-53.9 139.9-94.3 40.4-40.4 72.2-87.5 94.3-139.9C940.4 629 952 571.4 952 512c0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.2C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3s-13.5 136.2-40.2 199.3C958 772.3 921 827 874 874c-47 47-101.8 83.9-162.7 109.7-63.1 26.8-130.2 40.3-199.3 40.3z"/>'},t)}function Lu(t){return zn({a:{viewBox:"0 0 1024 1024"},c:'<path d="M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232 512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0 0 68.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"/>'},t)}var Nu=A('<div class="pt-2 sm:pt-3 px-2 text-red-600 text-xs sm:text-sm bg-red-50 border border-red-200 rounded-lg">'),Pu=A('<div class="flex items-center">Signing In...'),Mu=A('<div class="h-full bg-blue-50 flex items-center justify-center px-4 py-8 sm:py-12"><form aria-labelledby=signin-heading class="w-full max-w-md sm:max-w-xl bg-white rounded-xl sm:rounded-3xl shadow-2xl p-6 sm:p-12 space-y-4 border border-gray-100"autocomplete=off><div class="mb-2 sm:mb-4 text-center"><h2 class="text-xl sm:text-2xl font-bold text-gray-900 mb-1 sm:mb-2"id=signin-heading>Welcome Back</h2><p class="text-gray-500 text-xs sm:text-sm">Sign in to your account.</p></div><div><label class="block text-xs sm:text-sm font-semibold text-gray-700 mb-1 sm:mb-2"for=email-input>Email</label><input type=email autocomplete=email autocapitalize=off spellcheck=false class="w-full pl-3 sm:pl-4 pr-3 sm:pr-4 py-2 text-xs sm:text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition"required id=email-input placeholder=you@example.com></div><div></div><button type=submit class="w-full py-2 sm:py-3 text-sm sm:text-base bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg sm:rounded-xl shadow transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"></button><div class="text-center mt-1 sm:mt-2"><a href=/reset-password class="text-blue-600 hover:underline text-xs sm:text-sm font-semibold">Forgot password?</a></div><div class="text-center text-xs sm:text-sm text-gray-500 mt-2 sm:mt-4">Don&apos;t have an account? <a href=/signup class="text-blue-600 hover:underline font-semibold">Sign Up');function Uu(){const[t,e]=P(""),[n,s]=P(""),[r,i]=P(""),[l,o]=P(!1),a=Ce(),{signin:c,authError:u}=bt(),d=()=>r()||u();async function f(h){if(h.preventDefault(),i(""),!t()||!n()){i("Please enter email and password");return}o(!0);try{await c(t(),n()),await new Promise(g=>setTimeout(g,200)),a("/dashboard",{replace:!0})}catch(g){console.error("Sign in error:",g),g.message?.includes("Email not verified")||g.message?.includes("email_verified_at is null")?a("/verify-email",{replace:!0}):g.message?.includes("Invalid credentials")||g.message?.includes("Incorrect email or password")?i("Incorrect email or password"):g.message?.includes("User not found")?i("No account found with this email"):g.message?.includes("Too many requests")?i("Too many sign-in attempts. Please try again later."):i(g.message||"Sign in failed. Please try again.")}finally{o(!1)}}return(()=>{var h=Mu(),g=h.firstChild,p=g.firstChild,y=p.nextSibling,O=y.firstChild,C=O.nextSibling,E=y.nextSibling,v=E.nextSibling,L=v.nextSibling,k=L.firstChild,N=L.nextSibling,x=N.firstChild,_=x.nextSibling;return g.addEventListener("submit",f),C.$$input=b=>e(b.target.value),w(E,m(zi,{get password(){return n()},onPasswordChange:s,autoComplete:"current-password",required:!0,get disabled(){return l()}})),w(g,m(et,{get when(){return!!d()},get children(){var b=Nu();return w(b,d),b}}),v),w(v,m(et,{get when(){return l()},fallback:"Sign In",get children(){var b=Pu(),S=b.firstChild;return w(b,m(Xt,{class:"animate-spin mr-2",size:22}),S),b}})),k.$$click=b=>{b.preventDefault(),a("/reset-password")},_.$$click=b=>{b.preventDefault(),a("/signup")},U(b=>{var S=l(),D=l();return S!==b.e&&(C.disabled=b.e=S),D!==b.t&&(v.disabled=b.t=D),b},{e:void 0,t:void 0}),U(()=>C.value=t()),h})()}ge(["input","click"]);var Iu=A('<div class="w-full mt-2"><div class="text-xs text-gray-700"id=password-requirements aria-live=polite><ul class="pace-y-0.5 sm:space-y-1">'),ju=A('<li class="flex items-center gap-2"><span aria-hidden=true></span><span>'),qu=A('<svg class="w-3 h-3"fill=none stroke=currentColor stroke-width=2 viewBox="0 0 16 16"><path stroke-linecap=round stroke-linejoin=round d="M4 8l3 3 5-5">'),Fu=A('<svg class="w-3 h-3"fill=none stroke=currentColor stroke-width=2 viewBox="0 0 16 16"><path stroke-linecap=round stroke-linejoin=round d="M5 5l6 6M11 5l-6 6">');const Ht=[{label:"At least 8 characters",test:t=>t.length>=8,error:"at least 8 characters"},{label:"Uppercase letter (A-Z)",test:t=>/[A-Z]/.test(t),error:"an uppercase letter"},{label:"Lowercase letter (a-z)",test:t=>/[a-z]/.test(t),error:"a lowercase letter"},{label:"Number (0-9)",test:t=>/\d/.test(t),error:"a number"},{label:"Special character (e.g. !?<>@#$%)",test:t=>/[^A-Za-z0-9]/.test(t),error:"a special character"}];function Bu(t){if(t=t(),!t)return{met:[],unmet:Ht.map(r=>r.label)};const e=Ht.filter(r=>r.test(t)).map(r=>r.label),n=Ht.filter(r=>!r.test(t)).map(r=>r.label),s=Ht.filter(r=>!r.test(t)).map(r=>r.error);return{met:e,unmet:n,errors:s}}function Vu(t){const e=J(()=>Bu(()=>t.password));return de(()=>{t.onUnmet?.(e().errors)}),(()=>{var n=Iu(),s=n.firstChild,r=s.firstChild;return w(r,m(Me,{each:Ht,children:i=>{const l=()=>e().met.includes(i.label);return(()=>{var o=ju(),a=o.firstChild,c=a.nextSibling;return w(a,(()=>{var u=ae(()=>!!l());return()=>u()?qu():Fu()})()),w(c,()=>i.label),U(u=>{var d=`w-3.5 h-3.5 ml-1 rounded-full flex items-center justify-center ${l()?"bg-white text-green-500 border-green-500 border-[1.5px]":"border-red-500 border-[1.5px] text-red-500"}`,f=l()?"text-green-500":"text-red-500";return d!==u.e&&ht(a,u.e=d),f!==u.t&&ht(c,u.t=f),u},{e:void 0,t:void 0}),o})()}})),n})()}var Yu=A('<div class="pt-2 sm:pt-3 px-2 text-red-600 text-xs sm:text-sm bg-red-50 border border-red-200 rounded-lg">'),Wu=A('<div class="flex items-center">Signing Up...'),Ju=A('<div class="h-full bg-blue-50 flex items-center justify-center px-4 py-6 sm:py-12"><form aria-labelledby=signup-heading class="w-full max-w-md sm:max-w-xl bg-white rounded-xl sm:rounded-3xl shadow-2xl p-6 sm:p-12 space-y-4 border border-gray-100"autocomplete=off><div class="mb-2 text-center"><h2 class="text-xl sm:text-2xl font-bold text-gray-900 mb-1 sm:mb-2"id=signup-heading>Get Started</h2><p class="text-gray-500 text-xs sm:text-sm">Create a new account.</p></div><div><label class="block text-xs sm:text-sm font-semibold text-gray-700 mb-1 sm:mb-2"for=name-input>Name</label><div class=relative><input type=text autocomplete=name autocapitalize=words spellcheck=false class="w-full pl-3 sm:pl-4 pr-3 sm:pr-4 py-2 text-xs sm:text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition"required id=name-input placeholder="What should we call you?"></div></div><div><label class="block text-xs sm:text-sm font-semibold text-gray-700 mb-1 sm:mb-2"for=email-input>Email</label><div class=relative><input type=email autocomplete=email autocapitalize=off spellcheck=false class="w-full pl-3 sm:pl-4 pr-3 sm:pr-4 py-2 text-xs sm:text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition"required id=email-input placeholder=you@example.com></div></div><div></div><div><label class="block text-xs sm:text-sm font-semibold text-gray-700 mb-1 sm:mb-2"for=confirm-password-input>Confirm Password</label><div class=relative><input type=password autocomplete=new-password autocapitalize=off spellcheck=false class="w-full pl-3 sm:pl-4 pr-3 sm:pr-4 py-2 text-xs sm:text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition big-placeholder"required id=confirm-password-input placeholder=></div></div><button type=submit class="w-full py-2 sm:py-3 text-sm sm:text-base bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg sm:rounded-xl shadow transition disabled:opacity-50 flex items-center justify-center"></button><div class="text-center text-xs sm:text-sm text-gray-500 mt-2 sm:mt-4">Already have an account? <a href=/signin class="text-blue-600 hover:underline font-semibold">Sign In');function Hu(){const[t,e]=P(""),[n,s]=P(""),[r,i]=P(""),[l,o]=P(""),[a,c]=P(""),[u,d]=P(!1),[f,h]=P([]),[g,p]=P(!1),y=Ce(),{signup:O,authError:C}=bt(),E=()=>a()||C();async function v(L){if(L.preventDefault(),d(!0),c(""),!t()||!n()||!r()||!l()){c("Please fill out all fields");return}if(r()!==l()){c("Passwords do not match");return}if(f().length>0){c(`Password must include ${f()[0]}`);return}p(!0);try{await O(n(),r(),t()),await new Promise(k=>setTimeout(k,200)),y(`/check-email?email=${encodeURIComponent(n())}`,{replace:!0})}catch(k){console.error("Signup error:",k),k.message?.includes("User already exists")||k.message?.includes("Email already in use")?c("An account with this email already exists"):k.message?.includes("Invalid email")?c("Please enter a valid email address"):k.message?.includes("Password too weak")?c("Password is too weak. Please choose a stronger password."):k.message?.includes("Too many requests")?c("Too many registration attempts. Please try again later."):c(k.message||"Sign up failed. Please try again.")}finally{p(!1)}}return de(()=>{r()===l()&&c("")}),(()=>{var L=Ju(),k=L.firstChild,N=k.firstChild,x=N.nextSibling,_=x.firstChild,b=_.nextSibling,S=b.firstChild,D=x.nextSibling,T=D.firstChild,$=T.nextSibling,R=$.firstChild,M=D.nextSibling,q=M.nextSibling,I=q.firstChild,W=I.nextSibling,G=W.firstChild,Q=q.nextSibling,le=Q.nextSibling,ct=le.firstChild,rs=ct.nextSibling;return k.addEventListener("submit",v),S.$$input=oe=>e(oe.target.value),R.$$input=oe=>s(oe.target.value),w(M,m(zi,{get password(){return r()},onPasswordChange:i,autoComplete:"new-password",required:!0}),null),w(M,m(et,{get when(){return!!E()},get children(){var oe=Yu();return w(oe,E),oe}}),null),w(M,m(Vu,{get password(){return r()},onUnmet:h}),null),G.$$input=oe=>o(oe.target.value),w(Q,m(et,{get when(){return g()},fallback:"Sign Up",get children(){var oe=Wu(),Wl=oe.firstChild;return w(oe,m(Xt,{class:"animate-spin mr-2",size:22}),Wl),oe}})),rs.$$click=oe=>{oe.preventDefault(),y("/signin")},U(()=>Q.disabled=g()),U(()=>S.value=t()),U(()=>R.value=n()),U(()=>G.value=l()),L})()}ge(["input","click"]);var zu=A('<div class="h-full bg-blue-50 flex items-center justify-center px-4 py-6 sm:py-12"><div class="w-full max-w-md sm:max-w-xl bg-white rounded-xl sm:rounded-3xl shadow-2xl p-6 sm:p-12 text-center space-y-6 border border-gray-100">'),Gu=A('<div class="flex justify-center">'),Qu=A('<h2 class="text-xl sm:text-2xl font-bold text-gray-900">Email Verified!'),Ku=A('<p class="text-gray-600 text-sm sm:text-base">Redirecting you to the dashboard...'),Xu=A('<div class="flex justify-center"><div class="bg-blue-100 p-4 rounded-full">'),Zu=A(`<div><h2 class="text-xl sm:text-2xl font-bold text-gray-900 mb-2">Check Your Email</h2><p class="text-gray-600 text-sm sm:text-base">We've sent a verification email to:</p><p class="text-blue-600 font-semibold text-sm sm:text-base mt-1">`),ed=A(`<div class=space-y-4><p class="text-gray-500 text-xs sm:text-sm">Click the verification link in your email to activate your account. Once verified, you'll automatically be redirected to the dashboard.`),td=A('<div class=space-y-3><button class="w-full py-2 sm:py-3 text-sm sm:text-base bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg sm:rounded-xl shadow transition disabled:opacity-50 flex items-center justify-center"></button><button class="w-full py-2 sm:py-3 text-sm sm:text-base border border-gray-300 hover:bg-gray-50 text-gray-700 font-semibold rounded-lg sm:rounded-xl transition">Back to Sign In'),nd=A(`<div class="text-xs sm:text-sm text-gray-400"><p>Didn't receive the email? Check your spam folder or try resending.`),sd=A('<div class="p-3 text-red-600 text-xs sm:text-sm bg-red-50 border border-red-200 rounded-lg">'),rd=A('<div class="p-3 text-green-600 text-xs sm:text-sm bg-green-50 border border-green-200 rounded-lg">Verification email sent successfully!'),id=A('<div class="flex items-center">Sending...');function ld(){const[t,e]=P(!1),[n,s]=P(!1),[r,i]=P(!1),[l,o]=P(""),[a,c]=P(null),u=Ce(),[d]=Ho(),{user:f,isAuthenticated:h,resendVerificationEmail:g,session:p}=bt(),y=()=>d.email||f()?.email||"",O=async(L=!1)=>{try{L&&await p().refetch?.();const k=f();return console.log("Checking verification status:",{isAuthenticated:h(),user:k,emailVerified:k?.emailVerified,forceRefresh:L}),h()&&k?.emailVerified?(console.log("Email verified! Redirecting to dashboard..."),a()&&(clearInterval(a()),c(null)),e(!0),setTimeout(()=>{u("/dashboard",{replace:!0})},1e3),!0):!1}catch(k){return console.error("Error checking verification status:",k),!1}},C=()=>{const L=f();h()&&L?.emailVerified&&O(!1)};Qs(()=>{const L=setInterval(C,5e3);c(L),C();const k=()=>{document.visibilityState==="visible"&&(console.log("Tab became visible, checking verification status..."),O(!0))};return document.addEventListener("visibilitychange",k),()=>{document.removeEventListener("visibilitychange",k)}}),_e(()=>{a()&&clearInterval(a())});const E=async()=>{if(!y()){o("No email address found");return}s(!0),o("");try{await g(y()),i(!0),setTimeout(()=>i(!1),5e3)}catch{o("Failed to resend email. Please try again.")}finally{s(!1)}},v=()=>{u("/signin",{replace:!0})};return(()=>{var L=zu(),k=L.firstChild;return w(k,(()=>{var N=ae(()=>!!t());return()=>N()?[(()=>{var x=Gu();return w(x,m(Xt,{class:"animate-spin text-blue-600",size:48})),x})(),Qu(),Ku()]:[(()=>{var x=Xu(),_=x.firstChild;return w(_,m(Lu,{class:"text-blue-600",size:48})),x})(),(()=>{var x=Zu(),_=x.firstChild,b=_.nextSibling,S=b.nextSibling;return w(S,y),x})(),(()=>{var x=ed();return x.firstChild,w(x,(()=>{var _=ae(()=>!!l());return()=>_()&&(()=>{var b=sd();return w(b,l),b})()})(),null),w(x,(()=>{var _=ae(()=>!!r());return()=>_()&&rd()})(),null),x})(),(()=>{var x=td(),_=x.firstChild,b=_.nextSibling;return _.$$click=E,w(_,(()=>{var S=ae(()=>!!n());return()=>S()?(()=>{var D=id(),T=D.firstChild;return w(D,m(Xt,{class:"animate-spin mr-2",size:18}),T),D})():"Resend Email"})()),b.$$click=v,U(()=>_.disabled=n()),x})(),nd()]})()),L})()}ge(["click"]);var od=A('<div class="p-4 bg-green-50 border border-green-200 rounded-lg text-center"><p class="text-green-700 text-sm font-medium mb-1">Reset Email Sent!</p><p class="text-green-600 text-xs">Check your email for instructions to reset your password. Redirecting you to sign in...'),ad=A('<div class="pt-2 sm:pt-3 px-2 text-red-600 text-xs sm:text-sm bg-red-50 border border-red-200 rounded-lg">'),cd=A('<div class="flex items-center">Sending Email...'),ud=A('<form class=space-y-4><div><label class="block text-xs sm:text-sm font-semibold text-gray-700 mb-1 sm:mb-2"for=email-input>Email Address</label><input type=email autocomplete=email autocapitalize=off spellcheck=false class="w-full pl-3 sm:pl-4 pr-3 sm:pr-4 py-2 text-xs sm:text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition"required id=email-input placeholder=you@example.com></div><button type=submit class="w-full py-2 sm:py-3 text-sm sm:text-base bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg sm:rounded-xl shadow transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"></button><div class="text-center text-xs sm:text-sm text-gray-500 mt-2 sm:mt-4">Remember your password? <a href=/signin class="text-blue-600 hover:underline font-semibold">Sign In'),dd=A(`<div class="h-full bg-blue-50 flex items-center justify-center px-4 py-8 sm:py-12"><div class="w-full max-w-md sm:max-w-xl bg-white rounded-xl sm:rounded-3xl shadow-2xl p-6 sm:p-12 space-y-4 border border-gray-100"><div class="mb-2 sm:mb-4 text-center"><h2 class="text-xl sm:text-2xl font-bold text-gray-900 mb-1 sm:mb-2">Reset Password</h2><p class="text-gray-500 text-xs sm:text-sm">Enter your email address and we'll send you a link to reset your password.`);function fd(){const[t,e]=P(""),[n,s]=P(""),[r,i]=P(!1),[l,o]=P(!1),a=Ce(),{resetPassword:c,authError:u}=bt(),d=()=>n()||u();async function f(h){if(h.preventDefault(),s(""),o(!1),!t()){s("Please enter your email address");return}i(!0);try{await c(t()),o(!0),setTimeout(()=>{a("/signin")},3e3)}catch(g){console.error("Reset password error:",g),g.message?.includes("User not found")?s("No account found with this email address"):g.message?.includes("Too many requests")?s("Too many reset attempts. Please try again later."):g.message?.includes("Invalid email")?s("Please enter a valid email address"):s(g.message||"Failed to send reset email. Please try again.")}finally{i(!1)}}return(()=>{var h=dd(),g=h.firstChild;return g.firstChild,w(g,m(et,{get when(){return l()},get children(){return od()}}),null),w(g,m(et,{get when(){return!l()},get children(){var p=ud(),y=p.firstChild,O=y.firstChild,C=O.nextSibling,E=y.nextSibling,v=E.nextSibling,L=v.firstChild,k=L.nextSibling;return p.addEventListener("submit",f),C.$$input=N=>e(N.target.value),w(p,m(et,{get when(){return!!d()},get children(){var N=ad();return w(N,d),N}}),E),w(E,m(et,{get when(){return r()},fallback:"Send Reset Email",get children(){var N=cd(),x=N.firstChild;return w(N,m(Xt,{class:"animate-spin mr-2",size:22}),x),N}})),k.$$click=N=>{N.preventDefault(),a("/signin")},U(N=>{var x=r(),_=r();return x!==N.e&&(C.disabled=N.e=x),_!==N.t&&(E.disabled=N.t=_),N},{e:void 0,t:void 0}),U(()=>C.value=t()),p}}),null),h})()}ge(["input","click"]);var hd=A('<div class="min-h-screen bg-blue-50 flex items-center justify-center"><div class=text-center><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"></div><p class="mt-4 text-gray-600">Loading...'),gd=A("<div class=min-h-screen>");function wn(t){const{isLoggedIn:e,authLoading:n}=bt(),s=Ce();return de(()=>{!n()&&e()&&s("/dashboard",{replace:!0})}),(()=>{var r=gd();return w(r,m(F,{get when(){return n()},get children(){return hd()}}),null),w(r,m(F,{get when(){return ae(()=>!n())()&&!e()},get children(){return t.children}}),null),r})()}var md=A('<div class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600">'),pd=A('<div class="flex items-center space-x-3">'),wd=A('<div class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-200"><div class="px-4 py-2 text-sm text-gray-700 border-b border-gray-200"><div class=font-medium></div><div class="text-gray-500 text-xs"></div></div><button class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Sign Out'),bd=A('<div class=relative><button class="flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors px-3 py-2 rounded-md hover:bg-gray-100"><div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white text-sm font-medium"></div><span class="hidden sm:block font-medium"></span><svg fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 9l-7 7-7-7">'),yd=A('<div class="md:hidden mt-3 pt-3 border-t border-gray-200"><div class="flex flex-col space-y-2">'),vd=A('<nav class="bg-white border-b border-gray-200 px-6 py-3 shadow-sm"><div class="flex items-center justify-between max-w-7xl mx-auto"><div class="flex items-center space-x-4"></div><div class="hidden md:flex items-center space-x-6"></div><div class="flex items-center space-x-4">');function _d(){const{isLoggedIn:t,user:e,signout:n,authLoading:s}=bt(),r=Ce(),[i,l]=P(!1);let o;const a=async()=>{try{await n(),r("/signin")}catch(c){console.error("Sign out failed:",c)}};return Qs(()=>{const c=u=>{o&&!o.contains(u.target)&&l(!1)};document.addEventListener("mousedown",c),_e(()=>{document.removeEventListener("mousedown",c)})}),(()=>{var c=vd(),u=c.firstChild,d=u.firstChild,f=d.nextSibling,h=f.nextSibling;return w(d,m(Ve,{href:"/dashboard",class:"text-xl font-bold text-blue-600 hover:text-blue-700 transition-colors",children:"CoRATES"})),w(f,m(F,{get when(){return ae(()=>!s())()&&t()},get children(){return[m(Ve,{href:"/dashboard",class:"text-gray-600 hover:text-gray-900 transition-colors font-medium",activeClass:"text-blue-600",children:"Dashboard"}),m(Ve,{href:"/checklist",class:"text-gray-600 hover:text-gray-900 transition-colors font-medium",activeClass:"text-blue-600",children:"Checklists"})]}})),w(h,m(F,{get when(){return s()},get children(){return md()}}),null),w(h,m(F,{get when(){return ae(()=>!s())()&&!t()},get children(){var g=pd();return w(g,m(Ve,{href:"/signin",class:"text-gray-600 hover:text-gray-900 transition-colors px-3 py-2 rounded-md hover:bg-gray-100 font-medium",children:"Sign In"}),null),w(g,m(Ve,{href:"/signup",class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-all font-medium shadow-md",children:"Sign Up"}),null),g}}),null),w(h,m(F,{get when(){return ae(()=>!s())()&&t()},get children(){var g=bd(),p=g.firstChild,y=p.firstChild,O=y.nextSibling,C=O.nextSibling,E=o;return typeof E=="function"?nr(E,g):o=g,p.$$click=()=>l(!i()),w(y,()=>e()?.name?.charAt(0).toUpperCase()||e()?.email?.charAt(0).toUpperCase()||"U"),w(O,()=>e()?.name||e()?.email),w(g,m(F,{get when(){return i()},get children(){var v=wd(),L=v.firstChild,k=L.firstChild,N=k.nextSibling,x=L.nextSibling;return w(k,()=>e()?.name||"User"),w(N,()=>e()?.email),w(v,m(Ve,{href:"/profile",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>l(!1),children:"Profile"}),x),w(v,m(Ve,{href:"/settings",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>l(!1),children:"Settings"}),x),x.$$click=()=>{l(!1),a()},v}}),null),U(()=>st(C,"class",`w-4 h-4 transition-transform ${i()?"rotate-180":""}`)),g}}),null),w(c,m(F,{get when(){return ae(()=>!s())()&&t()},get children(){var g=yd(),p=g.firstChild;return w(p,m(Ve,{href:"/dashboard",class:"text-gray-600 hover:text-gray-900 transition-colors px-3 py-2 rounded-md hover:bg-gray-100 font-medium",activeClass:"text-blue-600 bg-blue-50",children:"Dashboard"}),null),w(p,m(Ve,{href:"/checklist",class:"text-gray-600 hover:text-gray-900 transition-colors px-3 py-2 rounded-md hover:bg-gray-100 font-medium",activeClass:"text-blue-600 bg-blue-50",children:"Checklists"}),null),g}}),null),c})()}ge(["click"]);var Sd=A('<div class="min-h-screen bg-blue-50"><main class=text-gray-900>');function bn(t){return(()=>{var e=Sd(),n=e.firstChild;return w(e,m(_d,{}),n),w(n,()=>t.children),e})()}const xd={AMSTAR2:{name:"AMSTAR 2",description:"A MeaSurement Tool to Assess systematic Reviews (version 2)"}},he={q1:{text:"1. Did the research questions and inclusion criteria for the review include the components of PICO?",columns:[{label:"For Yes:",options:["Population","Intervention","Comparator group","Outcome"]},{label:"Optional (recommended):",options:["Timeframe for follow-up"]},{label:"",options:["Yes","No"]}]},q2:{text:"2. Did the report of the review contain an explicit statement that the review methods were established prior to the conduct of the review and did the report justify any significant deviations from the protocol?",columns:[{label:"For Partial Yes:",description:"The authors state that they had a written protocol or guide that included ALL the following:",options:["review question(s)","a search strategy","inclusion/exclusion criteria","risk of bias assessment"]},{label:"For Yes:",description:"As for Partial Yes, plus the protocol should be registered and should also have specified:",options:["a meta-analysis/synthesis plan, if appropriate, and","a plan for investigating causes of heterogeneity","a plan for investigating causes of heterogeneity"]},{label:"",description:"",options:["Yes","Partial Yes","No"]}]},q3:{text:"3. Did the review authors explain their selection of the study designs for inclusion in the review?",columns:[{label:"For Yes, the review should satisfy ONE of the following:",options:["Explanation for including only RCTs ","OR Explanation for including only NRSI","OR Explanation for including both RCTs and NRSI"]},{label:"",options:["Yes","No"]}]},q4:{text:"4. Did the review authors use a comprehensive literature search strategy? ",columns:[{label:"For Partial Yes (all the following):",options:["searched at least 2 databases (relevant to research question)","provided key word and/or search strategy","justified publication restrictions (e.g. language)"]},{label:"For Yes, should also have (all the following):",options:["searched the reference lists / bibliographies of included studies","searched trial/study registries","included/consulted content experts in the field","where relevant, searched for grey literature","conducted search within 24 months of completion of the review"]},{label:"",options:["Yes","Partial Yes","No"]}]},q5:{text:"5. Did the review authors perform study selection in duplicate?",columns:[{label:"For Yes, either ONE of the following:",options:["at least two reviewers achieved consensus on which data to extract from included studies","OR two reviewers extracted data from a sample of eligible studies and achieved good agreement (at least 80 percent), with the remainder extracted by one reviewer."]},{label:"",options:["Yes","No"]}]},q6:{text:"6. Did the review authors perform data extraction in duplicate?",columns:[{label:"For Yes, either ONE of the following:",options:["at least two reviewers achieved consensus on which data to extract from included studies","OR two reviewers extracted data from a sample of eligible studies and achieved good agreement (at least 80 percent), with the remainder extracted by one reviewer."]},{label:"",options:["Yes","No"]}]},q7:{text:"7. Did the review authors provide a list of excluded studies and justify the exclusions?",columns:[{label:"For Partial Yes:",options:["provided a list of all potentially relevant studies that were read in full-text form but excluded from the review"]},{label:"For Yes, must also have:",options:["Justified the exclusion from the review of each potentially relevant study"]},{label:"",options:["Yes","Partial Yes","No"]}]},q8:{text:"8. Did the review authors describe the included studies in adequate detail?",columns:[{label:"For Partial Yes (ALL the following):",options:["described populations","described interventions","described comparators","described outcomes","described research designs"]},{label:"For Yes, should also have ALL the following:",options:["described population in detail","described comparator in detail (including doses where relevant)","described studys setting in detail","timeframe for follow-up"]},{label:"",options:["Yes","Partial Yes","No"]}]},q9:{text:"9. Did the review authors use a satisfactory technique for assessing the risk of bias (RoB) in individual studies that were included in the review?",subtitle:"RCTs",columns:[{label:"For Partial Yes, must have assessed RoB from",options:["unconcealed allocation, and","lack of blinding of patients and assessors when assessing outcomes (unnecessary for objective outcomes such as all-cause mortality)"]},{label:"For Yes, must also have assessed RoB from:",options:["allocation sequence that was not truly random, and","selection of the reported result from among multiple measurements or analyses of a specified outcome"]},{label:"",description:"",options:["Yes","Partial Yes","No"," Includes only NRSI"]}],subtitle2:"NRSI",columns2:[{label:"For Partial Yes, must have assessed RoB:",options:["from confounding, and","from selection bias"]},{label:"For Yes, must also have assessed RoB:",options:["methods used to ascertain exposures and outcomes, and","selection of the reported result from among multiple measurements or analyses of a specified outcome"]},{label:"",options:["Yes","Partial Yes","No","Includes only RCTs"]}]},q10:{text:"10. Did the review authors report on the sources of funding for the studies included in the review?",columns:[{label:"For Yes:",options:["Must have reported on the sources of funding for individual studies included in the review. Note: Reporting that the reviewers looked for this information but it was not reported by study authors also qualifies"]},{label:"",options:["Yes","No"]}]},q11:{text:"11. If meta-analysis was performed did the review authors use appropriate methods for statistical combination of results?",subtitle:"RCTs",columns:[{label:"For Yes:",options:["The authors justified combining the data in a meta-analysis","AND they used an appropriate weighted technique to combine study results and adjusted for heterogeneity if present.","AND investigated the causes of any heterogeneity"]},{label:"",options:["Yes","No","No meta-analysis conducted"]}],subtitle2:"NRSI",columns2:[{label:"For Yes:",options:["The authors justified combining the data in a meta-analysis","AND they used an appropriate weighted technique to combine study results, adjusting for heterogeneity if present","AND they statistically combined effect estimates from NRSI that were adjusted for confounding, rather than combining raw data, or justified combining raw data when adjusted effect estimates were not available","AND they reported separate summary estimates for RCTs and NRSI separately when both were included in the review"]},{label:"",options:["Yes","No","No meta-analysis conducted"]}]},q12:{text:"12. If meta-analysis was performed, did the review authors assess the potential impact of RoB in individual studies on the results of the meta-analysis or other evidence synthesis?",columns:[{label:"For Yes:",options:["included only low risk of bias RCTs","OR, if the pooled estimate was based on RCTs and/or NRSI at variable RoB, the authors performed analyses to investigate possible impact of RoB on summary estimates of effect."]},{label:"",options:["Yes","No","No meta-analysis conducted"]}]},q13:{text:"13. Did the review authors account for RoB in individual studies when interpreting/ discussing the results of the review?",columns:[{label:"For Yes:",options:["included only low risk of bias RCTs","OR, if RCTs with moderate or high RoB, or NRSI were included the review provided a discussion of the likely impact of RoB on the results"]},{label:"",options:["Yes","No"]}]},q14:{text:"14. Did the review authors provide a satisfactory explanation for, and discussion of, any heterogeneity observed in the results of the review?",columns:[{label:"For Yes:",options:["There was no significant heterogeneity in the results","OR if heterogeneity was present the authors performed an investigation of sources of any heterogeneity in the results and discussed the impact of this on the results of the review"]},{label:"",options:["Yes","No"]}]},q15:{text:"15. If they performed quantitative synthesis did the review authors carry out an adequate investigation of publication bias (small study bias) and discuss its likely impact on the results of the review?",columns:[{label:"For Yes:",options:["performed graphical or statistical tests for publication bias and discussed the likelihood and magnitude of impact of publication bias"]},{label:"",options:["Yes","No","No meta-analysis conducted"]}]},q16:{text:"16. Did the review authors report any potential sources of conflict of interest, including any funding they received for conducting the review?",options:["Yes","Partial Yes","No"],columns:[{label:"For Yes:",options:["The authors reported no competing interests OR","The authors described their funding sources and how they managed potential conflicts of interest"]},{label:"",options:["Yes","No"]}]}};function Gi({name:t=null,id:e=null,createdAt:n=Date.now(),reviewerName:s=""}){if(!e||typeof e!="string"||!e.trim())throw new Error("AMSTAR2Checklist requires a non-empty string id.");if(!t||typeof t!="string"||!t.trim())throw new Error("AMSTAR2Checklist requires a non-empty string name.");let r=new Date(n);isNaN(r)&&(r=Date.now());const i=String(r.getMonth()+1).padStart(2,"0"),l=String(r.getDate()).padStart(2,"0");return n=`${r.getFullYear()}-${i}-${l}`,{name:t,reviewerName:s||"",createdAt:n,id:e,q1:{answers:[[!1,!1,!1,!1],[!1],[!1,!0]],critical:!1},q2:{answers:[[!1,!1,!1,!1],[!1,!1,!1],[!1,!1,!0]],critical:!0},q3:{answers:[[!1,!1,!1],[!1,!0]],critical:!1},q4:{answers:[[!1,!1,!1],[!1,!1,!1,!1,!1],[!1,!1,!0]],critical:!0},q5:{answers:[[!1,!1],[!1,!0]],critical:!1},q6:{answers:[[!1,!1],[!1,!0]],critical:!1},q7:{answers:[[!1],[!1],[!1,!1,!0]],critical:!0},q8:{answers:[[!1,!1,!1,!1,!1],[!1,!1,!1,!1],[!1,!1,!0]],critical:!1},q9a:{answers:[[!1,!1],[!1,!1],[!1,!1,!0,!1]],critical:!0},q9b:{answers:[[!1,!1],[!1,!1],[!1,!1,!0,!1]],critical:!0},q10:{answers:[[!1],[!1,!0]],critical:!1},q11a:{answers:[[!1,!1,!1],[!1,!0,!1]],critical:!0},q11b:{answers:[[!1,!1,!1,!1],[!1,!0,!1]],critical:!0},q12:{answers:[[!1,!1],[!1,!0,!1]],critical:!1},q13:{answers:[[!1,!1],[!1,!0]],critical:!0},q14:{answers:[[!1,!1],[!1,!0]],critical:!1},q15:{answers:[[!1],[!1,!0,!1]],critical:!0},q16:{answers:[[!1,!1],[!1,!0]],critical:!1}}}var kd=A('<div class="bg-white rounded-lg shadow-md p-8 text-sm"><div class=flex><h3 class="font-semibold text-gray-900"></h3></div><div class="font-semibold text-gray-900 h-4 mt-2 mb-1"></div><div class="font-semibold text-gray-900 h-4 mt-2">'),Cd=A('<div class="bg-white rounded-lg shadow-md p-8 text-sm"><div class=flex><h3 class="font-semibold text-gray-900"></h3></div><div class="font-semibold text-gray-900 h-4 mt-2"></div><div class="font-semibold text-gray-900 h-4 mt-4">'),$d=A('<div class="bg-white rounded-lg shadow-md p-7"><div class=flex><h3 class="font-semibold text-sm text-gray-900 mb-1">'),Ed=A("<div class=ml-auto><button>"),Ad=A('<div class="flex flex-col gap-4 sm:flex-row sm:gap-6">'),Od=A('<div><div class="font-semibold text-gray-800 text-xs wrap-break-words whitespace-normal min-w-0 w-full min-h-8 flex items-center">'),Rd=A('<div class="flex flex-col gap-2 mt-1">'),Td=A('<label class="flex items-center space-x-2 text-xs"><input type=radio class="w-3.5 h-3.5 text-blue-600 border-gray-300 focus:ring-blue-500 cursor-pointer"><span class="text-gray-700 wrap-break-words">'),Dd=A('<div class="flex flex-col gap-2">'),Ld=A('<label class="flex items-center space-x-2 text-xs"><input type=checkbox class="w-3 h-3 shrink-0 text-blue-600 border-gray-300 focus:ring-blue-500"><span class="text-gray-700 wrap-break-words">'),Nd=A("<div class=space-y-6>"),Pd=A('<div class="min-h-screen bg-blue-50"><div class="container mx-auto px-4 py-6 max-w-5xl"><div class="bg-white rounded-lg shadow-lg p-6 mb-8"><h1 class="text-2xl font-bold text-gray-900 mb-4">AMSTAR 2 Checklist</h1><div class="grid md:grid-cols-3 gap-4 text-xs"><div><label for=reviewName class="block font-medium text-gray-700 mb-2">Review Title</label><input type=text id=reviewName class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-xs"placeholder="Enter review title"></div><div><label for=reviewerName class="block font-medium text-gray-700 mb-2">Reviewer Name</label><input type=text id=reviewerName class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-xs"placeholder="Enter your name"></div><div><label for=reviewDate class="block font-medium text-gray-700 mb-2">Review Date</label><input type=date id=reviewDate class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-xs">'),Md=A("<div>Loading...");function Ud(t){const e=()=>t.checklistState().q1,n=he.q1;function s(r,i){const l=e().answers.map(a=>[...a]);if(l[r][i]=!e().answers[r][i],r===0){const a=l[0].every(Boolean);l[2][0]=a,l[2][1]=!a}r===2&&(i===0&&l[2][0]&&(l[2][1]=!1),i===1&&l[2][1]&&(l[2][0]=!1));const o={...t.checklistState().q1,answers:l};t.onUpdate(o)}return m(pe,z({state:e,question:n,handleChange:s},t))}function Id(t){const e=()=>t.checklistState().q2,n=he.q2;function s(r,i){const l=e().answers.map(a=>[...a]);if(l[r][i]=!e().answers[r][i],r===0||r===1){const a=l[0].every(Boolean),c=a&&l[1].every(Boolean);l[2][0]=c,l[2][1]=!c&&a,l[2][2]=!c&&!a}r===2&&(l[2]=l[2].map((a,c)=>c===i?!e().answers[2][i]:!1));const o={...t.checklistState().q2,answers:l};t.onUpdate(o)}return m(pe,z({state:e,question:n,handleChange:s},t))}function jd(t){const e=()=>t.checklistState().q3,n=he.q3;function s(r,i){const l=e().answers.map(a=>[...a]);if(l[r][i]=!e().answers[r][i],r===0){const a=l[0].some(Boolean);l[1][0]=a,l[1][1]=!a}r===1&&(i===0&&l[1][0]&&(l[1][1]=!1),i===1&&l[1][1]&&(l[1][0]=!1));const o={...t.checklistState().q3,answers:l};t.onUpdate(o)}return m(pe,z({state:e,question:n,handleChange:s},t))}function qd(t){const e=()=>t.checklistState().q4,n=he.q4;function s(r,i){const l=e().answers.map(a=>[...a]);if(l[r][i]=!e().answers[r][i],r===0||r===1){const a=l[0].every(Boolean),c=a&&l[1].every(Boolean);l[2][0]=c,l[2][1]=!c&&a,l[2][2]=!c&&!a}r===2&&(l[2]=l[2].map((a,c)=>c===i?!e().answers[2][i]:!1));const o={...t.checklistState().q4,answers:l};t.onUpdate(o)}return m(pe,z({state:e,question:n,handleChange:s},t))}function Fd(t){const e=()=>t.checklistState().q5,n=he.q5;function s(r,i){const l=e().answers.map(a=>[...a]);if(l[r][i]=!e().answers[r][i],r===0){const a=l[0].some(Boolean);l[1][0]=a,l[1][1]=!a}r===1&&(i===0&&l[1][0]&&(l[1][1]=!1),i===1&&l[1][1]&&(l[1][0]=!1));const o={...t.checklistState().q5,answers:l};t.onUpdate(o)}return m(pe,z({state:e,question:n,handleChange:s},t))}function Bd(t){const e=()=>t.checklistState().q6,n=he.q6;function s(r,i){const l=e().answers.map(a=>[...a]);if(l[r][i]=!e().answers[r][i],r===0){const a=l[0].some(Boolean);l[1][0]=a,l[1][1]=!a}r===1&&(i===0&&l[1][0]&&(l[1][1]=!1),i===1&&l[1][1]&&(l[1][0]=!1));const o={...t.checklistState().q6,answers:l};t.onUpdate(o)}return m(pe,z({state:e,question:n,handleChange:s},t))}function Vd(t){const e=()=>t.checklistState().q7,n=he.q7;function s(r,i){const l=e().answers.map(a=>[...a]);if(l[r][i]=!e().answers[r][i],r===0||r===1){const a=l[0].every(Boolean),c=a&&l[1].every(Boolean);l[2][0]=c,l[2][1]=!c&&a,l[2][2]=!c&&!a}r===2&&(l[2]=l[2].map((a,c)=>c===i?!e().answers[2][i]:!1));const o={...t.checklistState().q7,answers:l};t.onUpdate(o)}return m(pe,z({state:e,question:n,handleChange:s},t))}function Yd(t){const e=()=>t.checklistState().q8,n=he.q8;function s(r,i){const l=e().answers.map(a=>[...a]);if(l[r][i]=!e().answers[r][i],r===0||r===1){const a=l[0].every(Boolean),c=a&&l[1].every(Boolean);l[2][0]=c,l[2][1]=!c&&a,l[2][2]=!c&&!a}r===2&&(l[2]=l[2].map((a,c)=>c===i?!e().answers[2][i]:!1));const o={...t.checklistState().q8,answers:l};t.onUpdate(o)}return m(pe,z({state:e,question:n,handleChange:s},t))}function Wd(t){const e=()=>t.checklistState().q9a,n=()=>t.checklistState().q9b,s=he.q9;function r(o,a){const c=e().answers.map(d=>[...d]);if(c[o][a]=!e().answers[o][a],o===0||o===1){const d=c[0].every(Boolean),f=d&&c[1].every(Boolean);c[2][0]=f,c[2][1]=!f&&d,c[2][2]=!f&&!d,c[2][3]=!1}o===2&&(c[2]=c[2].map((d,f)=>f===a?!e().answers[2][a]:!1));const u={...t.checklistState().q9a,answers:c};t.onUpdatea(u)}function i(o,a){const c=n().answers.map(d=>[...d]);if(c[o][a]=!n().answers[o][a],o===0||o===1){const d=c[0].every(Boolean),f=d&&c[1].every(Boolean);c[2][0]=f,c[2][1]=!f&&d,c[2][2]=!f&&!d,c[2][3]=!1}o===2&&(c[2]=c[2].map((d,f)=>f===a?!n().answers[2][a]:!1));const u={...t.checklistState().q9b,answers:c};console.log("Updating q9b to",u),t.onUpdateb(u)}function l(o){const a=o.critical,c={...e(),critical:a},u={...n(),critical:a};t.onUpdatea(c),setTimeout(()=>{t.onUpdateb(u)},10)}return(()=>{var o=kd(),a=o.firstChild,c=a.firstChild,u=a.nextSibling,d=u.nextSibling;return w(c,()=>s.text),w(a,m(cr,{state:e,onUpdate:l}),null),w(u,()=>s.subtitle),w(o,m(Zt,{state:e,question:{text:"q9a"},get columns(){return s.columns},handleChange:r}),d),w(d,()=>s.subtitle2),w(o,m(Zt,{state:n,question:{text:"q9b"},get columns(){return s.columns2},handleChange:i}),null),o})()}function Jd(t){const e=()=>t.checklistState().q10,n=he.q10;function s(r,i){const l=e().answers.map(a=>[...a]);if(l[r][i]=!e().answers[r][i],r===0){const a=l[0].some(Boolean);l[1][0]=a,l[1][1]=!a}r===1&&(i===0&&l[1][0]&&(l[1][1]=!1),i===1&&l[1][1]&&(l[1][0]=!1));const o={...t.checklistState().q10,answers:l};t.onUpdate(o)}return m(pe,z({state:e,question:n,handleChange:s},t))}function Hd(t){const e=()=>t.checklistState().q11a,n=()=>t.checklistState().q11b,s=he.q11;function r(o,a){const c=e().answers.map(d=>[...d]);if(c[o][a]=!e().answers[o][a],o===0){const d=c[0].every(Boolean);c[1][0]=d,c[1][1]=!d,c[1][2]=!1}o===1&&(c[1]=c[1].map((d,f)=>f===a?!e().answers[1][a]:!1));const u={...t.checklistState().q11a,answers:c};t.onUpdatea(u)}function i(o,a){const c=n().answers.map(d=>[...d]);if(c[o][a]=!n().answers[o][a],o===0){const d=c[0].every(Boolean);c[1][0]=d,c[1][1]=!d,c[1][2]=!1}o===1&&(c[1]=c[1].map((d,f)=>f===a?!n().answers[1][a]:!1));const u={...t.checklistState().q11b,answers:c};t.onUpdateb(u)}function l(o){const a=o.critical,c={...e(),critical:a},u={...n(),critical:a};t.onUpdatea(c),setTimeout(()=>{t.onUpdateb(u)},10)}return(()=>{var o=Cd(),a=o.firstChild,c=a.firstChild,u=a.nextSibling,d=u.nextSibling;return w(c,()=>s.text),w(a,m(cr,{state:e,onUpdate:l}),null),w(u,()=>s.subtitle),w(o,m(Zt,{state:e,question:{text:"q11a"},get columns(){return s.columns},handleChange:r,width:"w-48"}),d),w(d,()=>s.subtitle2),w(o,m(Zt,{state:n,question:{text:"q11b"},get columns(){return s.columns2},handleChange:i,width:"w-48"}),null),o})()}function zd(t){const e=()=>t.checklistState().q12,n=he.q12;function s(r,i){const l=e().answers.map(a=>[...a]);if(l[r][i]=!e().answers[r][i],r===0){const a=l[0].some(Boolean);l[1][0]=a,l[1][1]=!a,l[1][2]=!1}r===1&&(l[1]=l[1].map((a,c)=>c===i?!e().answers[1][i]:!1));const o={...t.checklistState().q12,answers:l};t.onUpdate(o)}return m(pe,z({state:e,question:n,handleChange:s},t,{width:"w-48"}))}function Gd(t){const e=()=>t.checklistState().q13,n=he.q13;function s(r,i){const l=e().answers.map(a=>[...a]);if(l[r][i]=!e().answers[r][i],r===0){const a=l[0].some(Boolean);l[1][0]=a,l[1][1]=!a}r===1&&(i===0&&l[1][0]&&(l[1][1]=!1),i===1&&l[1][1]&&(l[1][0]=!1));const o={...t.checklistState().q13,answers:l};t.onUpdate(o)}return m(pe,z({state:e,question:n,handleChange:s},t))}function Qd(t){const e=()=>t.checklistState().q14,n=he.q14;function s(r,i){const l=e().answers.map(a=>[...a]);if(l[r][i]=!e().answers[r][i],r===0){const a=l[0].some(Boolean);l[1][0]=a,l[1][1]=!a}r===1&&(i===0&&l[1][0]&&(l[1][1]=!1),i===1&&l[1][1]&&(l[1][0]=!1));const o={...t.checklistState().q14,answers:l};t.onUpdate(o)}return m(pe,z({state:e,question:n,handleChange:s},t))}function Kd(t){const e=()=>t.checklistState().q15,n=he.q15;function s(r,i){const l=e().answers.map(a=>[...a]);if(l[r][i]=!e().answers[r][i],r===0){const a=l[0].some(Boolean);l[1][0]=a,l[1][1]=!a,l[1][2]=!1}r===1&&(l[1]=l[1].map((a,c)=>c===i?!e().answers[1][i]:!1));const o={...t.checklistState().q15,answers:l};t.onUpdate(o)}return m(pe,z({state:e,question:n,handleChange:s},t,{width:"w-48"}))}function Xd(t){const e=()=>t.checklistState().q16,n=he.q16;function s(r,i){const l=e().answers.map(a=>[...a]);if(l[r][i]=!e().answers[r][i],r===0){const a=l[0].some(Boolean);l[1][0]=a,l[1][1]=!a}r===1&&(i===0&&l[1][0]&&(l[1][1]=!1),i===1&&l[1][1]&&(l[1][0]=!1));const o={...t.checklistState().q16,answers:l};t.onUpdate(o)}return m(pe,z({state:e,question:n,handleChange:s},t))}function pe(t){return(()=>{var e=$d(),n=e.firstChild,s=n.firstChild;return w(s,()=>t.question.text),w(n,m(cr,{get state(){return t.state},get onUpdate(){return t.onUpdate}}),null),w(e,m(Zt,z({get columns(){return t.question.columns}},t)),null),e})()}function cr(t){function e(n){const s={...t.state(),critical:n};t.onUpdate(s)}return(()=>{var n=Ed(),s=n.firstChild;return s.$$click=()=>e(!t.state().critical),w(s,()=>t.state().critical?"Critical":"Not Critical"),U(r=>{var i=`ml-2 px-3 h-6 rounded-full text-xs font-medium transition-colors text-nowrap
        ${t.state().critical?"bg-red-100 text-red-700 border border-red-300 hover:bg-red-200":"bg-gray-100 text-gray-700 border border-gray-300 hover:bg-gray-200"}`,l=t.state().critical;return i!==r.e&&ht(s,r.e=i),l!==r.t&&st(s,"aria-pressed",r.t=l),r},{e:void 0,t:void 0}),n})()}function Zt(t){return(()=>{var e=Ad();return w(e,m(Me,{get each(){return t.columns},children:(n,s)=>(()=>{var r=Od(),i=r.firstChild;return w(i,()=>n.label),w(r,(()=>{var l=ae(()=>s()===t.columns.length-1);return()=>l()?(()=>{var o=Rd();return w(o,m(Me,{get each(){return n.options},children:(a,c)=>(()=>{var u=Td(),d=u.firstChild,f=d.nextSibling;return d.addEventListener("change",()=>t.handleChange(s(),c())),w(f,a),U(()=>st(d,"name",`col-${s()}-${t.question?.text??""}`)),U(()=>d.checked=t.state().answers[s()][c()]),u})()})),o})():(()=>{var o=Dd();return w(o,m(Me,{get each(){return n.options},children:(a,c)=>(()=>{var u=Ld(),d=u.firstChild,f=d.nextSibling;return d.addEventListener("change",()=>t.handleChange(s(),c())),w(f,a),U(()=>d.checked=t.state().answers[s()][c()]),u})()})),o})()})(),null),U(()=>ht(r,s()===t.columns.length-1?`${t.width??"w-32"} flex flex-col min-w-0`:"flex-1 flex flex-col min-w-0")),r})()})),e})()}function Qi(t={}){const[e,n]=P(""),[s,r]=P(""),[i,l]=P(""),[o,a]=P(null),c=lr(),u=Ce();de(async()=>{if(t.externalChecklist){a(t.externalChecklist);return}const f=Gi({name:"New 2 Checklist",id:"local-1234",createdAt:Date.now(),reviewerName:""});a(f)}),de(()=>{const f=o();f&&(n(f.name||""),r(f.reviewerName||""),l(f.createdAt||""))});const d=f=>{if(t.onExternalUpdate){t.onExternalUpdate(f);return}const g={...o(),...f};a(g)};return(()=>{var f=Pd(),h=f.firstChild,g=h.firstChild,p=g.firstChild,y=p.nextSibling,O=y.firstChild,C=O.firstChild,E=C.nextSibling,v=O.nextSibling,L=v.firstChild,k=L.nextSibling,N=v.nextSibling,x=N.firstChild,_=x.nextSibling;return E.addEventListener("change",b=>{if(n(b.target.value),d({name:b.target.value}),console.log("Review name changed to",b.target.value),c.projectSlug&&c.reviewSlug&&c.checklistSlug&&o()){const S=c.checklistSlug.lastIndexOf("-"),D=S!==-1?c.checklistSlug.slice(S+1):c.checklistSlug;u(`/projects/${c.projectSlug}/reviews/${c.reviewSlug}/checklists/${D}`,{replace:!0})}}),k.addEventListener("change",b=>{r(b.target.value),d({reviewerName:b.target.value})}),_.addEventListener("change",b=>{l(b.target.value),d({reviewDate:b.target.value})}),w(h,m(F,{get when(){return o()},get fallback(){return Md()},get children(){var b=Nd();return w(b,m(Ud,{onUpdate:S=>d({q1:S}),checklistState:o}),null),w(b,m(Id,{onUpdate:S=>d({q2:S}),checklistState:o}),null),w(b,m(jd,{onUpdate:S=>d({q3:S}),checklistState:o}),null),w(b,m(qd,{onUpdate:S=>d({q4:S}),checklistState:o}),null),w(b,m(Fd,{onUpdate:S=>d({q5:S}),checklistState:o}),null),w(b,m(Bd,{onUpdate:S=>d({q6:S}),checklistState:o}),null),w(b,m(Vd,{onUpdate:S=>d({q7:S}),checklistState:o}),null),w(b,m(Yd,{onUpdate:S=>d({q8:S}),checklistState:o}),null),w(b,m(Wd,{onUpdatea:S=>d({q9a:S}),onUpdateb:S=>d({q9b:S}),checklistState:o}),null),w(b,m(Jd,{onUpdate:S=>d({q10:S}),checklistState:o}),null),w(b,m(Hd,{onUpdatea:S=>d({q11a:S}),onUpdateb:S=>d({q11b:S}),checklistState:o}),null),w(b,m(zd,{onUpdate:S=>d({q12:S}),checklistState:o}),null),w(b,m(Gd,{onUpdate:S=>d({q13:S}),checklistState:o}),null),w(b,m(Qd,{onUpdate:S=>d({q14:S}),checklistState:o}),null),w(b,m(Kd,{onUpdate:S=>d({q15:S}),checklistState:o}),null),w(b,m(Xd,{onUpdate:S=>d({q16:S}),checklistState:o}),null),b}}),null),U(()=>E.value=e()),U(()=>k.value=s()),U(()=>_.value=i()),f})()}ge(["click"]);const Oe=()=>new Map,Fs=t=>{const e=Oe();return t.forEach((n,s)=>{e.set(s,n)}),e},at=(t,e,n)=>{let s=t.get(e);return s===void 0&&t.set(e,s=n()),s},Zd=(t,e)=>{const n=[];for(const[s,r]of t)n.push(e(r,s));return n},ef=(t,e)=>{for(const[n,s]of t)if(e(s,n))return!0;return!1},Pt=()=>new Set,vs=t=>t[t.length-1],tf=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},gt=Array.from,nf=Array.isArray;class sf{constructor(){this._observers=Oe()}on(e,n){return at(this._observers,e,Pt).add(n),n}once(e,n){const s=(...r)=>{this.off(e,s),n(...r)};this.on(e,s)}off(e,n){const s=this._observers.get(e);s!==void 0&&(s.delete(n),s.size===0&&this._observers.delete(e))}emit(e,n){return gt((this._observers.get(e)||Oe()).values()).forEach(s=>s(...n))}destroy(){this._observers=Oe()}}const it=Math.floor,An=Math.abs,Ki=(t,e)=>t<e?t:e,jt=(t,e)=>t>e?t:e,Xi=t=>t!==0?t<0:1/t<0,Yr=1,Wr=2,_s=4,Ss=8,en=32,He=64,ve=128,Gn=31,Bs=63,ft=127,rf=2147483647,Zi=Number.MAX_SAFE_INTEGER,lf=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&it(t)===t),of=t=>t.toLowerCase(),af=/^\s*/g,cf=t=>t.replace(af,""),uf=/([A-Z])/g,Jr=(t,e)=>cf(t.replace(uf,n=>`${e}${of(n)}`)),df=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,s=new Uint8Array(n);for(let r=0;r<n;r++)s[r]=e.codePointAt(r);return s},tn=typeof TextEncoder<"u"?new TextEncoder:null,ff=t=>tn.encode(t),hf=tn?ff:df;let zt=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});zt&&zt.decode(new Uint8Array).length===1&&(zt=null);class dn{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Qn=()=>new dn,gf=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},Pe=t=>{const e=new Uint8Array(gf(t));let n=0;for(let s=0;s<t.bufs.length;s++){const r=t.bufs[s];e.set(r,n),n+=r.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),n),e},mf=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(new Uint8Array(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(jt(n,e)*2),t.cpos=0)},se=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e},Vs=se,Y=(t,e)=>{for(;e>ft;)se(t,ve|ft&e),e=it(e/128);se(t,ft&e)},ur=(t,e)=>{const n=Xi(e);for(n&&(e=-e),se(t,(e>Bs?ve:0)|(n?He:0)|Bs&e),e=it(e/64);e>0;)se(t,(e>ft?ve:0)|ft&e),e=it(e/128)},Ys=new Uint8Array(3e4),pf=Ys.length/3,wf=(t,e)=>{if(e.length<pf){const n=tn.encodeInto(e,Ys).written||0;Y(t,n);for(let s=0;s<n;s++)se(t,Ys[s])}else we(t,hf(e))},bf=(t,e)=>{const n=unescape(encodeURIComponent(e)),s=n.length;Y(t,s);for(let r=0;r<s;r++)se(t,n.codePointAt(r))},Rt=tn&&tn.encodeInto?wf:bf,Kn=(t,e)=>{const n=t.cbuf.length,s=t.cpos,r=Ki(n-s,e.length),i=e.length-r;t.cbuf.set(e.subarray(0,r),s),t.cpos+=r,i>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(jt(n*2,i)),t.cbuf.set(e.subarray(r)),t.cpos=i)},we=(t,e)=>{Y(t,e.byteLength),Kn(t,e)},dr=(t,e)=>{mf(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},yf=(t,e)=>dr(t,4).setFloat32(0,e,!1),vf=(t,e)=>dr(t,8).setFloat64(0,e,!1),_f=(t,e)=>dr(t,8).setBigInt64(0,e,!1),Hr=new DataView(new ArrayBuffer(4)),Sf=t=>(Hr.setFloat32(0,t),Hr.getFloat32(0)===t),nn=(t,e)=>{switch(typeof e){case"string":se(t,119),Rt(t,e);break;case"number":lf(e)&&An(e)<=rf?(se(t,125),ur(t,e)):Sf(e)?(se(t,124),yf(t,e)):(se(t,123),vf(t,e));break;case"bigint":se(t,122),_f(t,e);break;case"object":if(e===null)se(t,126);else if(nf(e)){se(t,117),Y(t,e.length);for(let n=0;n<e.length;n++)nn(t,e[n])}else if(e instanceof Uint8Array)se(t,116),we(t,e);else{se(t,118);const n=Object.keys(e);Y(t,n.length);for(let s=0;s<n.length;s++){const r=n[s];Rt(t,r),nn(t,e[r])}}break;case"boolean":se(t,e?120:121);break;default:se(t,127)}};class zr extends dn{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&Y(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const Gr=t=>{t.count>0&&(ur(t.encoder,t.count===1?t.s:-t.s),t.count>1&&Y(t.encoder,t.count-2))};class On{constructor(){this.encoder=new dn,this.s=0,this.count=0}write(e){this.s===e?this.count++:(Gr(this),this.count=1,this.s=e)}toUint8Array(){return Gr(this),Pe(this.encoder)}}const Qr=t=>{if(t.count>0){const e=t.diff*2+(t.count===1?0:1);ur(t.encoder,e),t.count>1&&Y(t.encoder,t.count-2)}};class xs{constructor(){this.encoder=new dn,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(Qr(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return Qr(this),Pe(this.encoder)}}class xf{constructor(){this.sarr=[],this.s="",this.lensE=new On}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new dn;return this.sarr.push(this.s),this.s="",Rt(e,this.sarr.join("")),Kn(e,this.lensE.toUint8Array()),Pe(e)}}const lt=t=>new Error(t),Ue=()=>{throw lt("Method unimplemented")},je=()=>{throw lt("Unexpected case")},el=lt("Unexpected end of array"),tl=lt("Integer out of Range");class Xn{constructor(e){this.arr=e,this.pos=0}}const fr=t=>new Xn(t),kf=t=>t.pos!==t.arr.length,Cf=(t,e)=>{const n=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},be=t=>Cf(t,B(t)),Mt=t=>t.arr[t.pos++],B=t=>{let e=0,n=1;const s=t.arr.length;for(;t.pos<s;){const r=t.arr[t.pos++];if(e=e+(r&ft)*n,n*=128,r<ve)return e;if(e>Zi)throw tl}throw el},hr=t=>{let e=t.arr[t.pos++],n=e&Bs,s=64;const r=(e&He)>0?-1:1;if((e&ve)===0)return r*n;const i=t.arr.length;for(;t.pos<i;){if(e=t.arr[t.pos++],n=n+(e&ft)*s,s*=128,e<ve)return r*n;if(n>Zi)throw tl}throw el},$f=t=>{let e=B(t);if(e===0)return"";{let n=String.fromCodePoint(Mt(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(Mt(t));else for(;e>0;){const s=e<1e4?e:1e4,r=t.arr.subarray(t.pos,t.pos+s);t.pos+=s,n+=String.fromCodePoint.apply(null,r),e-=s}return decodeURIComponent(escape(n))}},Ef=t=>zt.decode(be(t)),Tt=zt?Ef:$f,gr=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},Af=t=>gr(t,4).getFloat32(0,!1),Of=t=>gr(t,8).getFloat64(0,!1),Rf=t=>gr(t,8).getBigInt64(0,!1),Tf=[t=>{},t=>null,hr,Af,Of,Rf,t=>!1,t=>!0,Tt,t=>{const e=B(t),n={};for(let s=0;s<e;s++){const r=Tt(t);n[r]=sn(t)}return n},t=>{const e=B(t),n=[];for(let s=0;s<e;s++)n.push(sn(t));return n},be],sn=t=>Tf[127-Mt(t)](t);class Kr extends Xn{constructor(e,n){super(e),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),kf(this)?this.count=B(this)+1:this.count=-1),this.count--,this.s}}class Rn extends Xn{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=hr(this);const e=Xi(this.s);this.count=1,e&&(this.s=-this.s,this.count=B(this)+2)}return this.count--,this.s}}class ks extends Xn{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=hr(this),n=e&1;this.diff=it(e/2),this.count=1,n&&(this.count=B(this)+2)}return this.s+=this.diff,this.count--,this.s}}class Df{constructor(e){this.decoder=new Rn(e),this.str=Tt(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),n=this.str.slice(this.spos,e);return this.spos=e,n}}const Lf=crypto.getRandomValues.bind(crypto),nl=()=>Lf(new Uint32Array(1))[0],Nf="10000000-1000-4000-8000"+-1e11,Pf=()=>Nf.replace(/[018]/g,t=>(t^nl()&15>>t/4).toString(16)),Xr=t=>new Promise(t);Promise.all.bind(Promise);const Zr=t=>t===void 0?null:t;class Mf{constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}}let sl=new Mf,Uf=!0;try{typeof localStorage<"u"&&localStorage&&(sl=localStorage,Uf=!1)}catch{}const If=sl,jf=Object.assign,qf=Object.keys,Ff=(t,e)=>{for(const n in t)e(t[n],n)},ei=t=>qf(t).length,Bf=t=>{for(const e in t)return!1;return!0},Vf=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},Yf=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),Wf=(t,e)=>t===e||ei(t)===ei(e)&&Vf(t,(n,s)=>(n!==void 0||Yf(e,s))&&e[s]===n),Jf=Object.freeze,rl=t=>{for(const e in t){const n=t[e];(typeof n=="object"||typeof n=="function")&&rl(t[e])}return Jf(t)},mr=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&mr(t,e,n+1)}},Hf=(t,e)=>e.includes(t);var il={};const rn=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";let Te;const zf=()=>{if(Te===void 0)if(rn){Te=Oe();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const s=t[n];s[0]==="-"?(e!==null&&Te.set(e,""),e=s):e!==null&&(Te.set(e,s),e=null)}e!==null&&Te.set(e,"")}else typeof location=="object"?(Te=Oe(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){const[e,n]=t.split("=");Te.set(`--${Jr(e,"-")}`,n),Te.set(`-${Jr(e,"-")}`,n)}})):Te=Oe();return Te},Ws=t=>zf().has(t),In=t=>Zr(rn?il[t.toUpperCase().replaceAll("-","_")]:If.getItem(t)),ll=t=>Ws("--"+t)||In(t)!==null;ll("production");const Gf=rn&&Hf(il.FORCE_COLOR,["true","1","2"]),Qf=Gf||!Ws("--no-colors")&&!ll("no-color")&&(!rn||process.stdout.isTTY)&&(!rn||Ws("--color")||In("COLORTERM")!==null||(In("TERM")||"").includes("color")),Kf=t=>new Uint8Array(t),Xf=t=>{const e=Kf(t.byteLength);return e.set(t),e};class Zf{constructor(e,n){this.left=e,this.right=n}}const Ye=(t,e)=>new Zf(t,e);typeof DOMParser<"u"&&new DOMParser;const eh=t=>Zd(t,(e,n)=>`${n}:${e};`).join(""),Ge=Symbol,ol=Ge(),al=Ge(),th=Ge(),nh=Ge(),sh=Ge(),cl=Ge(),rh=Ge(),pr=Ge(),ih=Ge(),lh=t=>{t.length===1&&t[0]?.constructor===Function&&(t=t[0]());const e=[],n=[];let s=0;for(;s<t.length;s++){const r=t[s];if(r===void 0)break;if(r.constructor===String||r.constructor===Number)e.push(r);else if(r.constructor===Object)break}for(s>0&&n.push(e.join(""));s<t.length;s++){const r=t[s];r instanceof Symbol||n.push(r)}return n},oh={[ol]:Ye("font-weight","bold"),[al]:Ye("font-weight","normal"),[th]:Ye("color","blue"),[sh]:Ye("color","green"),[nh]:Ye("color","grey"),[cl]:Ye("color","red"),[rh]:Ye("color","purple"),[pr]:Ye("color","orange"),[ih]:Ye("color","black")},ah=t=>{t.length===1&&t[0]?.constructor===Function&&(t=t[0]());const e=[],n=[],s=Oe();let r=[],i=0;for(;i<t.length;i++){const l=t[i],o=oh[l];if(o!==void 0)s.set(o.left,o.right);else{if(l===void 0)break;if(l.constructor===String||l.constructor===Number){const a=eh(s);i>0||a.length>0?(e.push("%c"+l),n.push(a)):e.push(l)}else break}}for(i>0&&(r=n,r.unshift(e.join("")));i<t.length;i++){const l=t[i];l instanceof Symbol||r.push(l)}return r},ul=Qf?ah:lh,ch=(...t)=>{console.log(...ul(t)),dl.forEach(e=>e.print(t))},uh=(...t)=>{console.warn(...ul(t)),t.unshift(pr),dl.forEach(e=>e.print(t))},dl=Pt(),fl=t=>({[Symbol.iterator](){return this},next:t}),dh=(t,e)=>fl(()=>{let n;do n=t.next();while(!n.done&&!e(n.value));return n}),Cs=(t,e)=>fl(()=>{const{done:n,value:s}=t.next();return{done:n,value:n?void 0:e(s)}});class hl{constructor(e,n){this.clock=e,this.len=n}}class Zn{constructor(){this.clients=new Map}}const gl=(t,e,n)=>e.clients.forEach((s,r)=>{const i=t.doc.store.clients.get(r);if(i!=null){const l=i[i.length-1],o=l.id.clock+l.length;for(let a=0,c=s[a];a<s.length&&c.clock<o;c=s[++a])Sl(t,i,c.clock,c.len,n)}}),fh=(t,e)=>{let n=0,s=t.length-1;for(;n<=s;){const r=it((n+s)/2),i=t[r],l=i.clock;if(l<=e){if(e<l+i.len)return r;n=r+1}else s=r-1}return null},ml=(t,e)=>{const n=t.clients.get(e.client);return n!==void 0&&fh(n,e.clock)!==null},wr=t=>{t.clients.forEach(e=>{e.sort((r,i)=>r.clock-i.clock);let n,s;for(n=1,s=1;n<e.length;n++){const r=e[s-1],i=e[n];r.clock+r.len>=i.clock?r.len=jt(r.len,i.clock+i.len-r.clock):(s<n&&(e[s]=i),s++)}e.length=s})},hh=t=>{const e=new Zn;for(let n=0;n<t.length;n++)t[n].clients.forEach((s,r)=>{if(!e.clients.has(r)){const i=s.slice();for(let l=n+1;l<t.length;l++)tf(i,t[l].clients.get(r)||[]);e.clients.set(r,i)}});return wr(e),e},jn=(t,e,n,s)=>{at(t.clients,e,()=>[]).push(new hl(n,s))},br=(t,e)=>{Y(t.restEncoder,e.clients.size),gt(e.clients.entries()).sort((n,s)=>s[0]-n[0]).forEach(([n,s])=>{t.resetDsCurVal(),Y(t.restEncoder,n);const r=s.length;Y(t.restEncoder,r);for(let i=0;i<r;i++){const l=s[i];t.writeDsClock(l.clock),t.writeDsLen(l.len)}})},gh=t=>{const e=new Zn,n=B(t.restDecoder);for(let s=0;s<n;s++){t.resetDsCurVal();const r=B(t.restDecoder),i=B(t.restDecoder);if(i>0){const l=at(e.clients,r,()=>[]);for(let o=0;o<i;o++)l.push(new hl(t.readDsClock(),t.readDsLen()))}}return e},ti=(t,e,n)=>{const s=new Zn,r=B(t.restDecoder);for(let i=0;i<r;i++){t.resetDsCurVal();const l=B(t.restDecoder),o=B(t.restDecoder),a=n.clients.get(l)||[],c=re(n,l);for(let u=0;u<o;u++){const d=t.readDsClock(),f=d+t.readDsLen();if(d<c){c<f&&jn(s,l,c,f-c);let h=qe(a,d),g=a[h];for(!g.deleted&&g.id.clock<d&&(a.splice(h+1,0,Jn(e,g,d-g.id.clock)),h++);h<a.length&&(g=a[h++],g.id.clock<f);)g.deleted||(f<g.id.clock+g.length&&a.splice(h,0,Jn(e,g,f-g.id.clock)),g.delete(e))}else jn(s,l,d,f-d)}}if(s.clients.size>0){const i=new es;return Y(i.restEncoder,0),br(i,s),i.toUint8Array()}return null},pl=nl;class qt extends sf{constructor({guid:e=Pf(),collectionid:n=null,gc:s=!0,gcFilter:r=()=>!0,meta:i=null,autoLoad:l=!1,shouldLoad:o=!0}={}){super(),this.gc=s,this.gcFilter=r,this.clientID=pl(),this.guid=e,this.collectionid=n,this.share=new Map,this.store=new vl,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=o,this.autoLoad=l,this.meta=i,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=Xr(c=>{this.on("load",()=>{this.isLoaded=!0,c(this)})});const a=()=>Xr(c=>{const u=d=>{(d===void 0||d===!0)&&(this.off("sync",u),c())};this.on("sync",u)});this.on("sync",c=>{c===!1&&this.isSynced&&(this.whenSynced=a()),this.isSynced=c===void 0||c===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=a()}load(){const e=this._item;e!==null&&!this.shouldLoad&&K(e.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(gt(this.subdocs).map(e=>e.guid))}transact(e,n=null){return K(this,e,n)}get(e,n=ie){const s=at(this.share,e,()=>{const i=new n;return i._integrate(this,null),i}),r=s.constructor;if(n!==ie&&r!==n)if(r===ie){const i=new n;i._map=s._map,s._map.forEach(l=>{for(;l!==null;l=l.left)l.parent=i}),i._start=s._start;for(let l=i._start;l!==null;l=l.right)l.parent=i;return i._length=s._length,this.share.set(e,i),i._integrate(this,null),i}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return s}getArray(e=""){return this.get(e,Lt)}getText(e=""){return this.get(e,Ut)}getMap(e=""){return this.get(e,me)}getXmlElement(e=""){return this.get(e,It)}getXmlFragment(e=""){return this.get(e,mt)}toJSON(){const e={};return this.share.forEach((n,s)=>{e[s]=n.toJSON()}),e}destroy(){this.isDestroyed=!0,gt(this.subdocs).forEach(n=>n.destroy());const e=this._item;if(e!==null){this._item=null;const n=e.content;n.doc=new qt({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=e,K(e.parent.doc,s=>{const r=n.doc;e.deleted||s.subdocsAdded.add(r),s.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class mh{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return B(this.restDecoder)}readDsLen(){return B(this.restDecoder)}}class ph extends mh{readLeftID(){return V(B(this.restDecoder),B(this.restDecoder))}readRightID(){return V(B(this.restDecoder),B(this.restDecoder))}readClient(){return B(this.restDecoder)}readInfo(){return Mt(this.restDecoder)}readString(){return Tt(this.restDecoder)}readParentInfo(){return B(this.restDecoder)===1}readTypeRef(){return B(this.restDecoder)}readLen(){return B(this.restDecoder)}readAny(){return sn(this.restDecoder)}readBuf(){return Xf(be(this.restDecoder))}readJSON(){return JSON.parse(Tt(this.restDecoder))}readKey(){return Tt(this.restDecoder)}}class wh{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=B(this.restDecoder),this.dsCurrVal}readDsLen(){const e=B(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class qn extends wh{constructor(e){super(e),this.keys=[],B(e),this.keyClockDecoder=new ks(be(e)),this.clientDecoder=new Rn(be(e)),this.leftClockDecoder=new ks(be(e)),this.rightClockDecoder=new ks(be(e)),this.infoDecoder=new Kr(be(e),Mt),this.stringDecoder=new Df(be(e)),this.parentInfoDecoder=new Kr(be(e),Mt),this.typeRefDecoder=new Rn(be(e)),this.lenDecoder=new Rn(be(e))}readLeftID(){return new Dt(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Dt(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return sn(this.restDecoder)}readBuf(){return be(this.restDecoder)}readJSON(){return sn(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class bh{constructor(){this.restEncoder=Qn()}toUint8Array(){return Pe(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){Y(this.restEncoder,e)}writeDsLen(e){Y(this.restEncoder,e)}}class yh extends bh{writeLeftID(e){Y(this.restEncoder,e.client),Y(this.restEncoder,e.clock)}writeRightID(e){Y(this.restEncoder,e.client),Y(this.restEncoder,e.clock)}writeClient(e){Y(this.restEncoder,e)}writeInfo(e){Vs(this.restEncoder,e)}writeString(e){Rt(this.restEncoder,e)}writeParentInfo(e){Y(this.restEncoder,e?1:0)}writeTypeRef(e){Y(this.restEncoder,e)}writeLen(e){Y(this.restEncoder,e)}writeAny(e){nn(this.restEncoder,e)}writeBuf(e){we(this.restEncoder,e)}writeJSON(e){Rt(this.restEncoder,JSON.stringify(e))}writeKey(e){Rt(this.restEncoder,e)}}class vh{constructor(){this.restEncoder=Qn(),this.dsCurrVal=0}toUint8Array(){return Pe(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const n=e-this.dsCurrVal;this.dsCurrVal=e,Y(this.restEncoder,n)}writeDsLen(e){e===0&&je(),Y(this.restEncoder,e-1),this.dsCurrVal+=e}}class es extends vh{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new xs,this.clientEncoder=new On,this.leftClockEncoder=new xs,this.rightClockEncoder=new xs,this.infoEncoder=new zr(Vs),this.stringEncoder=new xf,this.parentInfoEncoder=new zr(Vs),this.typeRefEncoder=new On,this.lenEncoder=new On}toUint8Array(){const e=Qn();return Y(e,0),we(e,this.keyClockEncoder.toUint8Array()),we(e,this.clientEncoder.toUint8Array()),we(e,this.leftClockEncoder.toUint8Array()),we(e,this.rightClockEncoder.toUint8Array()),we(e,Pe(this.infoEncoder)),we(e,this.stringEncoder.toUint8Array()),we(e,Pe(this.parentInfoEncoder)),we(e,this.typeRefEncoder.toUint8Array()),we(e,this.lenEncoder.toUint8Array()),Kn(e,Pe(this.restEncoder)),Pe(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){nn(this.restEncoder,e)}writeBuf(e){we(this.restEncoder,e)}writeJSON(e){nn(this.restEncoder,e)}writeKey(e){const n=this.keyMap.get(e);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(n)}}const _h=(t,e,n,s)=>{s=jt(s,e[0].id.clock);const r=qe(e,s);Y(t.restEncoder,e.length-r),t.writeClient(n),Y(t.restEncoder,s);const i=e[r];i.write(t,s-i.id.clock);for(let l=r+1;l<e.length;l++)e[l].write(t,0)},wl=(t,e,n)=>{const s=new Map;n.forEach((r,i)=>{re(e,i)>r&&s.set(i,r)}),yr(e).forEach((r,i)=>{n.has(i)||s.set(i,0)}),Y(t.restEncoder,s.size),gt(s.entries()).sort((r,i)=>i[0]-r[0]).forEach(([r,i])=>{_h(t,e.clients.get(r),r,i)})},Sh=(t,e)=>{const n=Oe(),s=B(t.restDecoder);for(let r=0;r<s;r++){const i=B(t.restDecoder),l=new Array(i),o=t.readClient();let a=B(t.restDecoder);n.set(o,{i:0,refs:l});for(let c=0;c<i;c++){const u=t.readInfo();switch(Gn&u){case 0:{const d=t.readLen();l[c]=new ke(V(o,a),d),a+=d;break}case 10:{const d=B(t.restDecoder);l[c]=new Ae(V(o,a),d),a+=d;break}default:{const d=(u&(He|ve))===0,f=new Z(V(o,a),null,(u&ve)===ve?t.readLeftID():null,null,(u&He)===He?t.readRightID():null,d?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,d&&(u&en)===en?t.readString():null,Fl(t,u));l[c]=f,a+=f.length}}}}return n},xh=(t,e,n)=>{const s=[];let r=gt(n.keys()).sort((h,g)=>h-g);if(r.length===0)return null;const i=()=>{if(r.length===0)return null;let h=n.get(r[r.length-1]);for(;h.refs.length===h.i;)if(r.pop(),r.length>0)h=n.get(r[r.length-1]);else return null;return h};let l=i();if(l===null)return null;const o=new vl,a=new Map,c=(h,g)=>{const p=a.get(h);(p==null||p>g)&&a.set(h,g)};let u=l.refs[l.i++];const d=new Map,f=()=>{for(const h of s){const g=h.id.client,p=n.get(g);p?(p.i--,o.clients.set(g,p.refs.slice(p.i)),n.delete(g),p.i=0,p.refs=[]):o.clients.set(g,[h]),r=r.filter(y=>y!==g)}s.length=0};for(;;){if(u.constructor!==Ae){const g=at(d,u.id.client,()=>re(e,u.id.client))-u.id.clock;if(g<0)s.push(u),c(u.id.client,u.id.clock-1),f();else{const p=u.getMissing(t,e);if(p!==null){s.push(u);const y=n.get(p)||{refs:[],i:0};if(y.refs.length===y.i)c(p,re(e,p)),f();else{u=y.refs[y.i++];continue}}else(g===0||g<u.length)&&(u.integrate(t,g),d.set(u.id.client,u.id.clock+u.length))}}if(s.length>0)u=s.pop();else if(l!==null&&l.i<l.refs.length)u=l.refs[l.i++];else{if(l=i(),l===null)break;u=l.refs[l.i++]}}if(o.clients.size>0){const h=new es;return wl(h,o,new Map),Y(h.restEncoder,0),{missing:a,update:h.toUint8Array()}}return null},kh=(t,e)=>wl(t,e.doc.store,e.beforeState),Ch=(t,e,n,s=new qn(t))=>K(e,r=>{r.local=!1;let i=!1;const l=r.doc,o=l.store,a=Sh(s,l),c=xh(r,o,a),u=o.pendingStructs;if(u){for(const[f,h]of u.missing)if(h<re(o,f)){i=!0;break}if(c){for(const[f,h]of c.missing){const g=u.missing.get(f);(g==null||g>h)&&u.missing.set(f,h)}u.update=ai([u.update,c.update])}}else o.pendingStructs=c;const d=ti(s,r,o);if(o.pendingDs){const f=new qn(fr(o.pendingDs));B(f.restDecoder);const h=ti(f,r,o);d&&h?o.pendingDs=ai([d,h]):o.pendingDs=d||h}else o.pendingDs=d;if(i){const f=o.pendingStructs.update;o.pendingStructs=null,bl(r.doc,f)}},n,!1),bl=(t,e,n,s=qn)=>{const r=fr(e);Ch(r,t,n,new s(r))},$h=(t,e,n)=>bl(t,e,n,ph);class Eh{constructor(){this.l=[]}}const ni=()=>new Eh,si=(t,e)=>t.l.push(e),ri=(t,e)=>{const n=t.l,s=n.length;t.l=n.filter(r=>e!==r),s===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},yl=(t,e,n)=>mr(t.l,[e,n]);class Dt{constructor(e,n){this.client=e,this.clock=n}}const yn=(t,e)=>t===e||t!==null&&e!==null&&t.client===e.client&&t.clock===e.clock,V=(t,e)=>new Dt(t,e),Ah=t=>{for(const[e,n]of t.doc.share.entries())if(n===t)return e;throw je()},Et=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!ml(e.ds,t.id),Js=(t,e)=>{const n=at(t.meta,Js,Pt),s=t.doc.store;n.has(e)||(e.sv.forEach((r,i)=>{r<re(s,i)&&ot(t,V(i,r))}),gl(t,e.ds,r=>{}),n.add(e))};class vl{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const yr=t=>{const e=new Map;return t.clients.forEach((n,s)=>{const r=n[n.length-1];e.set(s,r.id.clock+r.length)}),e},re=(t,e)=>{const n=t.clients.get(e);if(n===void 0)return 0;const s=n[n.length-1];return s.id.clock+s.length},_l=(t,e)=>{let n=t.clients.get(e.id.client);if(n===void 0)n=[],t.clients.set(e.id.client,n);else{const s=n[n.length-1];if(s.id.clock+s.length!==e.id.clock)throw je()}n.push(e)},qe=(t,e)=>{let n=0,s=t.length-1,r=t[s],i=r.id.clock;if(i===e)return s;let l=it(e/(i+r.length-1)*s);for(;n<=s;){if(r=t[l],i=r.id.clock,i<=e){if(e<i+r.length)return l;n=l+1}else s=l-1;l=it((n+s)/2)}throw je()},Oh=(t,e)=>{const n=t.clients.get(e.client);return n[qe(n,e.clock)]},$s=Oh,Hs=(t,e,n)=>{const s=qe(e,n),r=e[s];return r.id.clock<n&&r instanceof Z?(e.splice(s+1,0,Jn(t,r,n-r.id.clock)),s+1):s},ot=(t,e)=>{const n=t.doc.store.clients.get(e.client);return n[Hs(t,n,e.clock)]},ii=(t,e,n)=>{const s=e.clients.get(n.client),r=qe(s,n.clock),i=s[r];return n.clock!==i.id.clock+i.length-1&&i.constructor!==ke&&s.splice(r+1,0,Jn(t,i,n.clock-i.id.clock+1)),i},Rh=(t,e,n)=>{const s=t.clients.get(e.id.client);s[qe(s,e.id.clock)]=n},Sl=(t,e,n,s,r)=>{if(s===0)return;const i=n+s;let l=Hs(t,e,n),o;do o=e[l++],i<o.id.clock+o.length&&Hs(t,e,i),r(o);while(l<e.length&&e[l].id.clock<i)};class Th{constructor(e,n,s){this.doc=e,this.deleteSet=new Zn,this.beforeState=yr(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=s,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const li=(t,e)=>e.deleteSet.clients.size===0&&!ef(e.afterState,(n,s)=>e.beforeState.get(s)!==n)?!1:(wr(e.deleteSet),kh(t,e),br(t,e.deleteSet),!0),oi=(t,e,n)=>{const s=e._item;(s===null||s.id.clock<(t.beforeState.get(s.id.client)||0)&&!s.deleted)&&at(t.changed,e,Pt).add(n)},Tn=(t,e)=>{let n=t[e],s=t[e-1],r=e;for(;r>0;n=s,s=t[--r-1]){if(s.deleted===n.deleted&&s.constructor===n.constructor&&s.mergeWith(n)){n instanceof Z&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,s);continue}break}const i=e-r;return i&&t.splice(e+1-i,i),i},Dh=(t,e,n)=>{for(const[s,r]of t.clients.entries()){const i=e.clients.get(s);for(let l=r.length-1;l>=0;l--){const o=r[l],a=o.clock+o.len;for(let c=qe(i,o.clock),u=i[c];c<i.length&&u.id.clock<a;u=i[++c]){const d=i[c];if(o.clock+o.len<=d.id.clock)break;d instanceof Z&&d.deleted&&!d.keep&&n(d)&&d.gc(e,!1)}}}},Lh=(t,e)=>{t.clients.forEach((n,s)=>{const r=e.clients.get(s);for(let i=n.length-1;i>=0;i--){const l=n[i],o=Ki(r.length-1,1+qe(r,l.clock+l.len-1));for(let a=o,c=r[a];a>0&&c.id.clock>=l.clock;c=r[a])a-=1+Tn(r,a)}})},xl=(t,e)=>{if(e<t.length){const n=t[e],s=n.doc,r=s.store,i=n.deleteSet,l=n._mergeStructs;try{wr(i),n.afterState=yr(n.doc.store),s.emit("beforeObserverCalls",[n,s]);const o=[];n.changed.forEach((a,c)=>o.push(()=>{(c._item===null||!c._item.deleted)&&c._callObserver(n,a)})),o.push(()=>{n.changedParentTypes.forEach((a,c)=>{c._dEH.l.length>0&&(c._item===null||!c._item.deleted)&&(a=a.filter(u=>u.target._item===null||!u.target._item.deleted),a.forEach(u=>{u.currentTarget=c,u._path=null}),a.sort((u,d)=>u.path.length-d.path.length),yl(c._dEH,a,n))})}),o.push(()=>s.emit("afterTransaction",[n,s])),mr(o,[]),n._needFormattingCleanup&&Xh(n)}finally{s.gc&&Dh(i,r,s.gcFilter),Lh(i,r),n.afterState.forEach((u,d)=>{const f=n.beforeState.get(d)||0;if(f!==u){const h=r.clients.get(d),g=jt(qe(h,f),1);for(let p=h.length-1;p>=g;)p-=1+Tn(h,p)}});for(let u=l.length-1;u>=0;u--){const{client:d,clock:f}=l[u].id,h=r.clients.get(d),g=qe(h,f);g+1<h.length&&Tn(h,g+1)>1||g>0&&Tn(h,g)}if(!n.local&&n.afterState.get(s.clientID)!==n.beforeState.get(s.clientID)&&(ch(pr,ol,"[yjs] ",al,cl,"Changed the client-id because another client seems to be using it."),s.clientID=pl()),s.emit("afterTransactionCleanup",[n,s]),s._observers.has("update")){const u=new yh;li(u,n)&&s.emit("update",[u.toUint8Array(),n.origin,s,n])}if(s._observers.has("updateV2")){const u=new es;li(u,n)&&s.emit("updateV2",[u.toUint8Array(),n.origin,s,n])}const{subdocsAdded:o,subdocsLoaded:a,subdocsRemoved:c}=n;(o.size>0||c.size>0||a.size>0)&&(o.forEach(u=>{u.clientID=s.clientID,u.collectionid==null&&(u.collectionid=s.collectionid),s.subdocs.add(u)}),c.forEach(u=>s.subdocs.delete(u)),s.emit("subdocs",[{loaded:a,added:o,removed:c},s,n]),c.forEach(u=>u.destroy())),t.length<=e+1?(s._transactionCleanups=[],s.emit("afterAllTransactions",[s,t])):xl(t,e+1)}}},K=(t,e,n=null,s=!0)=>{const r=t._transactionCleanups;let i=!1,l=null;t._transaction===null&&(i=!0,t._transaction=new Th(t,n,s),r.push(t._transaction),r.length===1&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{l=e(t._transaction)}finally{if(i){const o=t._transaction===r[0];t._transaction=null,o&&xl(r,0)}}return l};function*Nh(t){const e=B(t.restDecoder);for(let n=0;n<e;n++){const s=B(t.restDecoder),r=t.readClient();let i=B(t.restDecoder);for(let l=0;l<s;l++){const o=t.readInfo();if(o===10){const a=B(t.restDecoder);yield new Ae(V(r,i),a),i+=a}else if((Gn&o)!==0){const a=(o&(He|ve))===0,c=new Z(V(r,i),null,(o&ve)===ve?t.readLeftID():null,null,(o&He)===He?t.readRightID():null,a?t.readParentInfo()?t.readString():t.readLeftID():null,a&&(o&en)===en?t.readString():null,Fl(t,o));yield c,i+=c.length}else{const a=t.readLen();yield new ke(V(r,i),a),i+=a}}}}class Ph{constructor(e,n){this.gen=Nh(e),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===Ae);return this.curr}}class Mh{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const Uh=(t,e)=>{if(t.constructor===ke){const{client:n,clock:s}=t.id;return new ke(V(n,s+e),t.length-e)}else if(t.constructor===Ae){const{client:n,clock:s}=t.id;return new Ae(V(n,s+e),t.length-e)}else{const n=t,{client:s,clock:r}=n.id;return new Z(V(s,r+e),null,V(s,r+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},ai=(t,e=qn,n=es)=>{if(t.length===1)return t[0];const s=t.map(u=>new e(fr(u)));let r=s.map(u=>new Ph(u,!0)),i=null;const l=new n,o=new Mh(l);for(;r=r.filter(f=>f.curr!==null),r.sort((f,h)=>{if(f.curr.id.client===h.curr.id.client){const g=f.curr.id.clock-h.curr.id.clock;return g===0?f.curr.constructor===h.curr.constructor?0:f.curr.constructor===Ae?1:-1:g}else return h.curr.id.client-f.curr.id.client}),r.length!==0;){const u=r[0],d=u.curr.id.client;if(i!==null){let f=u.curr,h=!1;for(;f!==null&&f.id.clock+f.length<=i.struct.id.clock+i.struct.length&&f.id.client>=i.struct.id.client;)f=u.next(),h=!0;if(f===null||f.id.client!==d||h&&f.id.clock>i.struct.id.clock+i.struct.length)continue;if(d!==i.struct.id.client)Yt(o,i.struct,i.offset),i={struct:f,offset:0},u.next();else if(i.struct.id.clock+i.struct.length<f.id.clock)if(i.struct.constructor===Ae)i.struct.length=f.id.clock+f.length-i.struct.id.clock;else{Yt(o,i.struct,i.offset);const g=f.id.clock-i.struct.id.clock-i.struct.length;i={struct:new Ae(V(d,i.struct.id.clock+i.struct.length),g),offset:0}}else{const g=i.struct.id.clock+i.struct.length-f.id.clock;g>0&&(i.struct.constructor===Ae?i.struct.length-=g:f=Uh(f,g)),i.struct.mergeWith(f)||(Yt(o,i.struct,i.offset),i={struct:f,offset:0},u.next())}}else i={struct:u.curr,offset:0},u.next();for(let f=u.curr;f!==null&&f.id.client===d&&f.id.clock===i.struct.id.clock+i.struct.length&&f.constructor!==Ae;f=u.next())Yt(o,i.struct,i.offset),i={struct:f,offset:0}}i!==null&&(Yt(o,i.struct,i.offset),i=null),Ih(o);const a=s.map(u=>gh(u)),c=hh(a);return br(l,c),l.toUint8Array()},kl=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:Pe(t.encoder.restEncoder)}),t.encoder.restEncoder=Qn(),t.written=0)},Yt=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&kl(t),t.written===0&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),Y(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},Ih=t=>{kl(t);const e=t.encoder.restEncoder;Y(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){const s=t.clientStructs[n];Y(e,s.written),Kn(e,s.restEncoder)}},ci="You must not compute changes after the event-handler fired.";class ts{constructor(e,n){this.target=e,this.currentTarget=e,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=jh(this.currentTarget,this.target))}deletes(e){return ml(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw lt(ci);const e=new Map,n=this.target;this.transaction.changed.get(n).forEach(r=>{if(r!==null){const i=n._map.get(r);let l,o;if(this.adds(i)){let a=i.left;for(;a!==null&&this.adds(a);)a=a.left;if(this.deletes(i))if(a!==null&&this.deletes(a))l="delete",o=vs(a.content.getContent());else return;else a!==null&&this.deletes(a)?(l="update",o=vs(a.content.getContent())):(l="add",o=void 0)}else if(this.deletes(i))l="delete",o=vs(i.content.getContent());else return;e.set(r,{action:l,oldValue:o})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw lt(ci);const n=this.target,s=Pt(),r=Pt(),i=[];if(e={added:s,deleted:r,delta:i,keys:this.keys},this.transaction.changed.get(n).has(null)){let o=null;const a=()=>{o&&i.push(o)};for(let c=n._start;c!==null;c=c.right)c.deleted?this.deletes(c)&&!this.adds(c)&&((o===null||o.delete===void 0)&&(a(),o={delete:0}),o.delete+=c.length,r.add(c)):this.adds(c)?((o===null||o.insert===void 0)&&(a(),o={insert:[]}),o.insert=o.insert.concat(c.content.getContent()),s.add(c)):((o===null||o.retain===void 0)&&(a(),o={retain:0}),o.retain+=c.length);o!==null&&o.retain===void 0&&a()}this._changes=e}return e}}const jh=(t,e)=>{const n=[];for(;e._item!==null&&e!==t;){if(e._item.parentSub!==null)n.unshift(e._item.parentSub);else{let s=0,r=e._item.parent._start;for(;r!==e._item&&r!==null;)!r.deleted&&r.countable&&(s+=r.length),r=r.right;n.unshift(s)}e=e._item.parent}return n},ue=()=>{uh("Invalid access: Add Yjs type to a document before reading data.")},Cl=80;let vr=0;class qh{constructor(e,n){e.marker=!0,this.p=e,this.index=n,this.timestamp=vr++}}const Fh=t=>{t.timestamp=vr++},$l=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=vr++},Bh=(t,e,n)=>{if(t.length>=Cl){const s=t.reduce((r,i)=>r.timestamp<i.timestamp?r:i);return $l(s,e,n),s}else{const s=new qh(e,n);return t.push(s),s}},ns=(t,e)=>{if(t._start===null||e===0||t._searchMarker===null)return null;const n=t._searchMarker.length===0?null:t._searchMarker.reduce((i,l)=>An(e-i.index)<An(e-l.index)?i:l);let s=t._start,r=0;for(n!==null&&(s=n.p,r=n.index,Fh(n));s.right!==null&&r<e;){if(!s.deleted&&s.countable){if(e<r+s.length)break;r+=s.length}s=s.right}for(;s.left!==null&&r>e;)s=s.left,!s.deleted&&s.countable&&(r-=s.length);for(;s.left!==null&&s.left.id.client===s.id.client&&s.left.id.clock+s.left.length===s.id.clock;)s=s.left,!s.deleted&&s.countable&&(r-=s.length);return n!==null&&An(n.index-r)<s.parent.length/Cl?($l(n,s,r),n):Bh(t._searchMarker,s,r)},ln=(t,e,n)=>{for(let s=t.length-1;s>=0;s--){const r=t[s];if(n>0){let i=r.p;for(i.marker=!1;i&&(i.deleted||!i.countable);)i=i.left,i&&!i.deleted&&i.countable&&(r.index-=i.length);if(i===null||i.marker===!0){t.splice(s,1);continue}r.p=i,i.marker=!0}(e<r.index||n>0&&e===r.index)&&(r.index=jt(e,r.index+n))}},ss=(t,e,n)=>{const s=t,r=e.changedParentTypes;for(;at(r,t,()=>[]).push(n),t._item!==null;)t=t._item.parent;yl(s._eH,n,e)};class ie{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=ni(),this._dEH=ni(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,n){this.doc=e,this._item=n}_copy(){throw Ue()}clone(){throw Ue()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,n){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){si(this._eH,e)}observeDeep(e){si(this._dEH,e)}unobserve(e){ri(this._eH,e)}unobserveDeep(e){ri(this._dEH,e)}toJSON(){}}const El=(t,e,n)=>{t.doc??ue(),e<0&&(e=t._length+e),n<0&&(n=t._length+n);let s=n-e;const r=[];let i=t._start;for(;i!==null&&s>0;){if(i.countable&&!i.deleted){const l=i.content.getContent();if(l.length<=e)e-=l.length;else{for(let o=e;o<l.length&&s>0;o++)r.push(l[o]),s--;e=0}}i=i.right}return r},Al=t=>{t.doc??ue();const e=[];let n=t._start;for(;n!==null;){if(n.countable&&!n.deleted){const s=n.content.getContent();for(let r=0;r<s.length;r++)e.push(s[r])}n=n.right}return e},on=(t,e)=>{let n=0,s=t._start;for(t.doc??ue();s!==null;){if(s.countable&&!s.deleted){const r=s.content.getContent();for(let i=0;i<r.length;i++)e(r[i],n++,t)}s=s.right}},Ol=(t,e)=>{const n=[];return on(t,(s,r)=>{n.push(e(s,r,t))}),n},Vh=t=>{let e=t._start,n=null,s=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};n=e.content.getContent(),s=0,e=e.right}const r=n[s++];return n.length<=s&&(n=null),{done:!1,value:r}}}},Rl=(t,e)=>{t.doc??ue();const n=ns(t,e);let s=t._start;for(n!==null&&(s=n.p,e-=n.index);s!==null;s=s.right)if(!s.deleted&&s.countable){if(e<s.length)return s.content.getContent()[e];e-=s.length}},Fn=(t,e,n,s)=>{let r=n;const i=t.doc,l=i.clientID,o=i.store,a=n===null?e._start:n.right;let c=[];const u=()=>{c.length>0&&(r=new Z(V(l,re(o,l)),r,r&&r.lastId,a,a&&a.id,e,null,new pt(c)),r.integrate(t,0),c=[])};s.forEach(d=>{if(d===null)c.push(d);else switch(d.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(d);break;default:switch(u(),d.constructor){case Uint8Array:case ArrayBuffer:r=new Z(V(l,re(o,l)),r,r&&r.lastId,a,a&&a.id,e,null,new fn(new Uint8Array(d))),r.integrate(t,0);break;case qt:r=new Z(V(l,re(o,l)),r,r&&r.lastId,a,a&&a.id,e,null,new hn(d)),r.integrate(t,0);break;default:if(d instanceof ie)r=new Z(V(l,re(o,l)),r,r&&r.lastId,a,a&&a.id,e,null,new Qe(d)),r.integrate(t,0);else throw new Error("Unexpected content type in insert operation")}}}),u()},Tl=()=>lt("Length exceeded!"),Dl=(t,e,n,s)=>{if(n>e._length)throw Tl();if(n===0)return e._searchMarker&&ln(e._searchMarker,n,s.length),Fn(t,e,null,s);const r=n,i=ns(e,n);let l=e._start;for(i!==null&&(l=i.p,n-=i.index,n===0&&(l=l.prev,n+=l&&l.countable&&!l.deleted?l.length:0));l!==null;l=l.right)if(!l.deleted&&l.countable){if(n<=l.length){n<l.length&&ot(t,V(l.id.client,l.id.clock+n));break}n-=l.length}return e._searchMarker&&ln(e._searchMarker,r,s.length),Fn(t,e,l,s)},Yh=(t,e,n)=>{let r=(e._searchMarker||[]).reduce((i,l)=>l.index>i.index?l:i,{index:0,p:e._start}).p;if(r)for(;r.right;)r=r.right;return Fn(t,e,r,n)},Ll=(t,e,n,s)=>{if(s===0)return;const r=n,i=s,l=ns(e,n);let o=e._start;for(l!==null&&(o=l.p,n-=l.index);o!==null&&n>0;o=o.right)!o.deleted&&o.countable&&(n<o.length&&ot(t,V(o.id.client,o.id.clock+n)),n-=o.length);for(;s>0&&o!==null;)o.deleted||(s<o.length&&ot(t,V(o.id.client,o.id.clock+s)),o.delete(t),s-=o.length),o=o.right;if(s>0)throw Tl();e._searchMarker&&ln(e._searchMarker,r,-i+s)},Bn=(t,e,n)=>{const s=e._map.get(n);s!==void 0&&s.delete(t)},_r=(t,e,n,s)=>{const r=e._map.get(n)||null,i=t.doc,l=i.clientID;let o;if(s==null)o=new pt([s]);else switch(s.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:o=new pt([s]);break;case Uint8Array:o=new fn(s);break;case qt:o=new hn(s);break;default:if(s instanceof ie)o=new Qe(s);else throw new Error("Unexpected content type")}new Z(V(l,re(i.store,l)),r,r&&r.lastId,null,null,e,n,o).integrate(t,0)},Sr=(t,e)=>{t.doc??ue();const n=t._map.get(e);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},Nl=t=>{const e={};return t.doc??ue(),t._map.forEach((n,s)=>{n.deleted||(e[s]=n.content.getContent()[n.length-1])}),e},Pl=(t,e)=>{t.doc??ue();const n=t._map.get(e);return n!==void 0&&!n.deleted},Wh=(t,e)=>{const n={};return t._map.forEach((s,r)=>{let i=s;for(;i!==null&&(!e.sv.has(i.id.client)||i.id.clock>=(e.sv.get(i.id.client)||0));)i=i.left;i!==null&&Et(i,e)&&(n[r]=i.content.getContent()[i.length-1])}),n},vn=t=>(t.doc??ue(),dh(t._map.entries(),e=>!e[1].deleted));class Jh extends ts{}class Lt extends ie{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const n=new Lt;return n.push(e),n}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Lt}clone(){const e=new Lt;return e.insert(0,this.toArray().map(n=>n instanceof ie?n.clone():n)),e}get length(){return this.doc??ue(),this._length}_callObserver(e,n){super._callObserver(e,n),ss(this,e,new Jh(this,e))}insert(e,n){this.doc!==null?K(this.doc,s=>{Dl(s,this,e,n)}):this._prelimContent.splice(e,0,...n)}push(e){this.doc!==null?K(this.doc,n=>{Yh(n,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,n=1){this.doc!==null?K(this.doc,s=>{Ll(s,this,e,n)}):this._prelimContent.splice(e,n)}get(e){return Rl(this,e)}toArray(){return Al(this)}slice(e=0,n=this.length){return El(this,e,n)}toJSON(){return this.map(e=>e instanceof ie?e.toJSON():e)}map(e){return Ol(this,e)}forEach(e){on(this,e)}[Symbol.iterator](){return Vh(this)}_write(e){e.writeTypeRef(wg)}}const Hh=t=>new Lt;class zh extends ts{constructor(e,n,s){super(e,n),this.keysChanged=s}}class me extends ie{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,n){super._integrate(e,n),this._prelimContent.forEach((s,r)=>{this.set(r,s)}),this._prelimContent=null}_copy(){return new me}clone(){const e=new me;return this.forEach((n,s)=>{e.set(s,n instanceof ie?n.clone():n)}),e}_callObserver(e,n){ss(this,e,new zh(this,e,n))}toJSON(){this.doc??ue();const e={};return this._map.forEach((n,s)=>{if(!n.deleted){const r=n.content.getContent()[n.length-1];e[s]=r instanceof ie?r.toJSON():r}}),e}get size(){return[...vn(this)].length}keys(){return Cs(vn(this),e=>e[0])}values(){return Cs(vn(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return Cs(vn(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??ue(),this._map.forEach((n,s)=>{n.deleted||e(n.content.getContent()[n.length-1],s,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?K(this.doc,n=>{Bn(n,this,e)}):this._prelimContent.delete(e)}set(e,n){return this.doc!==null?K(this.doc,s=>{_r(s,this,e,n)}):this._prelimContent.set(e,n),n}get(e){return Sr(this,e)}has(e){return Pl(this,e)}clear(){this.doc!==null?K(this.doc,e=>{this.forEach(function(n,s,r){Bn(e,r,s)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(bg)}}const Gh=t=>new me,nt=(t,e)=>t===e||typeof t=="object"&&typeof e=="object"&&t&&e&&Wf(t,e);class zs{constructor(e,n,s,r){this.left=e,this.right=n,this.index=s,this.currentAttributes=r}forward(){switch(this.right===null&&je(),this.right.content.constructor){case ee:this.right.deleted||Ft(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const ui=(t,e,n)=>{for(;e.right!==null&&n>0;){switch(e.right.content.constructor){case ee:e.right.deleted||Ft(e.currentAttributes,e.right.content);break;default:e.right.deleted||(n<e.right.length&&ot(t,V(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},_n=(t,e,n,s)=>{const r=new Map,i=s?ns(e,n):null;if(i){const l=new zs(i.p.left,i.p,i.index,r);return ui(t,l,n-i.index)}else{const l=new zs(null,e._start,0,r);return ui(t,l,n)}},Ml=(t,e,n,s)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===ee&&nt(s.get(n.right.content.key),n.right.content.value));)n.right.deleted||s.delete(n.right.content.key),n.forward();const r=t.doc,i=r.clientID;s.forEach((l,o)=>{const a=n.left,c=n.right,u=new Z(V(i,re(r.store,i)),a,a&&a.lastId,c,c&&c.id,e,null,new ee(o,l));u.integrate(t,0),n.right=u,n.forward()})},Ft=(t,e)=>{const{key:n,value:s}=e;s===null?t.delete(n):t.set(n,s)},Ul=(t,e)=>{for(;t.right!==null;){if(!(t.right.deleted||t.right.content.constructor===ee&&nt(e[t.right.content.key]??null,t.right.content.value)))break;t.forward()}},Il=(t,e,n,s)=>{const r=t.doc,i=r.clientID,l=new Map;for(const o in s){const a=s[o],c=n.currentAttributes.get(o)??null;if(!nt(c,a)){l.set(o,c);const{left:u,right:d}=n;n.right=new Z(V(i,re(r.store,i)),u,u&&u.lastId,d,d&&d.id,e,null,new ee(o,a)),n.right.integrate(t,0),n.forward()}}return l},Es=(t,e,n,s,r)=>{n.currentAttributes.forEach((f,h)=>{r[h]===void 0&&(r[h]=null)});const i=t.doc,l=i.clientID;Ul(n,r);const o=Il(t,e,n,r),a=s.constructor===String?new Fe(s):s instanceof ie?new Qe(s):new yt(s);let{left:c,right:u,index:d}=n;e._searchMarker&&ln(e._searchMarker,n.index,a.getLength()),u=new Z(V(l,re(i.store,l)),c,c&&c.lastId,u,u&&u.id,e,null,a),u.integrate(t,0),n.right=u,n.index=d,n.forward(),Ml(t,e,n,o)},di=(t,e,n,s,r)=>{const i=t.doc,l=i.clientID;Ul(n,r);const o=Il(t,e,n,r);e:for(;n.right!==null&&(s>0||o.size>0&&(n.right.deleted||n.right.content.constructor===ee));){if(!n.right.deleted)switch(n.right.content.constructor){case ee:{const{key:a,value:c}=n.right.content,u=r[a];if(u!==void 0){if(nt(u,c))o.delete(a);else{if(s===0)break e;o.set(a,c)}n.right.delete(t)}else n.currentAttributes.set(a,c);break}default:s<n.right.length&&ot(t,V(n.right.id.client,n.right.id.clock+s)),s-=n.right.length;break}n.forward()}if(s>0){let a="";for(;s>0;s--)a+=`
`;n.right=new Z(V(l,re(i.store,l)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new Fe(a)),n.right.integrate(t,0),n.forward()}Ml(t,e,n,o)},jl=(t,e,n,s,r)=>{let i=e;const l=Oe();for(;i&&(!i.countable||i.deleted);){if(!i.deleted&&i.content.constructor===ee){const c=i.content;l.set(c.key,c)}i=i.right}let o=0,a=!1;for(;e!==i;){if(n===e&&(a=!0),!e.deleted){const c=e.content;switch(c.constructor){case ee:{const{key:u,value:d}=c,f=s.get(u)??null;(l.get(u)!==c||f===d)&&(e.delete(t),o++,!a&&(r.get(u)??null)===d&&f!==d&&(f===null?r.delete(u):r.set(u,f))),!a&&!e.deleted&&Ft(r,c);break}}}e=e.right}return o},Qh=(t,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const n=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===ee){const s=e.content.key;n.has(s)?e.delete(t):n.add(s)}e=e.left}},Kh=t=>{let e=0;return K(t.doc,n=>{let s=t._start,r=t._start,i=Oe();const l=Fs(i);for(;r;){if(r.deleted===!1)switch(r.content.constructor){case ee:Ft(l,r.content);break;default:e+=jl(n,s,r,i,l),i=Fs(l),s=r;break}r=r.right}}),e},Xh=t=>{const e=new Set,n=t.doc;for(const[s,r]of t.afterState.entries()){const i=t.beforeState.get(s)||0;r!==i&&Sl(t,n.store.clients.get(s),i,r,l=>{!l.deleted&&l.content.constructor===ee&&l.constructor!==ke&&e.add(l.parent)})}K(n,s=>{gl(t,t.deleteSet,r=>{if(r instanceof ke||!r.parent._hasFormatting||e.has(r.parent))return;const i=r.parent;r.content.constructor===ee?e.add(i):Qh(s,r)});for(const r of e)Kh(r)})},fi=(t,e,n)=>{const s=n,r=Fs(e.currentAttributes),i=e.right;for(;n>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case Qe:case yt:case Fe:n<e.right.length&&ot(t,V(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}i&&jl(t,i,e.right,r,e.currentAttributes);const l=(e.left||e.right).parent;return l._searchMarker&&ln(l._searchMarker,e.index,-s+n),e};class Zh extends ts{constructor(e,n,s){super(e,n),this.childListChanged=!1,this.keysChanged=new Set,s.forEach(r=>{r===null?this.childListChanged=!0:this.keysChanged.add(r)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,n=[];K(e,s=>{const r=new Map,i=new Map;let l=this.target._start,o=null;const a={};let c="",u=0,d=0;const f=()=>{if(o!==null){let h=null;switch(o){case"delete":d>0&&(h={delete:d}),d=0;break;case"insert":(typeof c=="object"||c.length>0)&&(h={insert:c},r.size>0&&(h.attributes={},r.forEach((g,p)=>{g!==null&&(h.attributes[p]=g)}))),c="";break;case"retain":u>0&&(h={retain:u},Bf(a)||(h.attributes=jf({},a))),u=0;break}h&&n.push(h),o=null}};for(;l!==null;){switch(l.content.constructor){case Qe:case yt:this.adds(l)?this.deletes(l)||(f(),o="insert",c=l.content.getContent()[0],f()):this.deletes(l)?(o!=="delete"&&(f(),o="delete"),d+=1):l.deleted||(o!=="retain"&&(f(),o="retain"),u+=1);break;case Fe:this.adds(l)?this.deletes(l)||(o!=="insert"&&(f(),o="insert"),c+=l.content.str):this.deletes(l)?(o!=="delete"&&(f(),o="delete"),d+=l.length):l.deleted||(o!=="retain"&&(f(),o="retain"),u+=l.length);break;case ee:{const{key:h,value:g}=l.content;if(this.adds(l)){if(!this.deletes(l)){const p=r.get(h)??null;nt(p,g)?g!==null&&l.delete(s):(o==="retain"&&f(),nt(g,i.get(h)??null)?delete a[h]:a[h]=g)}}else if(this.deletes(l)){i.set(h,g);const p=r.get(h)??null;nt(p,g)||(o==="retain"&&f(),a[h]=p)}else if(!l.deleted){i.set(h,g);const p=a[h];p!==void 0&&(nt(p,g)?p!==null&&l.delete(s):(o==="retain"&&f(),g===null?delete a[h]:a[h]=g))}l.deleted||(o==="insert"&&f(),Ft(r,l.content));break}}l=l.right}for(f();n.length>0;){const h=n[n.length-1];if(h.retain!==void 0&&h.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class Ut extends ie{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??ue(),this._length}_integrate(e,n){super._integrate(e,n);try{this._pending.forEach(s=>s())}catch(s){console.error(s)}this._pending=null}_copy(){return new Ut}clone(){const e=new Ut;return e.applyDelta(this.toDelta()),e}_callObserver(e,n){super._callObserver(e,n);const s=new Zh(this,e,n);ss(this,e,s),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??ue();let e="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===Fe&&(e+=n.content.str),n=n.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:n=!0}={}){this.doc!==null?K(this.doc,s=>{const r=new zs(null,this._start,0,new Map);for(let i=0;i<e.length;i++){const l=e[i];if(l.insert!==void 0){const o=!n&&typeof l.insert=="string"&&i===e.length-1&&r.right===null&&l.insert.slice(-1)===`
`?l.insert.slice(0,-1):l.insert;(typeof o!="string"||o.length>0)&&Es(s,this,r,o,l.attributes||{})}else l.retain!==void 0?di(s,this,r,l.retain,l.attributes||{}):l.delete!==void 0&&fi(s,r,l.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,n,s){this.doc??ue();const r=[],i=new Map,l=this.doc;let o="",a=this._start;function c(){if(o.length>0){const d={};let f=!1;i.forEach((g,p)=>{f=!0,d[p]=g});const h={insert:o};f&&(h.attributes=d),r.push(h),o=""}}const u=()=>{for(;a!==null;){if(Et(a,e)||n!==void 0&&Et(a,n))switch(a.content.constructor){case Fe:{const d=i.get("ychange");e!==void 0&&!Et(a,e)?(d===void 0||d.user!==a.id.client||d.type!=="removed")&&(c(),i.set("ychange",s?s("removed",a.id):{type:"removed"})):n!==void 0&&!Et(a,n)?(d===void 0||d.user!==a.id.client||d.type!=="added")&&(c(),i.set("ychange",s?s("added",a.id):{type:"added"})):d!==void 0&&(c(),i.delete("ychange")),o+=a.content.str;break}case Qe:case yt:{c();const d={insert:a.content.getContent()[0]};if(i.size>0){const f={};d.attributes=f,i.forEach((h,g)=>{f[g]=h})}r.push(d);break}case ee:Et(a,e)&&(c(),Ft(i,a.content));break}a=a.right}c()};return e||n?K(l,d=>{e&&Js(d,e),n&&Js(d,n),u()},"cleanup"):u(),r}insert(e,n,s){if(n.length<=0)return;const r=this.doc;r!==null?K(r,i=>{const l=_n(i,this,e,!s);s||(s={},l.currentAttributes.forEach((o,a)=>{s[a]=o})),Es(i,this,l,n,s)}):this._pending.push(()=>this.insert(e,n,s))}insertEmbed(e,n,s){const r=this.doc;r!==null?K(r,i=>{const l=_n(i,this,e,!s);Es(i,this,l,n,s||{})}):this._pending.push(()=>this.insertEmbed(e,n,s||{}))}delete(e,n){if(n===0)return;const s=this.doc;s!==null?K(s,r=>{fi(r,_n(r,this,e,!0),n)}):this._pending.push(()=>this.delete(e,n))}format(e,n,s){if(n===0)return;const r=this.doc;r!==null?K(r,i=>{const l=_n(i,this,e,!1);l.right!==null&&di(i,this,l,n,s)}):this._pending.push(()=>this.format(e,n,s))}removeAttribute(e){this.doc!==null?K(this.doc,n=>{Bn(n,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,n){this.doc!==null?K(this.doc,s=>{_r(s,this,e,n)}):this._pending.push(()=>this.setAttribute(e,n))}getAttribute(e){return Sr(this,e)}getAttributes(){return Nl(this)}_write(e){e.writeTypeRef(yg)}}const eg=t=>new Ut;class As{constructor(e,n=()=>!0){this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??ue()}[Symbol.iterator](){return this}next(){let e=this._currentNode,n=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(n)))do if(n=e.content.type,!e.deleted&&(n.constructor===It||n.constructor===mt)&&n._start!==null)e=n._start;else for(;e!==null;){const s=e.next;if(s!==null){e=s;break}else e.parent===this._root?e=null:e=e.parent._item}while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class mt extends ie{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new mt}clone(){const e=new mt;return e.insert(0,this.toArray().map(n=>n instanceof ie?n.clone():n)),e}get length(){return this.doc??ue(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new As(this,e)}querySelector(e){e=e.toUpperCase();const s=new As(this,r=>r.nodeName&&r.nodeName.toUpperCase()===e).next();return s.done?null:s.value}querySelectorAll(e){return e=e.toUpperCase(),gt(new As(this,n=>n.nodeName&&n.nodeName.toUpperCase()===e))}_callObserver(e,n){ss(this,e,new sg(this,n,e))}toString(){return Ol(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,n={},s){const r=e.createDocumentFragment();return s!==void 0&&s._createAssociation(r,this),on(this,i=>{r.insertBefore(i.toDOM(e,n,s),null)}),r}insert(e,n){this.doc!==null?K(this.doc,s=>{Dl(s,this,e,n)}):this._prelimContent.splice(e,0,...n)}insertAfter(e,n){if(this.doc!==null)K(this.doc,s=>{const r=e&&e instanceof ie?e._item:e;Fn(s,this,r,n)});else{const s=this._prelimContent,r=e===null?0:s.findIndex(i=>i===e)+1;if(r===0&&e!==null)throw lt("Reference item not found");s.splice(r,0,...n)}}delete(e,n=1){this.doc!==null?K(this.doc,s=>{Ll(s,this,e,n)}):this._prelimContent.splice(e,n)}toArray(){return Al(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return Rl(this,e)}slice(e=0,n=this.length){return El(this,e,n)}forEach(e){on(this,e)}_write(e){e.writeTypeRef(_g)}}const tg=t=>new mt;class It extends mt{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,n){super._integrate(e,n),this._prelimAttrs.forEach((s,r)=>{this.setAttribute(r,s)}),this._prelimAttrs=null}_copy(){return new It(this.nodeName)}clone(){const e=new It(this.nodeName),n=this.getAttributes();return Ff(n,(s,r)=>{typeof s=="string"&&e.setAttribute(r,s)}),e.insert(0,this.toArray().map(s=>s instanceof ie?s.clone():s)),e}toString(){const e=this.getAttributes(),n=[],s=[];for(const o in e)s.push(o);s.sort();const r=s.length;for(let o=0;o<r;o++){const a=s[o];n.push(a+'="'+e[a]+'"')}const i=this.nodeName.toLocaleLowerCase(),l=n.length>0?" "+n.join(" "):"";return`<${i}${l}>${super.toString()}</${i}>`}removeAttribute(e){this.doc!==null?K(this.doc,n=>{Bn(n,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,n){this.doc!==null?K(this.doc,s=>{_r(s,this,e,n)}):this._prelimAttrs.set(e,n)}getAttribute(e){return Sr(this,e)}hasAttribute(e){return Pl(this,e)}getAttributes(e){return e?Wh(this,e):Nl(this)}toDOM(e=document,n={},s){const r=e.createElement(this.nodeName),i=this.getAttributes();for(const l in i){const o=i[l];typeof o=="string"&&r.setAttribute(l,o)}return on(this,l=>{r.appendChild(l.toDOM(e,n,s))}),s!==void 0&&s._createAssociation(r,this),r}_write(e){e.writeTypeRef(vg),e.writeKey(this.nodeName)}}const ng=t=>new It(t.readKey());class sg extends ts{constructor(e,n,s){super(e,s),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(r=>{r===null?this.childListChanged=!0:this.attributesChanged.add(r)})}}class Vn extends me{constructor(e){super(),this.hookName=e}_copy(){return new Vn(this.hookName)}clone(){const e=new Vn(this.hookName);return this.forEach((n,s)=>{e.set(s,n)}),e}toDOM(e=document,n={},s){const r=n[this.hookName];let i;return r!==void 0?i=r.createDom(this):i=document.createElement(this.hookName),i.setAttribute("data-yjs-hook",this.hookName),s!==void 0&&s._createAssociation(i,this),i}_write(e){e.writeTypeRef(Sg),e.writeKey(this.hookName)}}const rg=t=>new Vn(t.readKey());class Yn extends Ut{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new Yn}clone(){const e=new Yn;return e.applyDelta(this.toDelta()),e}toDOM(e=document,n,s){const r=e.createTextNode(this.toString());return s!==void 0&&s._createAssociation(r,this),r}toString(){return this.toDelta().map(e=>{const n=[];for(const r in e.attributes){const i=[];for(const l in e.attributes[r])i.push({key:l,value:e.attributes[r][l]});i.sort((l,o)=>l.key<o.key?-1:1),n.push({nodeName:r,attrs:i})}n.sort((r,i)=>r.nodeName<i.nodeName?-1:1);let s="";for(let r=0;r<n.length;r++){const i=n[r];s+=`<${i.nodeName}`;for(let l=0;l<i.attrs.length;l++){const o=i.attrs[l];s+=` ${o.key}="${o.value}"`}s+=">"}s+=e.insert;for(let r=n.length-1;r>=0;r--)s+=`</${n[r].nodeName}>`;return s}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(xg)}}const ig=t=>new Yn;class xr{constructor(e,n){this.id=e,this.length=n}get deleted(){throw Ue()}mergeWith(e){return!1}write(e,n,s){throw Ue()}integrate(e,n){throw Ue()}}const lg=0;class ke extends xr{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){n>0&&(this.id.clock+=n,this.length-=n),_l(e.doc.store,this)}write(e,n){e.writeInfo(lg),e.writeLen(this.length-n)}getMissing(e,n){return null}}class fn{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new fn(this.content)}splice(e){throw Ue()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeBuf(this.content)}getRef(){return 3}}const og=t=>new fn(t.readBuf());class an{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new an(this.len)}splice(e){const n=new an(this.len-e);return this.len=e,n}mergeWith(e){return this.len+=e.len,!0}integrate(e,n){jn(e.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(e){}gc(e){}write(e,n){e.writeLen(this.len-n)}getRef(){return 1}}const ag=t=>new an(t.readLen()),ql=(t,e)=>new qt({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class hn{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const n={};this.opts=n,e.gc||(n.gc=!1),e.autoLoad&&(n.autoLoad=!0),e.meta!==null&&(n.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new hn(ql(this.doc.guid,this.opts))}splice(e){throw Ue()}mergeWith(e){return!1}integrate(e,n){this.doc._item=n,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,n){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const cg=t=>new hn(ql(t.readString(),t.readAny()));class yt{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new yt(this.embed)}splice(e){throw Ue()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeJSON(this.embed)}getRef(){return 5}}const ug=t=>new yt(t.readJSON());class ee{constructor(e,n){this.key=e,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new ee(this.key,this.value)}splice(e){throw Ue()}mergeWith(e){return!1}integrate(e,n){const s=n.parent;s._searchMarker=null,s._hasFormatting=!0}delete(e){}gc(e){}write(e,n){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const dg=t=>new ee(t.readKey(),t.readJSON());class Wn{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Wn(this.arr)}splice(e){const n=new Wn(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const s=this.arr.length;e.writeLen(s-n);for(let r=n;r<s;r++){const i=this.arr[r];e.writeString(i===void 0?"undefined":JSON.stringify(i))}}getRef(){return 2}}const fg=t=>{const e=t.readLen(),n=[];for(let s=0;s<e;s++){const r=t.readString();r==="undefined"?n.push(void 0):n.push(JSON.parse(r))}return new Wn(n)},hg=In("node_env")==="development";class pt{constructor(e){this.arr=e,hg&&rl(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new pt(this.arr)}splice(e){const n=new pt(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const s=this.arr.length;e.writeLen(s-n);for(let r=n;r<s;r++){const i=this.arr[r];e.writeAny(i)}}getRef(){return 8}}const gg=t=>{const e=t.readLen(),n=[];for(let s=0;s<e;s++)n.push(t.readAny());return new pt(n)};class Fe{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Fe(this.str)}splice(e){const n=new Fe(this.str.slice(e));this.str=this.str.slice(0,e);const s=this.str.charCodeAt(e-1);return s>=55296&&s<=56319&&(this.str=this.str.slice(0,e-1)+"",n.str=""+n.str.slice(1)),n}mergeWith(e){return this.str+=e.str,!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const mg=t=>new Fe(t.readString()),pg=[Hh,Gh,eg,ng,tg,rg,ig],wg=0,bg=1,yg=2,vg=3,_g=4,Sg=5,xg=6;class Qe{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Qe(this.type._copy())}splice(e){throw Ue()}mergeWith(e){return!1}integrate(e,n){this.type._integrate(e.doc,n)}delete(e){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e),n=n.right;this.type._map.forEach(s=>{s.deleted?s.id.clock<(e.beforeState.get(s.id.client)||0)&&e._mergeStructs.push(s):s.delete(e)}),e.changed.delete(this.type)}gc(e){let n=this.type._start;for(;n!==null;)n.gc(e,!0),n=n.right;this.type._start=null,this.type._map.forEach(s=>{for(;s!==null;)s.gc(e,!0),s=s.left}),this.type._map=new Map}write(e,n){this.type._write(e)}getRef(){return 7}}const kg=t=>new Qe(pg[t.readTypeRef()](t)),Jn=(t,e,n)=>{const{client:s,clock:r}=e.id,i=new Z(V(s,r+n),e,V(s,r+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&i.markDeleted(),e.keep&&(i.keep=!0),e.redone!==null&&(i.redone=V(e.redone.client,e.redone.clock+n)),e.right=i,i.right!==null&&(i.right.left=i),t._mergeStructs.push(i),i.parentSub!==null&&i.right===null&&i.parent._map.set(i.parentSub,i),e.length=n,i};class Z extends xr{constructor(e,n,s,r,i,l,o,a){super(e,a.getLength()),this.origin=s,this.left=n,this.right=r,this.rightOrigin=i,this.parent=l,this.parentSub=o,this.redone=null,this.content=a,this.info=this.content.isCountable()?Wr:0}set marker(e){(this.info&Ss)>0!==e&&(this.info^=Ss)}get marker(){return(this.info&Ss)>0}get keep(){return(this.info&Yr)>0}set keep(e){this.keep!==e&&(this.info^=Yr)}get countable(){return(this.info&Wr)>0}get deleted(){return(this.info&_s)>0}set deleted(e){this.deleted!==e&&(this.info^=_s)}markDeleted(){this.info|=_s}getMissing(e,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=re(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=re(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Dt&&this.id.client!==this.parent.client&&this.parent.clock>=re(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=ii(e,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=ot(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===ke||this.right&&this.right.constructor===ke)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===Z?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===Z&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===Dt){const s=$s(n,this.parent);s.constructor===ke?this.parent=null:this.parent=s.content.type}return null}integrate(e,n){if(n>0&&(this.id.clock+=n,this.left=ii(e,e.doc.store,V(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let s=this.left,r;if(s!==null)r=s.right;else if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start;const i=new Set,l=new Set;for(;r!==null&&r!==this.right;){if(l.add(r),i.add(r),yn(this.origin,r.origin)){if(r.id.client<this.id.client)s=r,i.clear();else if(yn(this.rightOrigin,r.rightOrigin))break}else if(r.origin!==null&&l.has($s(e.doc.store,r.origin)))i.has($s(e.doc.store,r.origin))||(s=r,i.clear());else break;r=r.right}this.left=s}if(this.left!==null){const s=this.left.right;this.right=s,this.left.right=this}else{let s;if(this.parentSub!==null)for(s=this.parent._map.get(this.parentSub)||null;s!==null&&s.left!==null;)s=s.left;else s=this.parent._start,this.parent._start=this;this.right=s}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),_l(e.doc.store,this),this.content.integrate(e,this),oi(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new ke(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:V(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&yn(e.origin,this.lastId)&&this.right===e&&yn(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const n=this.parent._searchMarker;return n&&n.forEach(s=>{s.p===e&&(s.p=this,!this.deleted&&this.countable&&(s.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),jn(e.deleteSet,this.id.client,this.id.clock,this.length),oi(e,n,this.parentSub),this.content.delete(e)}}gc(e,n){if(!this.deleted)throw je();this.content.gc(e),n?Rh(e,this,new ke(this.id,this.length)):this.content=new an(this.length)}write(e,n){const s=n>0?V(this.id.client,this.id.clock+n-1):this.origin,r=this.rightOrigin,i=this.parentSub,l=this.content.getRef()&Gn|(s===null?0:ve)|(r===null?0:He)|(i===null?0:en);if(e.writeInfo(l),s!==null&&e.writeLeftID(s),r!==null&&e.writeRightID(r),s===null&&r===null){const o=this.parent;if(o._item!==void 0){const a=o._item;if(a===null){const c=Ah(o);e.writeParentInfo(!0),e.writeString(c)}else e.writeParentInfo(!1),e.writeLeftID(a.id)}else o.constructor===String?(e.writeParentInfo(!0),e.writeString(o)):o.constructor===Dt?(e.writeParentInfo(!1),e.writeLeftID(o)):je();i!==null&&e.writeString(i)}this.content.write(e,n)}}const Fl=(t,e)=>Cg[e&Gn](t),Cg=[()=>{je()},ag,fg,og,mg,ug,dg,kg,gg,cg,()=>{je()}],$g=10;class Ae extends xr{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){je()}write(e,n){e.writeInfo($g),Y(e.restEncoder,this.length-n)}getMissing(e,n){return null}}const Bl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},Vl="__ $YJS$ __";Bl[Vl]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");Bl[Vl]=!0;const Eg="https://www.corates.org";function Yl(t){const[e,n]=P(!1),[s,r]=P(!1),[i,l]=P(null),[o,a]=P([]),[c,u]=P({});let d=null,f=null;function h(){if(!f)return;const _=f.getMap("reviews"),b=[];for(const[D,T]of _.entries()){const $=T.toJSON?T.toJSON():T,R={id:D,name:$.name||"",description:$.description||"",createdAt:$.createdAt,updatedAt:$.updatedAt,checklists:[]},M=T.get?T.get("checklists"):null;if(M&&typeof M.entries=="function")for(const[q,I]of M.entries()){const W=I.toJSON?I.toJSON():I;R.checklists.push({id:q,type:W.type||"AMSTAR2",assignedTo:W.assignedTo||null,status:W.status||"pending",createdAt:W.createdAt,updatedAt:W.updatedAt})}b.push(R)}b.sort((D,T)=>(D.createdAt||0)-(T.createdAt||0)),a(b);const S=f.getMap("meta");u(S.toJSON?S.toJSON():{})}function g(){if(d||!t)return;r(!0),l(null),f=new qt;const _=Eg.replace("http","ws")+`/api/project/${t}`;d=new WebSocket(_),d.onopen=()=>{r(!1),n(!0)},d.onmessage=b=>{try{const S=JSON.parse(b.data);if(S.type==="sync"||S.type==="update"){const D=new Uint8Array(S.update);$h(f,D),h()}else S.type==="error"&&l(S.message)}catch(S){console.error("Error parsing WebSocket message:",S)}},d.onclose=()=>{n(!1),r(!1)},d.onerror=b=>{console.error("WebSocket error:",b),l("Connection error"),n(!1),r(!1)},f.on("update",(b,S)=>{S!=="remote"&&d&&d.readyState===WebSocket.OPEN&&d.send(JSON.stringify({type:"update",update:Array.from(b)})),h()})}function p(){d&&(d.close(),d=null),f&&(f.destroy(),f=null),n(!1)}function y(_,b=""){if(!f||!e())return null;const S=crypto.randomUUID(),D=Date.now(),T=f.getMap("reviews"),$=new me;return $.set("name",_),$.set("description",b),$.set("createdAt",D),$.set("updatedAt",D),$.set("checklists",new me),T.set(S,$),S}function O(_,b){if(!f||!e())return;const D=f.getMap("reviews").get(_);D&&(b.name!==void 0&&D.set("name",b.name),b.description!==void 0&&D.set("description",b.description),D.set("updatedAt",Date.now()))}function C(_){if(!f||!e())return;f.getMap("reviews").delete(_)}function E(_,b="AMSTAR2",S=null){if(!f||!e())return null;const T=f.getMap("reviews").get(_);if(!T)return null;let $=T.get("checklists");$||($=new me,T.set("checklists",$));const R=crypto.randomUUID(),M=Date.now();let q={};if(b==="AMSTAR2"){const G=Gi({id:R,name:`${b} Checklist`,createdAt:M});Object.entries(G).forEach(([Q,le])=>{/^q\d+[a-z]*$/i.test(Q)&&(q[Q]=le)})}const I=new me;I.set("type",b),I.set("assignedTo",S),I.set("status","pending"),I.set("createdAt",M),I.set("updatedAt",M);const W=new me;return Object.entries(q).forEach(([G,Q])=>{const le=new me;le.set("answers",Q.answers),le.set("critical",Q.critical),W.set(G,le)}),I.set("answers",W),$.set(R,I),T.set("updatedAt",M),R}function v(_,b,S){if(!f||!e())return;const T=f.getMap("reviews").get(_);if(!T)return;const $=T.get("checklists");if(!$)return;const R=$.get(b);R&&(S.title!==void 0&&R.set("title",S.title),S.assignedTo!==void 0&&R.set("assignedTo",S.assignedTo),S.status!==void 0&&R.set("status",S.status),R.set("updatedAt",Date.now()))}function L(_,b){if(!f||!e())return;const D=f.getMap("reviews").get(_);if(!D)return;const T=D.get("checklists");T&&(T.delete(b),D.set("updatedAt",Date.now()))}function k(_,b){if(!f)return null;const D=f.getMap("reviews").get(_);if(!D)return null;const T=D.get("checklists");if(!T)return null;const $=T.get(b);return $?$.get("answers"):null}function N(_,b){if(!f)return null;const D=f.getMap("reviews").get(_);if(!D)return null;const T=D.get("checklists");if(!T)return null;const $=T.get(b);if(!$)return null;const R=$.toJSON?$.toJSON():{},M={},q=$.get("answers");if(q&&typeof q.entries=="function")for(const[I,W]of q.entries()){const G=W.toJSON?W.toJSON():W;M[I]=G}return{...R,answers:M}}function x(_,b,S,D){if(!f||!e())return;const $=f.getMap("reviews").get(_);if(!$)return;const R=$.get("checklists");if(!R)return;const M=R.get(b);if(!M)return;let q=M.get("answers");q||(q=new me,M.set("answers",q));const I=new me;I.set("answers",D.answers),I.set("critical",D.critical),q.set(S,I),M.set("updatedAt",Date.now())}return de(()=>{t&&g()}),_e(()=>{p()}),{connected:e,connecting:s,error:i,reviews:o,meta:c,members:()=>[],createReview:y,updateReview:O,deleteReview:C,createChecklist:E,updateChecklist:v,deleteChecklist:L,getChecklistAnswersMap:k,getChecklistData:N,updateChecklistAnswer:x,connect:g,disconnect:p}}var Ag=A("<span>"),Og=A('<span class="mx-2 text-gray-400">/'),Rg=A('<span class="ml-auto flex items-center gap-1 text-green-600 text-sm"><div class="w-2 h-2 bg-green-500 rounded-full"></div>Synced'),Tg=A('<span class="ml-auto flex items-center gap-1 text-yellow-600 text-sm"><div class="w-2 h-2 bg-yellow-500 rounded-full animate-pulse"></div>Connecting...'),Dg=A('<div class="bg-red-50 border border-red-200 rounded-lg p-4 text-red-700 mb-4">Error: '),Lg=A('<div class="min-h-screen bg-blue-50"><div class="p-4 max-w-5xl mx-auto"><div class="mb-4 flex items-center gap-4"><button class="text-gray-400 hover:text-gray-700 transition-colors"><svg class="w-6 h-6"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M15 19l-7-7 7-7"></path></svg></button><div class="text-sm text-gray-600"><span class="text-gray-900 font-medium"> Checklist'),Ng=A('<div class="text-center py-12 text-gray-500">');function Pg(){const t=lr(),e=Ce(),{reviews:n,connected:s,connecting:r,error:i,updateChecklistAnswer:l,getChecklistData:o}=Yl(t.projectId),a=J(()=>n().find(f=>f.id===t.reviewId)),c=J(()=>{const f=a();return f?f.checklists?.find(h=>h.id===t.checklistId):null}),u=J(()=>{const f=c(),h=a();if(!f)return null;const g=o(t.reviewId,t.checklistId);return g?{id:f.id,name:h?.name||"Checklist",reviewerName:"",createdAt:f.createdAt,...g.answers}:null});function d(f){Object.entries(f).forEach(([h,g])=>{/^q\d+[a-z]*$/i.test(h)&&l(t.reviewId,t.checklistId,h,g)})}return(()=>{var f=Lg(),h=f.firstChild,g=h.firstChild,p=g.firstChild,y=p.nextSibling,O=y.firstChild,C=O.firstChild;return p.$$click=()=>e(`/projects/${t.projectId}`),w(y,m(F,{get when(){return a()},get children(){return[(()=>{var E=Ag();return w(E,()=>a().name),E})(),Og()]}}),O),w(O,()=>c()?.type||"AMSTAR2",C),w(g,m(F,{get when(){return s()},get children(){return Rg()}}),null),w(g,m(F,{get when(){return r()},get children(){return Tg()}}),null),w(h,m(F,{get when(){return i()},get children(){var E=Dg();return E.firstChild,w(E,i,null),E}}),null),w(h,m(F,{get when(){return u()},get fallback(){return(()=>{var E=Ng();return w(E,m(F,{get when(){return r()},fallback:"Checklist not found",children:"Loading checklist..."})),E})()},get children(){return m(Qi,{get externalChecklist(){return u()},onExternalUpdate:d})}}),null),f})()}ge(["click"]);var Mg=A('<div class="bg-blue-50 border border-blue-200 rounded-lg p-4 m-4"><h4 class="text-base font-semibold text-gray-900 mb-3">Add Checklist</h4><div class=space-y-3><div><label class="block text-sm font-semibold text-gray-700 mb-1">Checklist Type</label><select class="w-full border border-gray-300 rounded-lg px-3 py-2 text-gray-900 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"></select></div><div><label class="block text-sm font-semibold text-gray-700 mb-1">Assignee (Optional)</label><select class="w-full border border-gray-300 rounded-lg px-3 py-2 text-gray-900 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"><option value>Unassigned</option></select></div></div><div class="flex gap-2 mt-4"><button class="px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"></button><button class="px-4 py-2 bg-white text-gray-700 text-sm font-medium rounded-lg border border-gray-300 hover:border-blue-300 hover:text-blue-600 transition-colors">Cancel'),hi=A("<option>");function Ug(t){const[e,n]=P("AMSTAR2"),[s,r]=P(""),i=()=>{t.onSubmit(e(),s()||void 0),n("AMSTAR2"),r("")},l=()=>t.members||[];return(()=>{var o=Mg(),a=o.firstChild,c=a.nextSibling,u=c.firstChild,d=u.firstChild,f=d.nextSibling,h=u.nextSibling,g=h.firstChild,p=g.nextSibling;p.firstChild;var y=c.nextSibling,O=y.firstChild,C=O.nextSibling;return f.addEventListener("change",E=>n(E.target.value)),w(f,m(Me,{get each(){return Object.keys(xd)},children:E=>(()=>{var v=hi();return v.value=E,w(v,E),v})()})),p.addEventListener("change",E=>r(E.target.value)),w(p,m(Me,{get each(){return l()},children:E=>(()=>{var v=hi();return w(v,()=>E.userName||E.userEmail),U(()=>v.value=E.userId),v})()}),null),O.$$click=i,w(O,()=>t.loading?"Adding...":"Add Checklist"),C.$$click=()=>t.onCancel(),U(()=>O.disabled=t.loading),U(()=>f.value=e()),U(()=>p.value=s()),o})()}ge(["click"]);var Ig=A('<div class="p-4 hover:bg-gray-50 transition-colors flex items-center justify-between group"><div class=flex-1><div class="flex items-center gap-3"><h4 class="text-gray-900 font-medium"> Checklist</h4><span></span></div><p class="text-gray-500 text-sm mt-1">Assigned to: </p></div><button class="px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors">Open');function jg(t){const e=n=>{switch(n){case"completed":return"bg-green-100 text-green-800";case"in-progress":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return(()=>{var n=Ig(),s=n.firstChild,r=s.firstChild,i=r.firstChild,l=i.firstChild,o=i.nextSibling,a=r.nextSibling;a.firstChild;var c=s.nextSibling;return w(i,()=>t.checklist.type||"AMSTAR2",l),w(o,()=>t.checklist.status||"pending"),w(a,(()=>{var u=ae(()=>!!t.getAssigneeName);return()=>u()?t.getAssigneeName(t.checklist.assignedTo):"Unassigned"})(),null),c.$$click=()=>t.onOpen(),U(()=>ht(o,`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${e(t.checklist.status)}`)),n})()}ge(["click"]);var qg=A('<p class="text-gray-500 text-sm mt-1">'),Fg=A('<div class="divide-y divide-gray-200">'),Bg=A('<div class="bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 overflow-hidden"><div class="p-4 border-b border-gray-200 bg-gray-50"><div class="flex items-center justify-between"><div class=flex-1><h3 class="text-lg font-semibold text-gray-900"></h3></div><div class="flex items-center gap-2"><button class="inline-flex items-center px-3 py-1.5 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors gap-1"><svg class="w-4 h-4"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 4v16m8-8H4"></path></svg>Add Checklist'),Vg=A('<div class="p-4 text-center text-gray-400 text-sm">No checklists in this review yet');function Yg(t){const e=(n,s)=>{t.onAddChecklist(n,s)};return(()=>{var n=Bg(),s=n.firstChild,r=s.firstChild,i=r.firstChild,l=i.firstChild,o=i.nextSibling,a=o.firstChild;return w(l,()=>t.review.name),w(i,m(F,{get when(){return t.review.description},get children(){var c=qg();return w(c,()=>t.review.description),c}}),null),a.$$click=()=>t.onToggleChecklistForm(),w(n,m(F,{get when(){return t.showChecklistForm},get children(){return m(Ug,{get members(){return t.members},onSubmit:e,onCancel:()=>t.onToggleChecklistForm(),get loading(){return t.creatingChecklist}})}}),null),w(n,m(F,{get when(){return t.review.checklists?.length>0},get fallback(){return Vg()},get children(){var c=Fg();return w(c,m(Me,{get each(){return t.review.checklists},children:u=>m(jg,{checklist:u,onOpen:()=>t.onOpenChecklist(u.id),get getAssigneeName(){return t.getAssigneeName}})})),c}}),null),n})()}ge(["click"]);var Wg=A('<div class="bg-white border border-gray-200 rounded-lg shadow-sm p-6"><h3 class="text-lg font-semibold text-gray-900 mb-4">Create New Review</h3><div class=space-y-4><div><label class="block text-sm font-semibold text-gray-700 mb-2">Review Name</label><input type=text placeholder="e.g., Sleep Interventions Systematic Review"class="w-full border border-gray-300 rounded-lg px-3 py-2 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"></div><div><label class="block text-sm font-semibold text-gray-700 mb-2">Description (Optional)</label><textarea placeholder="Brief description of this review..."rows=2 class="w-full border border-gray-300 rounded-lg px-3 py-2 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"></textarea></div></div><div class="flex gap-3 mt-4"><button class="inline-flex items-center px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-all duration-200 shadow-md"></button><button class="px-4 py-2 bg-white text-gray-700 font-medium rounded-lg border border-gray-300 hover:border-blue-300 hover:text-blue-600 transition-colors">Cancel');function Jg(t){const[e,n]=P(""),[s,r]=P(""),i=()=>{e().trim()&&(t.onSubmit(e().trim(),s().trim()),n(""),r(""))};return(()=>{var l=Wg(),o=l.firstChild,a=o.nextSibling,c=a.firstChild,u=c.firstChild,d=u.nextSibling,f=c.nextSibling,h=f.firstChild,g=h.nextSibling,p=a.nextSibling,y=p.firstChild,O=y.nextSibling;return d.$$input=C=>n(C.target.value),g.$$input=C=>r(C.target.value),y.$$click=i,w(y,()=>t.loading?"Creating...":"Create Review"),O.$$click=()=>t.onCancel(),U(()=>y.disabled=t.loading||!e().trim()),U(()=>d.value=e()),U(()=>g.value=s()),l})()}ge(["input","click"]);var Hg=A('<div class="flex items-center justify-center py-12"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div><span class="ml-3 text-gray-500">Loading project...'),zg=A('<div class="bg-red-50 border border-red-200 rounded-lg p-4 text-red-700">Error: '),Gg=A('<div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3 text-yellow-700 text-sm mb-4 flex items-center gap-2"><div class="animate-pulse w-2 h-2 bg-yellow-500 rounded-full"></div>Connecting to real-time sync...'),Qg=A('<span class="flex items-center gap-1 text-green-600 text-sm"><div class="w-2 h-2 bg-green-500 rounded-full"></div>Synced'),Kg=A('<p class="text-gray-500 ml-10">'),Xg=A('<div class=mb-8><div class="flex items-center gap-4 mb-2"><button class="text-gray-400 hover:text-gray-700 transition-colors"><svg class="w-6 h-6"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M15 19l-7-7 7-7"></path></svg></button><h1 class="text-2xl font-bold text-gray-900"></h1><span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 capitalize">'),Zg=A("<div class=space-y-4>"),em=A('<div class=space-y-6><div class="flex items-center justify-between"><h2 class="text-xl font-bold text-gray-900">Reviews</h2><button class="inline-flex items-center px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transform hover:scale-[1.02] transition-all duration-200 shadow-md hover:shadow-lg gap-2"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 4v16m8-8H4"></path></svg>New Review'),tm=A('<div class=mt-8><h2 class="text-xl font-bold text-gray-900 mb-4">Project Members</h2><div class="bg-white border border-gray-200 rounded-lg shadow-sm divide-y divide-gray-200">'),nm=A('<div class="min-h-screen bg-blue-50"><div class="p-6 max-w-4xl mx-auto">'),sm=A('<div class="text-center py-12 bg-white rounded-lg border-2 border-dashed border-gray-300"><p class="text-gray-500 mb-4">No reviews yet</p><button class="text-blue-600 hover:text-blue-700 font-medium">Create your first review'),rm=A('<div class="p-4 flex items-center justify-between"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white font-medium"></div><div><p class="text-gray-900 font-medium"></p><p class="text-gray-500 text-sm"></p></div></div><span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 capitalize">');const gi="https://www.corates.org";function im(){const t=lr(),e=Ce(),[n,s]=P(null),[r,i]=P([]),[l,o]=P(!0),[a,c]=P(null),[u,d]=P(!1),[f,h]=P(!1),[g,p]=P(null),[y,O]=P(!1),{reviews:C,connected:E,error:v,createReview:L,createChecklist:k,connect:N,disconnect:x}=Yl(t.projectId);de(()=>{t.projectId&&N()}),_e(()=>{x()}),de(async()=>{if(t.projectId)try{o(!0),c(null);const T=await fetch(`${gi}/api/projects/${t.projectId}`,{credentials:"include"});if(!T.ok)throw new Error("Failed to fetch project");const $=await T.json();s($);const R=await fetch(`${gi}/api/projects/${t.projectId}/members`,{credentials:"include"});if(R.ok){const M=await R.json();i(M)}}catch(T){console.error("Error loading project:",T),c(T.message)}finally{o(!1)}});const _=async(T,$)=>{h(!0);try{L(T,$),d(!1)}catch(R){console.error("Error creating review:",R),alert("Failed to create review")}finally{h(!1)}},b=async(T,$,R)=>{O(!0);try{k(T,$,R),p(null)}catch(M){console.error("Error creating checklist:",M),alert("Failed to create checklist")}finally{O(!1)}},S=(T,$)=>{e(`/projects/${t.projectId}/reviews/${T}/checklists/${$}`)},D=T=>{if(!T)return"Unassigned";const $=r().find(R=>R.userId===T);return $?.displayName||$?.name||$?.email||"Unknown"};return(()=>{var T=nm(),$=T.firstChild;return w($,m(F,{get when(){return l()},get children(){return Hg()}}),null),w($,m(F,{get when(){return a()||v()},get children(){var R=zg();return R.firstChild,w(R,()=>a()||v(),null),R}}),null),w($,m(F,{get when(){return ae(()=>!l()&&!a())()&&n()},get children(){return[m(F,{get when(){return!E()},get children(){return Gg()}}),(()=>{var R=Xg(),M=R.firstChild,q=M.firstChild,I=q.nextSibling,W=I.nextSibling;return q.$$click=()=>e("/dashboard"),w(I,()=>n().name),w(W,()=>n().role),w(M,m(F,{get when(){return E()},get children(){return Qg()}}),null),w(R,m(F,{get when(){return n().description},get children(){var G=Kg();return w(G,()=>n().description),G}}),null),R})(),(()=>{var R=em(),M=R.firstChild,q=M.firstChild,I=q.nextSibling;return I.$$click=()=>d(!0),w(R,m(F,{get when(){return u()},get children(){return m(Jg,{onSubmit:_,onCancel:()=>d(!1),get loading(){return f()}})}}),null),w(R,m(F,{get when(){return C().length>0},get fallback(){return(()=>{var W=sm(),G=W.firstChild,Q=G.nextSibling;return Q.$$click=()=>d(!0),W})()},get children(){var W=Zg();return w(W,m(Me,{get each(){return C()},children:G=>m(Yg,{review:G,get members(){return r()},get projectId(){return t.projectId},get showChecklistForm(){return g()===G.id},onToggleChecklistForm:()=>p(Q=>Q===G.id?null:G.id),onAddChecklist:(Q,le)=>b(G.id,Q,le),onOpenChecklist:Q=>S(G.id,Q),getAssigneeName:D,get creatingChecklist(){return y()}})})),W}}),null),R})(),(()=>{var R=tm(),M=R.firstChild,q=M.nextSibling;return w(q,m(Me,{get each(){return r()},children:I=>(()=>{var W=rm(),G=W.firstChild,Q=G.firstChild,le=Q.nextSibling,ct=le.firstChild,rs=ct.nextSibling,oe=G.nextSibling;return w(Q,()=>(I.displayName||I.name||I.email||"?").charAt(0).toUpperCase()),w(ct,()=>I.displayName||I.name||"Unknown"),w(rs,()=>I.email),w(oe,()=>I.role),W})()})),R})()]}}),null),T})()}ge(["click"]);const lm="/";function om(){return m(ca,{base:lm,get children(){return[m(Be,{path:"/signin",component:()=>m(wn,{get children(){return m(Uu,{})}})}),m(Be,{path:"/signup",component:()=>m(wn,{get children(){return m(Hu,{})}})}),m(Be,{path:"/check-email",component:()=>m(wn,{get children(){return m(ld,{})}})}),m(Be,{path:"/reset-password",component:()=>m(wn,{get children(){return m(fd,{})}})}),m(Be,{path:"/checklist",component:()=>m(bn,{get children(){return m(Qi,{})}})}),m(Be,{path:"/projects/:projectId",component:()=>m(bn,{get children(){return m(im,{})}})}),m(Be,{path:"/projects/:projectId/reviews/:reviewId/checklists/:checklistId",component:()=>m(bn,{get children(){return m(Pg,{})}})}),m(Be,{path:"/dashboard",component:()=>m(bn,{get children(){return m(qc,{})}})}),m(Be,{path:"/",component:()=>m(da,{href:"/dashboard"})})]}})}function am(){return m(om,{})}Co(()=>m(am,{}),document.getElementById("root"));
